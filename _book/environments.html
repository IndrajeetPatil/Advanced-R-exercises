<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Chapter 7 Environments | Advanced R Exercises</title>

    <meta name="author" content="Indrajeet Patil" />
  
   <meta name="description" content="Solutions to exercises in Hadley Wickham’s Advanced R (2nd edition) book." />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="Chapter 7 Environments | Advanced R Exercises" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/cover.png" />
  <meta property="og:description" content="Solutions to exercises in Hadley Wickham’s Advanced R (2nd edition) book." />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Environments | Advanced R Exercises" />
  
  <meta name="twitter:description" content="Solutions to exercises in Hadley Wickham’s Advanced R (2nd edition) book." />
  <meta name="twitter:image" content="/cover.png" />
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.4.0/transition.js"></script>
    <script src="libs/bs3compat-0.4.0/tabs.js"></script>
    <script src="libs/bs3compat-0.4.0/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
    <script src="libs/d3-3.5.6/d3.min.js"></script>
    <link href="libs/profvis-0.3.6.9000/profvis.css" rel="stylesheet" />
    <script src="libs/profvis-0.3.6.9000/profvis.js"></script>
    <script src="libs/profvis-0.3.6.9000/scroll.js"></script>
    <link href="libs/highlight-6.2.0/textmate.css" rel="stylesheet" />
    <script src="libs/highlight-6.2.0/highlight.js"></script>
    <script src="libs/profvis-binding-0.3.7/profvis.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
      <link rel="stylesheet" href="bs4_style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Advanced R Exercises</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="environments" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Environments</h1>
<!-- ```{r, include = FALSE, eval=FALSE} -->
<!-- # don't include because otherwise all loaded packages will  -->
<!-- # show up in search path for environments -->
<!-- source("common.R") -->
<!-- ``` -->
<p>Loading the needed libraries:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="environments.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rlang, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div id="exercises-7.2.7" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Exercises 7.2.7</h2>
<p><strong>Q1.</strong> List three ways in which an environment differs from a list.</p>
<p><strong>A1.</strong> As mentioned in the book, here are a few ways in which environments differ from lists:</p>
<table>
<thead>
<tr class="header">
<th align="center">Property</th>
<th align="center">List</th>
<th align="center">Environment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">semantics</td>
<td align="center">value</td>
<td align="center">reference</td>
</tr>
<tr class="even">
<td align="center">data structure</td>
<td align="center">linear</td>
<td align="center">non-linear</td>
</tr>
<tr class="odd">
<td align="center">duplicated names</td>
<td align="center">allowed</td>
<td align="center">not allowed</td>
</tr>
<tr class="even">
<td align="center">can have parents?</td>
<td align="center">false</td>
<td align="center">true</td>
</tr>
<tr class="odd">
<td align="center">can contain itself?</td>
<td align="center">false</td>
<td align="center">true</td>
</tr>
</tbody>
</table>
<p><strong>Q2.</strong> Create an environment as illustrated by this picture.</p>
<p><img src="diagrams/environments/recursive-1.png" width="177" /></p>
<p><strong>A2.</strong> Creating the environment illustrated in the picture:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="environments.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rlang)</span>
<span id="cb2-2"><a href="environments.html#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="environments.html#cb2-3" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="fu">env</span>()</span>
<span id="cb2-4"><a href="environments.html#cb2-4" aria-hidden="true" tabindex="-1"></a>e<span class="sc">$</span>loop <span class="ot">&lt;-</span> e</span>
<span id="cb2-5"><a href="environments.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">env_print</span>(e)</span>
<span id="cb2-6"><a href="environments.html#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: 0x00000000196690f0&gt;</span></span>
<span id="cb2-7"><a href="environments.html#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Parent: &lt;environment: global&gt;</span></span>
<span id="cb2-8"><a href="environments.html#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Bindings:</span></span>
<span id="cb2-9"><a href="environments.html#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; * loop: &lt;env&gt;</span></span></code></pre></div>
<p>The binding <code>loop</code> should have the same memory address as the environment <code>e</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="environments.html#cb3-1" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">ref</span>(e<span class="sc">$</span>loop)</span>
<span id="cb3-2"><a href="environments.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o [1:0x196690f0] &lt;env&gt; </span></span>
<span id="cb3-3"><a href="environments.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-loop = [1:0x196690f0]</span></span></code></pre></div>
<p><strong>Q3.</strong> Create a pair of environments as illustrated by this picture.</p>
<p><img src="diagrams/environments/recursive-2.png" width="307" /></p>
<p><strong>A3.</strong> Creating the specified environment:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="environments.html#cb4-1" aria-hidden="true" tabindex="-1"></a>e1 <span class="ot">&lt;-</span> <span class="fu">env</span>()</span>
<span id="cb4-2"><a href="environments.html#cb4-2" aria-hidden="true" tabindex="-1"></a>e2 <span class="ot">&lt;-</span> <span class="fu">env</span>()</span>
<span id="cb4-3"><a href="environments.html#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="environments.html#cb4-4" aria-hidden="true" tabindex="-1"></a>e1<span class="sc">$</span>loop <span class="ot">&lt;-</span> e2</span>
<span id="cb4-5"><a href="environments.html#cb4-5" aria-hidden="true" tabindex="-1"></a>e2<span class="sc">$</span>deloop <span class="ot">&lt;-</span> e1</span>
<span id="cb4-6"><a href="environments.html#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="environments.html#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># following should be the same</span></span>
<span id="cb4-8"><a href="environments.html#cb4-8" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">obj_addrs</span>(<span class="fu">list</span>(e1, e2<span class="sc">$</span>deloop))</span>
<span id="cb4-9"><a href="environments.html#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;0x33af48a0&quot; &quot;0x33af48a0&quot;</span></span>
<span id="cb4-10"><a href="environments.html#cb4-10" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">obj_addrs</span>(<span class="fu">list</span>(e2, e1<span class="sc">$</span>loop))</span>
<span id="cb4-11"><a href="environments.html#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;0x33b5f810&quot; &quot;0x33b5f810&quot;</span></span></code></pre></div>
<p><strong>Q4.</strong> Explain why <code>e[[1]]</code> and <code>e[c("a", "b")]</code> don’t make sense when <code>e</code> is an environment.</p>
<p><strong>A4.</strong> An environment is a non-linear data structure, and has no concept of ordered elements. Therefore, indexing it (e.g. <code>e[[1]]</code>) doesn’t make sense.</p>
<p>Subsetting a list or a vector returns a subset of the underlying data structure. For example, subsetting a vector returns another vector. But it’s unclear what subsetting an environment (e.g. <code>e[c("a", "b")]</code>) should return because there is no data structure to contain its returns. It can’t be another environment since environments have reference semantics.</p>
<p><strong>Q5.</strong> Create a version of <code>env_poke()</code> that will only bind new names, never re-bind old names. Some programming languages only do this, and are known as <a href="https://en.wikipedia.org/wiki/Assignment_(computer_science)#Single_assignment">single assignment languages</a>.</p>
<p><strong>A5.</strong> Create a version of <code>env_poke()</code> that doesn’t allow re-binding old names:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="environments.html#cb5-1" aria-hidden="true" tabindex="-1"></a>env_poke2 <span class="ot">&lt;-</span> <span class="cf">function</span>(env, nm, value) {</span>
<span id="cb5-2"><a href="environments.html#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">env_has</span>(env, nm)) {</span>
<span id="cb5-3"><a href="environments.html#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abort</span>(<span class="st">&quot;Can&#39;t re-bind existing names.&quot;</span>)</span>
<span id="cb5-4"><a href="environments.html#cb5-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-5"><a href="environments.html#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="environments.html#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">env_poke</span>(env, nm, value)</span>
<span id="cb5-7"><a href="environments.html#cb5-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Making sure that it behaves as expected:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="environments.html#cb6-1" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="fu">env</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>, <span class="at">c =</span> <span class="dv">3</span>)</span>
<span id="cb6-2"><a href="environments.html#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="environments.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># re-binding old names not allowed</span></span>
<span id="cb6-4"><a href="environments.html#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">env_poke2</span>(e, <span class="st">&quot;b&quot;</span>, <span class="dv">4</span>)</span>
<span id="cb6-5"><a href="environments.html#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in `env_poke2()`:</span></span>
<span id="cb6-6"><a href="environments.html#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ! Can&#39;t re-bind existing names.</span></span>
<span id="cb6-7"><a href="environments.html#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="environments.html#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># binding new names allowed</span></span>
<span id="cb6-9"><a href="environments.html#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">env_poke2</span>(e, <span class="st">&quot;d&quot;</span>, <span class="dv">8</span>)</span>
<span id="cb6-10"><a href="environments.html#cb6-10" aria-hidden="true" tabindex="-1"></a>e<span class="sc">$</span>d</span>
<span id="cb6-11"><a href="environments.html#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 8</span></span></code></pre></div>
<p>Contrast this behavior with the following:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="environments.html#cb7-1" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="fu">env</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>, <span class="at">c =</span> <span class="dv">3</span>)</span>
<span id="cb7-2"><a href="environments.html#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="environments.html#cb7-3" aria-hidden="true" tabindex="-1"></a>e<span class="sc">$</span>b</span>
<span id="cb7-4"><a href="environments.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb7-5"><a href="environments.html#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="environments.html#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># re-binding old names allowed</span></span>
<span id="cb7-7"><a href="environments.html#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">env_poke</span>(e, <span class="st">&quot;b&quot;</span>, <span class="dv">4</span>)</span>
<span id="cb7-8"><a href="environments.html#cb7-8" aria-hidden="true" tabindex="-1"></a>e<span class="sc">$</span>b</span>
<span id="cb7-9"><a href="environments.html#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span></code></pre></div>
<p><strong>Q6.</strong> What does this function do? How does it differ from <code>&lt;&lt;-</code> and why might you prefer it?</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="environments.html#cb8-1" aria-hidden="true" tabindex="-1"></a>rebind <span class="ot">&lt;-</span> <span class="cf">function</span>(name, value, <span class="at">env =</span> <span class="fu">caller_env</span>()) {</span>
<span id="cb8-2"><a href="environments.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">identical</span>(env, <span class="fu">empty_env</span>())) {</span>
<span id="cb8-3"><a href="environments.html#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;Can&#39;t find `&quot;</span>, name, <span class="st">&quot;`&quot;</span>, <span class="at">call. =</span> <span class="cn">FALSE</span>)</span>
<span id="cb8-4"><a href="environments.html#cb8-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">env_has</span>(env, name)) {</span>
<span id="cb8-5"><a href="environments.html#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">env_poke</span>(env, name, value)</span>
<span id="cb8-6"><a href="environments.html#cb8-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb8-7"><a href="environments.html#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rebind</span>(name, value, <span class="fu">env_parent</span>(env))</span>
<span id="cb8-8"><a href="environments.html#cb8-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-9"><a href="environments.html#cb8-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-10"><a href="environments.html#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rebind</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">10</span>)</span>
<span id="cb8-11"><a href="environments.html#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: Can&#39;t find `a`</span></span>
<span id="cb8-12"><a href="environments.html#cb8-12" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb8-13"><a href="environments.html#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="fu">rebind</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">10</span>)</span>
<span id="cb8-14"><a href="environments.html#cb8-14" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb8-15"><a href="environments.html#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span></code></pre></div>
<p><strong>A6.</strong> The downside of <code>&lt;&lt;-</code> is that it will create a new binding if it doesn’t exist in the given environment, which is something that we may not wish:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="environments.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># `x` doesn&#39;t exist</span></span>
<span id="cb9-2"><a href="environments.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exists</span>(<span class="st">&quot;x&quot;</span>)</span>
<span id="cb9-3"><a href="environments.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb9-4"><a href="environments.html#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="environments.html#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># so `&lt;&lt;-` will create one for us</span></span>
<span id="cb9-6"><a href="environments.html#cb9-6" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb9-7"><a href="environments.html#cb9-7" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;&lt;-</span> <span class="dv">5</span></span>
<span id="cb9-8"><a href="environments.html#cb9-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-9"><a href="environments.html#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="environments.html#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># in the global environment</span></span>
<span id="cb9-11"><a href="environments.html#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="fu">env_has</span>(<span class="fu">global_env</span>(), <span class="st">&quot;x&quot;</span>)</span>
<span id="cb9-12"><a href="environments.html#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    x </span></span>
<span id="cb9-13"><a href="environments.html#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; TRUE</span></span>
<span id="cb9-14"><a href="environments.html#cb9-14" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb9-15"><a href="environments.html#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5</span></span></code></pre></div>
<p>But <code>rebind()</code> function will let us know if the binding doesn’t exist, which is much safer:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="environments.html#cb10-1" aria-hidden="true" tabindex="-1"></a>rebind <span class="ot">&lt;-</span> <span class="cf">function</span>(name, value, <span class="at">env =</span> <span class="fu">caller_env</span>()) {</span>
<span id="cb10-2"><a href="environments.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">identical</span>(env, <span class="fu">empty_env</span>())) {</span>
<span id="cb10-3"><a href="environments.html#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;Can&#39;t find `&quot;</span>, name, <span class="st">&quot;`&quot;</span>, <span class="at">call. =</span> <span class="cn">FALSE</span>)</span>
<span id="cb10-4"><a href="environments.html#cb10-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">env_has</span>(env, name)) {</span>
<span id="cb10-5"><a href="environments.html#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">env_poke</span>(env, name, value)</span>
<span id="cb10-6"><a href="environments.html#cb10-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb10-7"><a href="environments.html#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rebind</span>(name, value, <span class="fu">env_parent</span>(env))</span>
<span id="cb10-8"><a href="environments.html#cb10-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb10-9"><a href="environments.html#cb10-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-10"><a href="environments.html#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="environments.html#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co"># doesn&#39;t exist</span></span>
<span id="cb10-12"><a href="environments.html#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="fu">exists</span>(<span class="st">&quot;abc&quot;</span>)</span>
<span id="cb10-13"><a href="environments.html#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb10-14"><a href="environments.html#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="environments.html#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co"># so function will produce an error instead of creating it for us</span></span>
<span id="cb10-16"><a href="environments.html#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="fu">rebind</span>(<span class="st">&quot;abc&quot;</span>, <span class="dv">10</span>)</span>
<span id="cb10-17"><a href="environments.html#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: Can&#39;t find `abc`</span></span>
<span id="cb10-18"><a href="environments.html#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="environments.html#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co"># but it will work as expected when the variable already exists</span></span>
<span id="cb10-20"><a href="environments.html#cb10-20" aria-hidden="true" tabindex="-1"></a>abc <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb10-21"><a href="environments.html#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="fu">rebind</span>(<span class="st">&quot;abc&quot;</span>, <span class="dv">10</span>)</span>
<span id="cb10-22"><a href="environments.html#cb10-22" aria-hidden="true" tabindex="-1"></a>abc</span>
<span id="cb10-23"><a href="environments.html#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span></code></pre></div>
</div>
<div id="exercises-7.3.1" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Exercises 7.3.1</h2>
<p><strong>Q1.</strong> Modify <code>where()</code> to return <em>all</em> environments that contain a binding for <code>name</code>. Carefully think through what type of object the function will need to return.</p>
<p><strong>A1.</strong> Here is a modified version of <code>where()</code> that returns <em>all</em> environments that contain a binding for <code>name</code>.</p>
<p>Since we anticipate more than one environment, we dynamically update a list each time an environment with the specified binding is found. It is important to initialize to an empty list since that signifies that given binding is not found in any of the environments.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="environments.html#cb11-1" aria-hidden="true" tabindex="-1"></a>where <span class="ot">&lt;-</span> <span class="cf">function</span>(name, <span class="at">env =</span> <span class="fu">caller_env</span>()) {</span>
<span id="cb11-2"><a href="environments.html#cb11-2" aria-hidden="true" tabindex="-1"></a>  env_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb11-3"><a href="environments.html#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="environments.html#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (<span class="sc">!</span><span class="fu">identical</span>(env, <span class="fu">empty_env</span>())) {</span>
<span id="cb11-5"><a href="environments.html#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">env_has</span>(env, name)) {</span>
<span id="cb11-6"><a href="environments.html#cb11-6" aria-hidden="true" tabindex="-1"></a>      env_list <span class="ot">&lt;-</span> <span class="fu">append</span>(env_list, env)</span>
<span id="cb11-7"><a href="environments.html#cb11-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb11-8"><a href="environments.html#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="environments.html#cb11-9" aria-hidden="true" tabindex="-1"></a>    env <span class="ot">&lt;-</span> <span class="fu">env_parent</span>(env)</span>
<span id="cb11-10"><a href="environments.html#cb11-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb11-11"><a href="environments.html#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="environments.html#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(env_list)</span>
<span id="cb11-13"><a href="environments.html#cb11-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Let’s try it out:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="environments.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">where</span>(<span class="st">&quot;yyy&quot;</span>)</span>
<span id="cb12-2"><a href="environments.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; list()</span></span>
<span id="cb12-3"><a href="environments.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="environments.html#cb12-4" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb12-5"><a href="environments.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">where</span>(<span class="st">&quot;x&quot;</span>)</span>
<span id="cb12-6"><a href="environments.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb12-7"><a href="environments.html#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb12-8"><a href="environments.html#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="environments.html#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="fu">where</span>(<span class="st">&quot;mean&quot;</span>)</span>
<span id="cb12-10"><a href="environments.html#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb12-11"><a href="environments.html#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: base&gt;</span></span>
<span id="cb12-12"><a href="environments.html#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="environments.html#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-14"><a href="environments.html#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="fu">where</span>(<span class="st">&quot;filter&quot;</span>)</span>
<span id="cb12-15"><a href="environments.html#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb12-16"><a href="environments.html#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: package:dplyr&gt;</span></span>
<span id="cb12-17"><a href="environments.html#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; attr(,&quot;name&quot;)</span></span>
<span id="cb12-18"><a href="environments.html#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;package:dplyr&quot;</span></span>
<span id="cb12-19"><a href="environments.html#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; attr(,&quot;path&quot;)</span></span>
<span id="cb12-20"><a href="environments.html#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;C:/Users/IndrajeetPatil/Documents/R/win-library/4.1/dplyr&quot;</span></span>
<span id="cb12-21"><a href="environments.html#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb12-22"><a href="environments.html#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb12-23"><a href="environments.html#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: package:stats&gt;</span></span>
<span id="cb12-24"><a href="environments.html#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; attr(,&quot;name&quot;)</span></span>
<span id="cb12-25"><a href="environments.html#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;package:stats&quot;</span></span>
<span id="cb12-26"><a href="environments.html#cb12-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; attr(,&quot;path&quot;)</span></span>
<span id="cb12-27"><a href="environments.html#cb12-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;C:/Program Files/R/R-4.1.3/library/stats&quot;</span></span>
<span id="cb12-28"><a href="environments.html#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(<span class="st">&quot;package:dplyr&quot;</span>)</span></code></pre></div>
<p><strong>Q2.</strong> Write a function called <code>fget()</code> that finds only function objects. It should have two arguments, <code>name</code> and <code>env</code>, and should obey the regular scoping rules for functions: if there’s an object with a matching name that’s not a function, look in the parent. For an added challenge, also add an <code>inherits</code> argument which controls whether the function recurses up the parents or only looks in one environment.</p>
<p><strong>A2.</strong> Here is a function that recursively looks for function objects:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="environments.html#cb13-1" aria-hidden="true" tabindex="-1"></a>fget <span class="ot">&lt;-</span> <span class="cf">function</span>(name, <span class="at">env =</span> <span class="fu">caller_env</span>(), <span class="at">inherits =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb13-2"><a href="environments.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># we need only function objects</span></span>
<span id="cb13-3"><a href="environments.html#cb13-3" aria-hidden="true" tabindex="-1"></a>  f_value <span class="ot">&lt;-</span> <span class="fu">mget</span>(name,</span>
<span id="cb13-4"><a href="environments.html#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">envir =</span> env,</span>
<span id="cb13-5"><a href="environments.html#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mode =</span> <span class="st">&quot;function&quot;</span>,</span>
<span id="cb13-6"><a href="environments.html#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">inherits =</span> <span class="cn">FALSE</span>, <span class="co"># since we have our custom argument</span></span>
<span id="cb13-7"><a href="environments.html#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ifnotfound =</span> <span class="fu">list</span>(<span class="cn">NULL</span>)</span>
<span id="cb13-8"><a href="environments.html#cb13-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-9"><a href="environments.html#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="environments.html#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(f_value[[<span class="dv">1</span>]])) {</span>
<span id="cb13-11"><a href="environments.html#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># success case</span></span>
<span id="cb13-12"><a href="environments.html#cb13-12" aria-hidden="true" tabindex="-1"></a>    f_value[[<span class="dv">1</span>]]</span>
<span id="cb13-13"><a href="environments.html#cb13-13" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb13-14"><a href="environments.html#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (inherits <span class="sc">&amp;&amp;</span> <span class="sc">!</span><span class="fu">identical</span>(env, <span class="fu">empty_env</span>())) {</span>
<span id="cb13-15"><a href="environments.html#cb13-15" aria-hidden="true" tabindex="-1"></a>      <span class="co"># recursive case</span></span>
<span id="cb13-16"><a href="environments.html#cb13-16" aria-hidden="true" tabindex="-1"></a>      env <span class="ot">&lt;-</span> <span class="fu">env_parent</span>(env)</span>
<span id="cb13-17"><a href="environments.html#cb13-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">fget</span>(name, env, <span class="at">inherits =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-18"><a href="environments.html#cb13-18" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb13-19"><a href="environments.html#cb13-19" aria-hidden="true" tabindex="-1"></a>      <span class="co"># base case</span></span>
<span id="cb13-20"><a href="environments.html#cb13-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">&quot;No function objects with matching name was found.&quot;</span>, <span class="at">call. =</span> <span class="cn">FALSE</span>)</span>
<span id="cb13-21"><a href="environments.html#cb13-21" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb13-22"><a href="environments.html#cb13-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-23"><a href="environments.html#cb13-23" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Let’s try it out:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="environments.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fget</span>(<span class="st">&quot;mean&quot;</span>, <span class="at">inherits =</span> <span class="cn">FALSE</span>)</span>
<span id="cb14-2"><a href="environments.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: No function objects with matching name was found.</span></span>
<span id="cb14-3"><a href="environments.html#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="environments.html#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">fget</span>(<span class="st">&quot;mean&quot;</span>, <span class="at">inherits =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-5"><a href="environments.html#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; function (x, ...) </span></span>
<span id="cb14-6"><a href="environments.html#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; UseMethod(&quot;mean&quot;)</span></span>
<span id="cb14-7"><a href="environments.html#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;bytecode: 0x0000000017ff2118&gt;</span></span>
<span id="cb14-8"><a href="environments.html#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: namespace:base&gt;</span></span>
<span id="cb14-9"><a href="environments.html#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="environments.html#cb14-10" aria-hidden="true" tabindex="-1"></a>mean <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb14-11"><a href="environments.html#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="fu">fget</span>(<span class="st">&quot;mean&quot;</span>, <span class="at">inherits =</span> <span class="cn">FALSE</span>)</span>
<span id="cb14-12"><a href="environments.html#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: No function objects with matching name was found.</span></span>
<span id="cb14-13"><a href="environments.html#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="environments.html#cb14-14" aria-hidden="true" tabindex="-1"></a>mean <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="cn">NULL</span></span>
<span id="cb14-15"><a href="environments.html#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="fu">fget</span>(<span class="st">&quot;mean&quot;</span>, <span class="at">inherits =</span> <span class="cn">FALSE</span>)</span>
<span id="cb14-16"><a href="environments.html#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; function() NULL</span></span>
<span id="cb14-17"><a href="environments.html#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="st">&quot;mean&quot;</span>)</span></code></pre></div>
</div>
<div id="exercises-7.4.5" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Exercises 7.4.5</h2>
<p><strong>Q1.</strong> How is <code>search_envs()</code> different from <code>env_parents(global_env())</code>?</p>
<p><strong>A1.</strong> The <code>search_envs()</code> lists a chain of environments currently attached to the search path and contains exported functions from these packages. The search path always ends at the <code>{base}</code> package environment. The search path also includes the global environment.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="environments.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">search_envs</span>()</span>
<span id="cb15-2"><a href="environments.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[1]] $ &lt;env: global&gt;</span></span>
<span id="cb15-3"><a href="environments.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[2]] $ &lt;env: package:rlang&gt;</span></span>
<span id="cb15-4"><a href="environments.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[3]] $ &lt;env: package:magrittr&gt;</span></span>
<span id="cb15-5"><a href="environments.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[4]] $ &lt;env: package:stats&gt;</span></span>
<span id="cb15-6"><a href="environments.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[5]] $ &lt;env: package:graphics&gt;</span></span>
<span id="cb15-7"><a href="environments.html#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[6]] $ &lt;env: package:grDevices&gt;</span></span>
<span id="cb15-8"><a href="environments.html#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[7]] $ &lt;env: package:utils&gt;</span></span>
<span id="cb15-9"><a href="environments.html#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[8]] $ &lt;env: package:datasets&gt;</span></span>
<span id="cb15-10"><a href="environments.html#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[9]] $ &lt;env: package:methods&gt;</span></span>
<span id="cb15-11"><a href="environments.html#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[10]] $ &lt;env: Autoloads&gt;</span></span>
<span id="cb15-12"><a href="environments.html#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[11]] $ &lt;env: org:r-lib&gt;</span></span>
<span id="cb15-13"><a href="environments.html#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[12]] $ &lt;env: package:base&gt;</span></span></code></pre></div>
<p>The <code>env_parents()</code> lists all parent environments up until the empty environment. Of course, the global environment itself is not included in this list.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="environments.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">env_parents</span>(<span class="fu">global_env</span>())</span>
<span id="cb16-2"><a href="environments.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[1]] $ &lt;env: package:rlang&gt;</span></span>
<span id="cb16-3"><a href="environments.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[2]] $ &lt;env: package:magrittr&gt;</span></span>
<span id="cb16-4"><a href="environments.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[3]] $ &lt;env: package:stats&gt;</span></span>
<span id="cb16-5"><a href="environments.html#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[4]] $ &lt;env: package:graphics&gt;</span></span>
<span id="cb16-6"><a href="environments.html#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[5]] $ &lt;env: package:grDevices&gt;</span></span>
<span id="cb16-7"><a href="environments.html#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[6]] $ &lt;env: package:utils&gt;</span></span>
<span id="cb16-8"><a href="environments.html#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[7]] $ &lt;env: package:datasets&gt;</span></span>
<span id="cb16-9"><a href="environments.html#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[8]] $ &lt;env: package:methods&gt;</span></span>
<span id="cb16-10"><a href="environments.html#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [[9]] $ &lt;env: Autoloads&gt;</span></span>
<span id="cb16-11"><a href="environments.html#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[10]] $ &lt;env: org:r-lib&gt;</span></span>
<span id="cb16-12"><a href="environments.html#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[11]] $ &lt;env: package:base&gt;</span></span>
<span id="cb16-13"><a href="environments.html#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[12]] $ &lt;env: empty&gt;</span></span></code></pre></div>
<p><strong>Q2.</strong> Draw a diagram that shows the enclosing environments of this function:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="environments.html#cb17-1" aria-hidden="true" tabindex="-1"></a>f1 <span class="ot">&lt;-</span> <span class="cf">function</span>(x1) {</span>
<span id="cb17-2"><a href="environments.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  f2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x2) {</span>
<span id="cb17-3"><a href="environments.html#cb17-3" aria-hidden="true" tabindex="-1"></a>    f3 <span class="ot">&lt;-</span> <span class="cf">function</span>(x3) {</span>
<span id="cb17-4"><a href="environments.html#cb17-4" aria-hidden="true" tabindex="-1"></a>      x1 <span class="sc">+</span> x2 <span class="sc">+</span> x3</span>
<span id="cb17-5"><a href="environments.html#cb17-5" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb17-6"><a href="environments.html#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">f3</span>(<span class="dv">3</span>)</span>
<span id="cb17-7"><a href="environments.html#cb17-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb17-8"><a href="environments.html#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">f2</span>(<span class="dv">2</span>)</span>
<span id="cb17-9"><a href="environments.html#cb17-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-10"><a href="environments.html#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="fu">f1</span>(<span class="dv">1</span>)</span></code></pre></div>
<p><strong>A2.</strong> I don’t have access to the graphics software used to create diagrams in the book, so I am linking the diagram from the <a href="https://advanced-r-solutions.rbind.io/environments.html#special-environments">official solutions manual</a>, where you will also find a more detailed description for the figure:</p>
<p><img src="https://raw.githubusercontent.com/Tazinho/Advanced-R-Solutions/main/images/environments/function_environments_corrected.png" width="100%" /></p>
<p><strong>Q3.</strong> Write an enhanced version of <code>str()</code> that provides more information about functions. Show where the function was found and what environment it was defined in.</p>
<p><strong>A3.</strong> To write the required function, we can first re-purpose the <code>fget()</code> function we wrote above to return the environment in which it was found and its enclosing environment:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="environments.html#cb18-1" aria-hidden="true" tabindex="-1"></a>fget2 <span class="ot">&lt;-</span> <span class="cf">function</span>(name, <span class="at">env =</span> <span class="fu">caller_env</span>()) {</span>
<span id="cb18-2"><a href="environments.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># we need only function objects</span></span>
<span id="cb18-3"><a href="environments.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  f_value <span class="ot">&lt;-</span> <span class="fu">mget</span>(name,</span>
<span id="cb18-4"><a href="environments.html#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">envir =</span> env,</span>
<span id="cb18-5"><a href="environments.html#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mode =</span> <span class="st">&quot;function&quot;</span>,</span>
<span id="cb18-6"><a href="environments.html#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">inherits =</span> <span class="cn">FALSE</span>,</span>
<span id="cb18-7"><a href="environments.html#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ifnotfound =</span> <span class="fu">list</span>(<span class="cn">NULL</span>)</span>
<span id="cb18-8"><a href="environments.html#cb18-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-9"><a href="environments.html#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="environments.html#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(f_value[[<span class="dv">1</span>]])) {</span>
<span id="cb18-11"><a href="environments.html#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># success case</span></span>
<span id="cb18-12"><a href="environments.html#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb18-13"><a href="environments.html#cb18-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;where&quot;</span> <span class="ot">=</span> env,</span>
<span id="cb18-14"><a href="environments.html#cb18-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;enclosing&quot;</span> <span class="ot">=</span> <span class="fu">fn_env</span>(f_value[[<span class="dv">1</span>]])</span>
<span id="cb18-15"><a href="environments.html#cb18-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-16"><a href="environments.html#cb18-16" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb18-17"><a href="environments.html#cb18-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">identical</span>(env, <span class="fu">empty_env</span>())) {</span>
<span id="cb18-18"><a href="environments.html#cb18-18" aria-hidden="true" tabindex="-1"></a>      <span class="co"># recursive case</span></span>
<span id="cb18-19"><a href="environments.html#cb18-19" aria-hidden="true" tabindex="-1"></a>      env <span class="ot">&lt;-</span> <span class="fu">env_parent</span>(env)</span>
<span id="cb18-20"><a href="environments.html#cb18-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">fget2</span>(name, env)</span>
<span id="cb18-21"><a href="environments.html#cb18-21" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb18-22"><a href="environments.html#cb18-22" aria-hidden="true" tabindex="-1"></a>      <span class="co"># base case</span></span>
<span id="cb18-23"><a href="environments.html#cb18-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">stop</span>(<span class="st">&quot;No function objects with matching name was found.&quot;</span>, <span class="at">call. =</span> <span class="cn">FALSE</span>)</span>
<span id="cb18-24"><a href="environments.html#cb18-24" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb18-25"><a href="environments.html#cb18-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-26"><a href="environments.html#cb18-26" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Let’s try it out:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="environments.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fget2</span>(<span class="st">&quot;mean&quot;</span>)</span>
<span id="cb19-2"><a href="environments.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $where</span></span>
<span id="cb19-3"><a href="environments.html#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: base&gt;</span></span>
<span id="cb19-4"><a href="environments.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb19-5"><a href="environments.html#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $enclosing</span></span>
<span id="cb19-6"><a href="environments.html#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: namespace:base&gt;</span></span>
<span id="cb19-7"><a href="environments.html#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="environments.html#cb19-8" aria-hidden="true" tabindex="-1"></a>mean <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="cn">NULL</span></span>
<span id="cb19-9"><a href="environments.html#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="fu">fget2</span>(<span class="st">&quot;mean&quot;</span>)</span>
<span id="cb19-10"><a href="environments.html#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $where</span></span>
<span id="cb19-11"><a href="environments.html#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb19-12"><a href="environments.html#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb19-13"><a href="environments.html#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $enclosing</span></span>
<span id="cb19-14"><a href="environments.html#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb19-15"><a href="environments.html#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="st">&quot;mean&quot;</span>)</span></code></pre></div>
<p>We can now write the new version of <code>str()</code> as a wrapper around this function. We only need to foresee that the users might enter the function name either as a symbol or a string.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="environments.html#cb20-1" aria-hidden="true" tabindex="-1"></a>str_function <span class="ot">&lt;-</span> <span class="cf">function</span>(.f) {</span>
<span id="cb20-2"><a href="environments.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fget2</span>(<span class="fu">as_string</span>(<span class="fu">ensym</span>(.f)))</span>
<span id="cb20-3"><a href="environments.html#cb20-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Let’s first try it with <code>base::mean()</code>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="environments.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_function</span>(mean)</span>
<span id="cb21-2"><a href="environments.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $where</span></span>
<span id="cb21-3"><a href="environments.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: base&gt;</span></span>
<span id="cb21-4"><a href="environments.html#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb21-5"><a href="environments.html#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $enclosing</span></span>
<span id="cb21-6"><a href="environments.html#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: namespace:base&gt;</span></span>
<span id="cb21-7"><a href="environments.html#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="environments.html#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str_function</span>(<span class="st">&quot;mean&quot;</span>)</span>
<span id="cb21-9"><a href="environments.html#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $where</span></span>
<span id="cb21-10"><a href="environments.html#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: base&gt;</span></span>
<span id="cb21-11"><a href="environments.html#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb21-12"><a href="environments.html#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $enclosing</span></span>
<span id="cb21-13"><a href="environments.html#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: namespace:base&gt;</span></span></code></pre></div>
<p>And then with our variant present in the global environment:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="environments.html#cb22-1" aria-hidden="true" tabindex="-1"></a>mean <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="cn">NULL</span></span>
<span id="cb22-2"><a href="environments.html#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="environments.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_function</span>(mean)</span>
<span id="cb22-4"><a href="environments.html#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $where</span></span>
<span id="cb22-5"><a href="environments.html#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb22-6"><a href="environments.html#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb22-7"><a href="environments.html#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $enclosing</span></span>
<span id="cb22-8"><a href="environments.html#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb22-9"><a href="environments.html#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="environments.html#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str_function</span>(<span class="st">&quot;mean&quot;</span>)</span>
<span id="cb22-11"><a href="environments.html#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $where</span></span>
<span id="cb22-12"><a href="environments.html#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb22-13"><a href="environments.html#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb22-14"><a href="environments.html#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $enclosing</span></span>
<span id="cb22-15"><a href="environments.html#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb22-16"><a href="environments.html#cb22-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-17"><a href="environments.html#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="st">&quot;mean&quot;</span>)</span></code></pre></div>
</div>
<div id="exercises-7.5.5" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Exercises 7.5.5</h2>
<p><strong>Q1.</strong> Write a function that lists all the variables defined in the environment in which it was called. It should return the same results as <code>ls()</code>.</p>
<p><strong>A1.</strong> Here is a function that lists all the variables defined in the environment in which it was called:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="environments.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let&#39;s first remove everything that exists in the global environment right now</span></span>
<span id="cb23-2"><a href="environments.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># to test with only newly defined objects</span></span>
<span id="cb23-3"><a href="environments.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb23-4"><a href="environments.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(.Random.seed, <span class="at">envir =</span> <span class="fu">globalenv</span>())</span>
<span id="cb23-5"><a href="environments.html#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="environments.html#cb23-6" aria-hidden="true" tabindex="-1"></a>ls_env <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">env =</span> rlang<span class="sc">::</span><span class="fu">caller_env</span>()) {</span>
<span id="cb23-7"><a href="environments.html#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(rlang<span class="sc">::</span><span class="fu">env_names</span>(env))</span>
<span id="cb23-8"><a href="environments.html#cb23-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The workhorse here is <code>rlang::caller_env()</code>, so let’s also have a look at its definition:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="environments.html#cb24-1" aria-hidden="true" tabindex="-1"></a>rlang<span class="sc">::</span>caller_env</span>
<span id="cb24-2"><a href="environments.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; function (n = 1) </span></span>
<span id="cb24-3"><a href="environments.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; {</span></span>
<span id="cb24-4"><a href="environments.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     parent.frame(n + 1)</span></span>
<span id="cb24-5"><a href="environments.html#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; }</span></span>
<span id="cb24-6"><a href="environments.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;bytecode: 0x00000000182bfd98&gt;</span></span>
<span id="cb24-7"><a href="environments.html#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: namespace:rlang&gt;</span></span></code></pre></div>
<p>Let’s try it out:</p>
<ul>
<li>In global environment:</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="environments.html#cb25-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;a&quot;</span></span>
<span id="cb25-2"><a href="environments.html#cb25-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb25-3"><a href="environments.html#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="environments.html#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ls_env</span>()</span>
<span id="cb25-5"><a href="environments.html#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;ls_env&quot; &quot;x&quot;      &quot;y&quot;</span></span>
<span id="cb25-6"><a href="environments.html#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="environments.html#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span>
<span id="cb25-8"><a href="environments.html#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;ls_env&quot; &quot;x&quot;      &quot;y&quot;</span></span></code></pre></div>
<ul>
<li>In function environment:</li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="environments.html#cb26-1" aria-hidden="true" tabindex="-1"></a>foo <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb26-2"><a href="environments.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  a <span class="ot">&lt;-</span> <span class="st">&quot;x&quot;</span></span>
<span id="cb26-3"><a href="environments.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  b <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb26-4"><a href="environments.html#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="environments.html#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">ls_env</span>())</span>
<span id="cb26-6"><a href="environments.html#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="environments.html#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">ls</span>())</span>
<span id="cb26-8"><a href="environments.html#cb26-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-9"><a href="environments.html#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="environments.html#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="fu">foo</span>()</span>
<span id="cb26-11"><a href="environments.html#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot;</span></span>
<span id="cb26-12"><a href="environments.html#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot;</span></span></code></pre></div>
</div>
<div id="session-information-5" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Session information</h2>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="environments.html#cb27-1" aria-hidden="true" tabindex="-1"></a>sessioninfo<span class="sc">::</span><span class="fu">session_info</span>(<span class="at">include_base =</span> <span class="cn">TRUE</span>)</span>
<span id="cb27-2"><a href="environments.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - Session info -------------------------------------------</span></span>
<span id="cb27-3"><a href="environments.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  setting  value</span></span>
<span id="cb27-4"><a href="environments.html#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  version  R version 4.1.3 (2022-03-10)</span></span>
<span id="cb27-5"><a href="environments.html#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  os       Windows 10 x64 (build 22000)</span></span>
<span id="cb27-6"><a href="environments.html#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  system   x86_64, mingw32</span></span>
<span id="cb27-7"><a href="environments.html#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  ui       RTerm</span></span>
<span id="cb27-8"><a href="environments.html#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  language (EN)</span></span>
<span id="cb27-9"><a href="environments.html#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  collate  English_United Kingdom.1252</span></span>
<span id="cb27-10"><a href="environments.html#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  ctype    English_United Kingdom.1252</span></span>
<span id="cb27-11"><a href="environments.html#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  tz       Europe/Berlin</span></span>
<span id="cb27-12"><a href="environments.html#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  date     2022-08-21</span></span>
<span id="cb27-13"><a href="environments.html#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  pandoc   2.19 @ C:/PROGRA~1/Pandoc/ (via rmarkdown)</span></span>
<span id="cb27-14"><a href="environments.html#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb27-15"><a href="environments.html#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - Packages -----------------------------------------------</span></span>
<span id="cb27-16"><a href="environments.html#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  ! package     * version    date (UTC) lib source</span></span>
<span id="cb27-17"><a href="environments.html#cb27-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    assertthat    0.2.1      2019-03-21 [1] CRAN (R 4.1.1)</span></span>
<span id="cb27-18"><a href="environments.html#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    base        * 4.1.3      2022-03-10 [?] local</span></span>
<span id="cb27-19"><a href="environments.html#cb27-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    bookdown      0.28       2022-08-09 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-20"><a href="environments.html#cb27-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    bslib         0.4.0      2022-07-16 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-21"><a href="environments.html#cb27-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    cachem        1.0.6      2021-08-19 [1] CRAN (R 4.1.1)</span></span>
<span id="cb27-22"><a href="environments.html#cb27-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    cli           3.3.0      2022-04-25 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-23"><a href="environments.html#cb27-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P compiler      4.1.3      2022-03-10 [2] local</span></span>
<span id="cb27-24"><a href="environments.html#cb27-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    crayon        1.5.1      2022-03-26 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-25"><a href="environments.html#cb27-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P datasets    * 4.1.3      2022-03-10 [2] local</span></span>
<span id="cb27-26"><a href="environments.html#cb27-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    DBI           1.1.3      2022-06-18 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-27"><a href="environments.html#cb27-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    digest        0.6.29     2021-12-01 [1] CRAN (R 4.1.2)</span></span>
<span id="cb27-28"><a href="environments.html#cb27-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    downlit       0.4.2      2022-07-05 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-29"><a href="environments.html#cb27-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    dplyr         1.0.9      2022-04-28 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-30"><a href="environments.html#cb27-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    evaluate      0.16       2022-08-09 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-31"><a href="environments.html#cb27-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fansi         1.0.3      2022-03-24 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-32"><a href="environments.html#cb27-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fastmap       1.1.0      2021-01-25 [1] CRAN (R 4.1.1)</span></span>
<span id="cb27-33"><a href="environments.html#cb27-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fs            1.5.2      2021-12-08 [1] CRAN (R 4.1.2)</span></span>
<span id="cb27-34"><a href="environments.html#cb27-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    generics      0.1.3      2022-07-05 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-35"><a href="environments.html#cb27-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    glue          1.6.2      2022-02-24 [1] CRAN (R 4.1.2)</span></span>
<span id="cb27-36"><a href="environments.html#cb27-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P graphics    * 4.1.3      2022-03-10 [2] local</span></span>
<span id="cb27-37"><a href="environments.html#cb27-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P grDevices   * 4.1.3      2022-03-10 [2] local</span></span>
<span id="cb27-38"><a href="environments.html#cb27-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    highr         0.9        2021-04-16 [1] CRAN (R 4.1.1)</span></span>
<span id="cb27-39"><a href="environments.html#cb27-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    htmltools     0.5.3      2022-07-18 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-40"><a href="environments.html#cb27-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    jquerylib     0.1.4      2021-04-26 [1] CRAN (R 4.1.1)</span></span>
<span id="cb27-41"><a href="environments.html#cb27-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    jsonlite      1.8.0      2022-02-22 [1] CRAN (R 4.1.2)</span></span>
<span id="cb27-42"><a href="environments.html#cb27-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    knitr         1.39.9     2022-08-18 [1] Github (yihui/knitr@9e36e9c)</span></span>
<span id="cb27-43"><a href="environments.html#cb27-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    lifecycle     1.0.1      2021-09-24 [1] CRAN (R 4.1.1)</span></span>
<span id="cb27-44"><a href="environments.html#cb27-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    lobstr        1.1.2      2022-06-22 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-45"><a href="environments.html#cb27-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    magrittr    * 2.0.3      2022-03-30 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-46"><a href="environments.html#cb27-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    memoise       2.0.1      2021-11-26 [1] CRAN (R 4.1.2)</span></span>
<span id="cb27-47"><a href="environments.html#cb27-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P methods     * 4.1.3      2022-03-10 [2] local</span></span>
<span id="cb27-48"><a href="environments.html#cb27-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    pillar        1.8.1      2022-08-19 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-49"><a href="environments.html#cb27-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    pkgconfig     2.0.3      2019-09-22 [1] CRAN (R 4.1.1)</span></span>
<span id="cb27-50"><a href="environments.html#cb27-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    png           0.1-7      2013-12-03 [1] CRAN (R 4.1.0)</span></span>
<span id="cb27-51"><a href="environments.html#cb27-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    purrr         0.3.4      2020-04-17 [1] CRAN (R 4.1.1)</span></span>
<span id="cb27-52"><a href="environments.html#cb27-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    R6            2.5.1.9000 2022-08-04 [1] Github (r-lib/R6@87d5e45)</span></span>
<span id="cb27-53"><a href="environments.html#cb27-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    rlang       * 1.0.4      2022-07-12 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-54"><a href="environments.html#cb27-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    rmarkdown     2.15.1     2022-08-18 [1] Github (rstudio/rmarkdown@b86f18b)</span></span>
<span id="cb27-55"><a href="environments.html#cb27-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    rstudioapi    0.13       2020-11-12 [1] CRAN (R 4.1.1)</span></span>
<span id="cb27-56"><a href="environments.html#cb27-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    sass          0.4.2      2022-07-16 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-57"><a href="environments.html#cb27-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    sessioninfo   1.2.2      2021-12-06 [1] CRAN (R 4.1.2)</span></span>
<span id="cb27-58"><a href="environments.html#cb27-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P stats       * 4.1.3      2022-03-10 [2] local</span></span>
<span id="cb27-59"><a href="environments.html#cb27-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    stringi       1.7.8      2022-07-11 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-60"><a href="environments.html#cb27-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    stringr       1.4.1      2022-08-20 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-61"><a href="environments.html#cb27-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    tibble        3.1.8      2022-07-22 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-62"><a href="environments.html#cb27-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    tidyselect    1.1.2      2022-02-21 [1] CRAN (R 4.1.2)</span></span>
<span id="cb27-63"><a href="environments.html#cb27-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P tools         4.1.3      2022-03-10 [2] local</span></span>
<span id="cb27-64"><a href="environments.html#cb27-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    utf8          1.2.2      2021-07-24 [1] CRAN (R 4.1.1)</span></span>
<span id="cb27-65"><a href="environments.html#cb27-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P utils       * 4.1.3      2022-03-10 [2] local</span></span>
<span id="cb27-66"><a href="environments.html#cb27-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    vctrs         0.4.1      2022-04-13 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-67"><a href="environments.html#cb27-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    winch         0.0.8      2022-03-17 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-68"><a href="environments.html#cb27-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    withr         2.5.0      2022-03-03 [1] CRAN (R 4.1.2)</span></span>
<span id="cb27-69"><a href="environments.html#cb27-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    xfun          0.32       2022-08-10 [1] CRAN (R 4.1.3)</span></span>
<span id="cb27-70"><a href="environments.html#cb27-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    xml2          1.3.3      2021-11-30 [1] CRAN (R 4.1.2)</span></span>
<span id="cb27-71"><a href="environments.html#cb27-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    yaml          2.3.5      2022-02-21 [1] CRAN (R 4.1.2)</span></span>
<span id="cb27-72"><a href="environments.html#cb27-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb27-73"><a href="environments.html#cb27-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] C:/Users/IndrajeetPatil/Documents/R/win-library/4.1</span></span>
<span id="cb27-74"><a href="environments.html#cb27-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2] C:/Program Files/R/R-4.1.3/library</span></span>
<span id="cb27-75"><a href="environments.html#cb27-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb27-76"><a href="environments.html#cb27-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P -- Loaded and on-disk path mismatch.</span></span>
<span id="cb27-77"><a href="environments.html#cb27-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb27-78"><a href="environments.html#cb27-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ----------------------------------------------------------</span></span></code></pre></div>

</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Advanced R Exercises</strong>" was written by <a class="text-light" href="https://sites.google.com/site/indrajeetspatilmorality/">Indrajeet Patil</a>. It was last built on 2022-08-20.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


</body>

</html>
