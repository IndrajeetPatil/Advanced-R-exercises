<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 6 Functions | Advanced R Exercises</title>
<meta name="author" content="Indrajeet Patil">
<meta name="description" content='Attaching the needed libraries: library(tidyverse, warn.conflicts = FALSE)  6.1 Function fundamentals (Exercises 6.2.5) Q1. Given a name, like "mean", match.fun() lets you find a function. Given a...'>
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="Chapter 6 Functions | Advanced R Exercises">
<meta property="og:type" content="book">
<meta property="og:image" content="/cover.png">
<meta property="og:description" content='Attaching the needed libraries: library(tidyverse, warn.conflicts = FALSE)  6.1 Function fundamentals (Exercises 6.2.5) Q1. Given a name, like "mean", match.fun() lets you find a function. Given a...'>
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 6 Functions | Advanced R Exercises">
<meta name="twitter:description" content='Attaching the needed libraries: library(tidyverse, warn.conflicts = FALSE)  6.1 Function fundamentals (Exercises 6.2.5) Q1. Given a name, like "mean", match.fun() lets you find a function. Given a...'>
<meta name="twitter:image" content="/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Roboto-0.4.2/font.css" rel="stylesheet">
<link href="libs/JetBrains_Mono-0.4.2/font.css" rel="stylesheet">
<link href="libs/Roboto_Slab-0.4.2/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.4.0.9000/transition.js"></script><script src="libs/bs3compat-0.4.0.9000/tabs.js"></script><script src="libs/bs3compat-0.4.0.9000/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Advanced R Exercises</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">About</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="names-and-values.html"><span class="header-section-number">2</span> Names and values</a></li>
<li><a class="" href="vectors.html"><span class="header-section-number">3</span> Vectors</a></li>
<li><a class="" href="subsetting.html"><span class="header-section-number">4</span> Subsetting</a></li>
<li><a class="" href="control-flow.html"><span class="header-section-number">5</span> Control flow</a></li>
<li><a class="active" href="functions.html"><span class="header-section-number">6</span> Functions</a></li>
<li><a class="" href="environments.html"><span class="header-section-number">7</span> Environments</a></li>
<li><a class="" href="conditions.html"><span class="header-section-number">8</span> Conditions</a></li>
<li><a class="" href="functionals.html"><span class="header-section-number">9</span> Functionals</a></li>
<li><a class="" href="function-factories.html"><span class="header-section-number">10</span> Function factories</a></li>
<li><a class="" href="function-operators.html"><span class="header-section-number">11</span> Function operators</a></li>
<li><a class="" href="base-types.html"><span class="header-section-number">12</span> Base Types</a></li>
<li><a class="" href="s3.html"><span class="header-section-number">13</span> S3</a></li>
<li><a class="" href="r6.html"><span class="header-section-number">14</span> R6</a></li>
<li><a class="" href="s4.html"><span class="header-section-number">15</span> S4</a></li>
<li><a class="" href="trade-offs.html"><span class="header-section-number">16</span> Trade-offs</a></li>
<li><a class="" href="big-picture.html"><span class="header-section-number">17</span> Big Picture</a></li>
<li><a class="" href="expressions.html"><span class="header-section-number">18</span> Expressions</a></li>
<li><a class="" href="quasiquotation.html"><span class="header-section-number">19</span> Quasiquotation</a></li>
<li><a class="" href="evaluation.html"><span class="header-section-number">20</span> Evaluation</a></li>
<li><a class="" href="translation.html"><span class="header-section-number">21</span> Translation</a></li>
<li><a class="" href="debugging.html"><span class="header-section-number">22</span> Debugging</a></li>
<li><a class="" href="measuring-performance.html"><span class="header-section-number">23</span> Measuring performance</a></li>
<li><a class="" href="improving-performance.html"><span class="header-section-number">24</span> Improving performance</a></li>
<li><a class="" href="rewriting-r-code-in-c.html"><span class="header-section-number">25</span> Rewriting R code in C++</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/IndrajeetPatil/Advanced-R-exercises">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="functions" class="section level1" number="6">
<h1>
<span class="header-section-number">6</span> Functions<a class="anchor" aria-label="anchor" href="#functions"><i class="fas fa-link"></i></a>
</h1>
<p>Attaching the needed libraries:</p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div id="function-fundamentals-exercises-6.2.5" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> Function fundamentals (Exercises 6.2.5)<a class="anchor" aria-label="anchor" href="#function-fundamentals-exercises-6.2.5"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Q1.</strong> Given a name, like <code>"mean"</code>, <code><a href="https://rdrr.io/r/base/match.fun.html">match.fun()</a></code> lets you find a function. Given a function, can you find its name? Why doesn’t that make sense in R?</p>
<p><strong>A1.</strong> Given a name, <code><a href="https://rdrr.io/r/base/match.fun.html">match.fun()</a></code> lets you find a function.</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/match.fun.html">match.fun</a></span><span class="op">(</span><span class="st">"mean"</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (x, ...) </span></span>
<span><span class="co">#&gt; UseMethod("mean")</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x1123e3898&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: namespace:base&gt;</span></span></code></pre></div>
<p>But, given a function, it doesn’t make sense to find its name because there can be multiple names bound to the same function.</p>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="va">f1</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/match.fun.html">match.fun</a></span><span class="op">(</span><span class="st">"f1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; function(x) mean(x)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/match.fun.html">match.fun</a></span><span class="op">(</span><span class="st">"f2"</span><span class="op">)</span></span>
<span><span class="co">#&gt; function(x) mean(x)</span></span></code></pre></div>
<p><strong>Q2.</strong> It’s possible (although typically not useful) to call an anonymous function. Which of the two approaches below is correct? Why?</p>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">3</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; function(x) 3()</span></span>
<span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">3</span><span class="op">)</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<p><strong>A2.</strong> The first expression is not correct since the function will evaluate <code>3()</code>, which is syntactically not allowed since literals can’t be treated like functions.</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">3</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">f</span></span>
<span><span class="co">#&gt; function(x) 3()</span></span>
<span><span class="fu">f</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in f(): attempt to apply non-function</span></span>
<span></span>
<span><span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_expression.html">is_syntactic_literal</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>This is the correct way to call an anonymous function.</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">g</span></span>
<span><span class="co">#&gt; function(x) 3</span></span>
<span><span class="fu">g</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<p><strong>Q3.</strong> A good rule of thumb is that an anonymous function should fit on one line and shouldn’t need to use <code><a href="https://rdrr.io/r/base/Paren.html">{}</a></code>. Review your code. Where could you have used an anonymous function instead of a named function? Where should you have used a named function instead of an anonymous function?</p>
<p><strong>A3.</strong> Self activity.</p>
<p><strong>Q4.</strong> What function allows you to tell if an object is a function? What function allows you to tell if a function is a primitive function?</p>
<p><strong>A4.</strong> Use <code><a href="https://rdrr.io/r/base/is.function.html">is.function()</a></code> to check if an <em>object</em> is a <em>function</em>:</p>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># these are functions</span></span>
<span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/is.function.html">is.function</a></span><span class="op">(</span><span class="va">mean</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/is.function.html">is.function</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># these aren't</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/is.function.html">is.function</a></span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/is.function.html">is.function</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/environment.html">new.env</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>Use <code><a href="https://rdrr.io/r/base/is.function.html">is.primitive()</a></code> to check if a <em>function</em> is <em>primitive</em>:</p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># primitive</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/is.function.html">is.primitive</a></span><span class="op">(</span><span class="va">sum</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/is.function.html">is.primitive</a></span><span class="op">(</span><span class="va">`+`</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># not primitive</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/is.function.html">is.primitive</a></span><span class="op">(</span><span class="va">mean</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/is.function.html">is.primitive</a></span><span class="op">(</span><span class="va">read.csv</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p><strong>Q5.</strong> This code makes a list of all functions in the base package.</p>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">objs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html">mget</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="st">"package:base"</span>, all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, inherits <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">funs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/funprog.html">Filter</a></span><span class="op">(</span><span class="va">is.function</span>, <span class="va">objs</span><span class="op">)</span></span></code></pre></div>
<p>Use it to answer the following questions:</p>
<ol style="list-style-type: lower-alpha">
<li><p>Which base function has the most arguments?</p></li>
<li><p>How many base functions have no arguments? What’s special about those functions?</p></li>
<li><p>How could you adapt the code to find all primitive functions?</p></li>
</ol>
<p><strong>A5.</strong> The provided code is the following:</p>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">objs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html">mget</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="st">"package:base"</span>, all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, inherits <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">funs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/funprog.html">Filter</a></span><span class="op">(</span><span class="va">is.function</span>, <span class="va">objs</span><span class="op">)</span></span></code></pre></div>
<ol style="list-style-type: lower-alpha">
<li>Which base function has the most arguments?</li>
</ol>
<p>We can use <code><a href="https://rdrr.io/r/base/formals.html">formals()</a></code> to extract number of arguments, but because this function returns <code>NULL</code> for primitive functions.</p>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/formals.html">formals</a></span><span class="op">(</span><span class="st">"!"</span><span class="op">)</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/formals.html">formals</a></span><span class="op">(</span><span class="st">"!"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0</span></span></code></pre></div>
<p>Therefore, we will focus only on non-primitive functions.</p>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">funs</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/keep.html">discard</a></span><span class="op">(</span><span class="va">funs</span>, <span class="va">is.primitive</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="https://rdrr.io/r/base/scan.html">scan()</a></code> function has the most arguments.</p>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_formals</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_df</a></span><span class="op">(</span><span class="va">funs</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/formals.html">formals</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"function"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"argumentCount"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">argumentCount</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_formals</span></span>
<span><span class="co">#&gt; # A tibble: 1,125 × 2</span></span>
<span><span class="co">#&gt;    `function`       argumentCount</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                    &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 scan                        22</span></span>
<span><span class="co">#&gt;  2 format.default              16</span></span>
<span><span class="co">#&gt;  3 source                      16</span></span>
<span><span class="co">#&gt;  4 formatC                     15</span></span>
<span><span class="co">#&gt;  5 library                     13</span></span>
<span><span class="co">#&gt;  6 merge.data.frame            13</span></span>
<span><span class="co">#&gt;  7 prettyNum                   13</span></span>
<span><span class="co">#&gt;  8 system2                     11</span></span>
<span><span class="co">#&gt;  9 print.default               10</span></span>
<span><span class="co">#&gt; 10 save                        10</span></span>
<span><span class="co">#&gt; # … with 1,115 more rows</span></span></code></pre></div>
<ol start="2" style="list-style-type: lower-alpha">
<li>How many base functions have no arguments? What’s special about those functions?</li>
</ol>
<p>At the time of writing, 47 base (non-primitive) functions have no arguments.</p>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">df_formals</span>, <span class="va">argumentCount</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 47 × 2</span></span>
<span><span class="co">#&gt;    `function`               argumentCount</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                            &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 .First.sys                           0</span></span>
<span><span class="co">#&gt;  2 .NotYetImplemented                   0</span></span>
<span><span class="co">#&gt;  3 .OptRequireMethods                   0</span></span>
<span><span class="co">#&gt;  4 .standard_regexps                    0</span></span>
<span><span class="co">#&gt;  5 .tryResumeInterrupt                  0</span></span>
<span><span class="co">#&gt;  6 closeAllConnections                  0</span></span>
<span><span class="co">#&gt;  7 contributors                         0</span></span>
<span><span class="co">#&gt;  8 Cstack_info                          0</span></span>
<span><span class="co">#&gt;  9 date                                 0</span></span>
<span><span class="co">#&gt; 10 default.stringsAsFactors             0</span></span>
<span><span class="co">#&gt; # … with 37 more rows</span></span></code></pre></div>
<ol start="3" style="list-style-type: lower-alpha">
<li>How could you adapt the code to find all primitive functions?</li>
</ol>
<div class="sourceCode" id="cb131"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">objs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html">mget</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="st">"package:base"</span>, all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, inherits <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">funs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/funprog.html">Filter</a></span><span class="op">(</span><span class="va">is.function</span>, <span class="va">objs</span><span class="op">)</span></span>
<span><span class="va">primitives</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/funprog.html">Filter</a></span><span class="op">(</span><span class="va">is.primitive</span>, <span class="va">funs</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">primitives</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 204</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">primitives</span><span class="op">)</span></span>
<span><span class="co">#&gt;   [1] "-"                    ":"                   </span></span>
<span><span class="co">#&gt;   [3] "::"                   ":::"                 </span></span>
<span><span class="co">#&gt;   [5] "!"                    "!="                  </span></span>
<span><span class="co">#&gt;   [7] "...elt"               "...length"           </span></span>
<span><span class="co">#&gt;   [9] "...names"             ".C"                  </span></span>
<span><span class="co">#&gt;  [11] ".cache_class"         ".Call"               </span></span>
<span><span class="co">#&gt;  [13] ".Call.graphics"       ".class2"             </span></span>
<span><span class="co">#&gt;  [15] ".External"            ".External.graphics"  </span></span>
<span><span class="co">#&gt;  [17] ".External2"           ".Fortran"            </span></span>
<span><span class="co">#&gt;  [19] ".Internal"            ".isMethodsDispatchOn"</span></span>
<span><span class="co">#&gt;  [21] ".Primitive"           ".primTrace"          </span></span>
<span><span class="co">#&gt;  [23] ".primUntrace"         ".subset"             </span></span>
<span><span class="co">#&gt;  [25] ".subset2"             "("                   </span></span>
<span><span class="co">#&gt;  [27] "["                    "[["                  </span></span>
<span><span class="co">#&gt;  [29] "[[&lt;-"                 "[&lt;-"                 </span></span>
<span><span class="co">#&gt;  [31] "{"                    "@"                   </span></span>
<span><span class="co">#&gt;  [33] "@&lt;-"                  "*"                   </span></span>
<span><span class="co">#&gt;  [35] "/"                    "&amp;"                   </span></span>
<span><span class="co">#&gt;  [37] "&amp;&amp;"                   "%*%"                 </span></span>
<span><span class="co">#&gt;  [39] "%/%"                  "%%"                  </span></span>
<span><span class="co">#&gt;  [41] "^"                    "+"                   </span></span>
<span><span class="co">#&gt;  [43] "&lt;"                    "&lt;-"                  </span></span>
<span><span class="co">#&gt;  [45] "&lt;&lt;-"                  "&lt;="                  </span></span>
<span><span class="co">#&gt;  [47] "="                    "=="                  </span></span>
<span><span class="co">#&gt;  [49] "&gt;"                    "&gt;="                  </span></span>
<span><span class="co">#&gt;  [51] "|"                    "||"                  </span></span>
<span><span class="co">#&gt;  [53] "~"                    "$"                   </span></span>
<span><span class="co">#&gt;  [55] "$&lt;-"                  "abs"                 </span></span>
<span><span class="co">#&gt;  [57] "acos"                 "acosh"               </span></span>
<span><span class="co">#&gt;  [59] "all"                  "any"                 </span></span>
<span><span class="co">#&gt;  [61] "anyNA"                "Arg"                 </span></span>
<span><span class="co">#&gt;  [63] "as.call"              "as.character"        </span></span>
<span><span class="co">#&gt;  [65] "as.complex"           "as.double"           </span></span>
<span><span class="co">#&gt;  [67] "as.environment"       "as.integer"          </span></span>
<span><span class="co">#&gt;  [69] "as.logical"           "as.numeric"          </span></span>
<span><span class="co">#&gt;  [71] "as.raw"               "asin"                </span></span>
<span><span class="co">#&gt;  [73] "asinh"                "atan"                </span></span>
<span><span class="co">#&gt;  [75] "atanh"                "attr"                </span></span>
<span><span class="co">#&gt;  [77] "attr&lt;-"               "attributes"          </span></span>
<span><span class="co">#&gt;  [79] "attributes&lt;-"         "baseenv"             </span></span>
<span><span class="co">#&gt;  [81] "break"                "browser"             </span></span>
<span><span class="co">#&gt;  [83] "c"                    "call"                </span></span>
<span><span class="co">#&gt;  [85] "ceiling"              "class"               </span></span>
<span><span class="co">#&gt;  [87] "class&lt;-"              "Conj"                </span></span>
<span><span class="co">#&gt;  [89] "cos"                  "cosh"                </span></span>
<span><span class="co">#&gt;  [91] "cospi"                "cummax"              </span></span>
<span><span class="co">#&gt;  [93] "cummin"               "cumprod"             </span></span>
<span><span class="co">#&gt;  [95] "cumsum"               "digamma"             </span></span>
<span><span class="co">#&gt;  [97] "dim"                  "dim&lt;-"               </span></span>
<span><span class="co">#&gt;  [99] "dimnames"             "dimnames&lt;-"          </span></span>
<span><span class="co">#&gt; [101] "emptyenv"             "enc2native"          </span></span>
<span><span class="co">#&gt; [103] "enc2utf8"             "environment&lt;-"       </span></span>
<span><span class="co">#&gt; [105] "exp"                  "expm1"               </span></span>
<span><span class="co">#&gt; [107] "expression"           "floor"               </span></span>
<span><span class="co">#&gt; [109] "for"                  "forceAndCall"        </span></span>
<span><span class="co">#&gt; [111] "function"             "gamma"               </span></span>
<span><span class="co">#&gt; [113] "gc.time"              "globalenv"           </span></span>
<span><span class="co">#&gt; [115] "if"                   "Im"                  </span></span>
<span><span class="co">#&gt; [117] "interactive"          "invisible"           </span></span>
<span><span class="co">#&gt; [119] "is.array"             "is.atomic"           </span></span>
<span><span class="co">#&gt; [121] "is.call"              "is.character"        </span></span>
<span><span class="co">#&gt; [123] "is.complex"           "is.double"           </span></span>
<span><span class="co">#&gt; [125] "is.environment"       "is.expression"       </span></span>
<span><span class="co">#&gt; [127] "is.finite"            "is.function"         </span></span>
<span><span class="co">#&gt; [129] "is.infinite"          "is.integer"          </span></span>
<span><span class="co">#&gt; [131] "is.language"          "is.list"             </span></span>
<span><span class="co">#&gt; [133] "is.logical"           "is.matrix"           </span></span>
<span><span class="co">#&gt; [135] "is.na"                "is.name"             </span></span>
<span><span class="co">#&gt; [137] "is.nan"               "is.null"             </span></span>
<span><span class="co">#&gt; [139] "is.numeric"           "is.object"           </span></span>
<span><span class="co">#&gt; [141] "is.pairlist"          "is.raw"              </span></span>
<span><span class="co">#&gt; [143] "is.recursive"         "is.single"           </span></span>
<span><span class="co">#&gt; [145] "is.symbol"            "isS4"                </span></span>
<span><span class="co">#&gt; [147] "lazyLoadDBfetch"      "length"              </span></span>
<span><span class="co">#&gt; [149] "length&lt;-"             "levels&lt;-"            </span></span>
<span><span class="co">#&gt; [151] "lgamma"               "list"                </span></span>
<span><span class="co">#&gt; [153] "log"                  "log10"               </span></span>
<span><span class="co">#&gt; [155] "log1p"                "log2"                </span></span>
<span><span class="co">#&gt; [157] "max"                  "min"                 </span></span>
<span><span class="co">#&gt; [159] "missing"              "Mod"                 </span></span>
<span><span class="co">#&gt; [161] "names"                "names&lt;-"             </span></span>
<span><span class="co">#&gt; [163] "nargs"                "next"                </span></span>
<span><span class="co">#&gt; [165] "nzchar"               "oldClass"            </span></span>
<span><span class="co">#&gt; [167] "oldClass&lt;-"           "on.exit"             </span></span>
<span><span class="co">#&gt; [169] "pos.to.env"           "proc.time"           </span></span>
<span><span class="co">#&gt; [171] "prod"                 "quote"               </span></span>
<span><span class="co">#&gt; [173] "range"                "Re"                  </span></span>
<span><span class="co">#&gt; [175] "rep"                  "repeat"              </span></span>
<span><span class="co">#&gt; [177] "retracemem"           "return"              </span></span>
<span><span class="co">#&gt; [179] "round"                "seq_along"           </span></span>
<span><span class="co">#&gt; [181] "seq_len"              "seq.int"             </span></span>
<span><span class="co">#&gt; [183] "sign"                 "signif"              </span></span>
<span><span class="co">#&gt; [185] "sin"                  "sinh"                </span></span>
<span><span class="co">#&gt; [187] "sinpi"                "sqrt"                </span></span>
<span><span class="co">#&gt; [189] "standardGeneric"      "storage.mode&lt;-"      </span></span>
<span><span class="co">#&gt; [191] "substitute"           "sum"                 </span></span>
<span><span class="co">#&gt; [193] "switch"               "tan"                 </span></span>
<span><span class="co">#&gt; [195] "tanh"                 "tanpi"               </span></span>
<span><span class="co">#&gt; [197] "tracemem"             "trigamma"            </span></span>
<span><span class="co">#&gt; [199] "trunc"                "unclass"             </span></span>
<span><span class="co">#&gt; [201] "untracemem"           "UseMethod"           </span></span>
<span><span class="co">#&gt; [203] "while"                "xtfrm"</span></span></code></pre></div>
<p><strong>Q6.</strong> What are the three important components of a function?</p>
<p><strong>A6.</strong> Except for primitive functions, all functions have 3 important components:</p>
<ul>
<li><code><a href="https://rdrr.io/r/base/formals.html">formals()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/body.html">body()</a></code></li>
<li><code><a href="https://rdrr.io/r/base/environment.html">environment()</a></code></li>
</ul>
<p><strong>Q7.</strong> When does printing a function not show the environment it was created in?</p>
<p><strong>A7.</strong> All package functions print their environment:</p>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># base</span></span>
<span><span class="va">mean</span></span>
<span><span class="co">#&gt; function (x, ...) </span></span>
<span><span class="co">#&gt; UseMethod("mean")</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x1123e3898&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: namespace:base&gt;</span></span>
<span></span>
<span><span class="co"># other package function</span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="va"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span></span>
<span><span class="co">#&gt; function (.x, .f, ...) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     .f &lt;- as_mapper(.f, ...)</span></span>
<span><span class="co">#&gt;     .Call(map_impl, environment(), ".x", ".f", "list")</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x1228f52a8&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: namespace:purrr&gt;</span></span></code></pre></div>
<p>There are two exceptions where the enclosing environment won’t be printed:</p>
<ul>
<li>primitive functions</li>
</ul>
<div class="sourceCode" id="cb133"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sum</span></span>
<span><span class="co">#&gt; function (..., na.rm = FALSE)  .Primitive("sum")</span></span></code></pre></div>
<ul>
<li>functions created in the global environment</li>
</ul>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">f</span></span>
<span><span class="co">#&gt; function(x) mean(x)</span></span></code></pre></div>
</div>
<div id="lexical-scoping-exercises-6.4.5" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> Lexical scoping (Exercises 6.4.5)<a class="anchor" aria-label="anchor" href="#lexical-scoping-exercises-6.4.5"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Q1.</strong> What does the following code return? Why? Describe how each of the three <code>c</code>’s is interpreted.</p>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>c <span class="op">=</span> <span class="va">c</span><span class="op">)</span></span></code></pre></div>
<p><strong>A1.</strong> In <code>c(c = c)</code>:</p>
<ul>
<li>first <em>c</em> is interpreted as a function call <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>
</li>
<li>second <em>c</em> as a name for the vector element</li>
<li>third <em>c</em> as a variable with value <code>10</code>
</li>
</ul>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>c <span class="op">=</span> <span class="va">c</span><span class="op">)</span></span>
<span><span class="co">#&gt;  c </span></span>
<span><span class="co">#&gt; 10</span></span></code></pre></div>
<p>You can also see this in the lexical analysis of this expression:</p>
<div class="sourceCode" id="cb137"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_expr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/parse.html">parse</a></span><span class="op">(</span>text <span class="op">=</span> <span class="st">"c(c = c)"</span>, keep.source <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/getParseData.html">getParseData</a></span><span class="op">(</span><span class="va">p_expr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">token</span>, <span class="va">text</span><span class="op">)</span></span>
<span><span class="co">#&gt;                   token text</span></span>
<span><span class="co">#&gt; 12                 expr     </span></span>
<span><span class="co">#&gt; 1  SYMBOL_FUNCTION_CALL    c</span></span>
<span><span class="co">#&gt; 3                  expr     </span></span>
<span><span class="co">#&gt; 2                   '('    (</span></span>
<span><span class="co">#&gt; 4            SYMBOL_SUB    c</span></span>
<span><span class="co">#&gt; 5                EQ_SUB    =</span></span>
<span><span class="co">#&gt; 6                SYMBOL    c</span></span>
<span><span class="co">#&gt; 8                  expr     </span></span>
<span><span class="co">#&gt; 7                   ')'    )</span></span></code></pre></div>
<p><strong>Q2.</strong> What are the four principles that govern how R looks for values?</p>
<p><strong>A2.</strong> Principles that govern how R looks for values:</p>
<ol style="list-style-type: decimal">
<li><p>Name masking (names defined inside a function mask names defined outside a function)</p></li>
<li><p>Functions vs. variables (the rule above also applies to function names)</p></li>
<li><p>A fresh start (every time a function is called, a new environment is created to host its execution)</p></li>
<li><p>Dynamic look-up (R looks for values when the function is run, not when the function is created)</p></li>
</ol>
<p><strong>Q3.</strong> What does the following function return? Make a prediction before running the code yourself.</p>
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">x</span><span class="op">^</span><span class="fl">2</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="fu">f</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu">f</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">*</span> <span class="fl">2</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">f</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p><strong>A3.</strong> Correctly predicted 😉</p>
<div class="sourceCode" id="cb139"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">x</span><span class="op">^</span><span class="fl">2</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="fu">f</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu">f</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">*</span> <span class="fl">2</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">f</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 202</span></span></code></pre></div>
<p>Although there are multiple <code>f()</code> functions, the order of evaluation goes from inside to outside with <code>x^2</code> evaluated first and <code>f(x) * 2</code> evaluated last. This results in 202 (= <code>((10 ^ 2) + 1) * 2</code>).</p>
</div>
<div id="lazy-evaluation-exercises-6.5.4" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> Lazy evaluation (Exercises 6.5.4)<a class="anchor" aria-label="anchor" href="#lazy-evaluation-exercises-6.5.4"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Q1.</strong> What important property of <code>&amp;&amp;</code> makes <code>x_ok()</code> work?</p>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x_ok</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;&amp;</span> <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">x_ok</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="fu">x_ok</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu">x_ok</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p>What is different with this code? Why is this behaviour undesirable here?</p>
<div class="sourceCode" id="cb141"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x_ok</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">x_ok</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="fu">x_ok</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu">x_ok</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><strong>A1.</strong> <code>&amp;&amp;</code> evaluates left to right and has short-circuit evaluation, i.e., if the first operand is <code>TRUE</code>, R will short-circuit and not even look at the second operand.</p>
<div class="sourceCode" id="cb142"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x_ok</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;&amp;</span> <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">x_ok</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span></span>
<span><span class="fu">x_ok</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fu">x_ok</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>Replacing <code>&amp;&amp;</code> with <code>&amp;</code> is undesirable because it performs element-wise logical comparisons and returns a vector of values that is not always useful for a decision (<code>TRUE</code>, <code>FALSE</code>, or <code>NA</code>).</p>
<div class="sourceCode" id="cb143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x_ok</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">x_ok</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="co">#&gt; logical(0)</span></span>
<span></span>
<span><span class="fu">x_ok</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fu">x_ok</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE FALSE FALSE</span></span></code></pre></div>
<p><strong>Q2.</strong> What does this function return? Why? Which principle does it illustrate?</p>
<div class="sourceCode" id="cb144"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span> <span class="op">=</span> <span class="va">z</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">z</span> <span class="op">&lt;-</span> <span class="fl">100</span></span>
<span>  <span class="va">x</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">f2</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>A2.</strong> The function returns <code>100</code> due to lazy evaluation.</p>
<p>When function execution environment encounters <code>x</code>, it evaluates argument <code>x = z</code> and since the name <code>z</code> is already bound to the value 100 in this environment, <code>x</code> is also bound to the same value.</p>
<p>We can check this by looking at the memory addresses:</p>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span> <span class="op">=</span> <span class="va">z</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">z</span> <span class="op">&lt;-</span> <span class="fl">100</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu">lobstr</span><span class="fu">::</span><span class="fu"><a href="https://lobstr.r-lib.org/reference/obj_addr.html">obj_addrs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">z</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">x</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">f2</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "0x12045aaf0" "0x12045aaf0"</span></span>
<span><span class="co">#&gt; [1] 100</span></span></code></pre></div>
<p><strong>Q3.</strong> What does this function return? Why? Which principle does it illustrate?</p>
<div class="sourceCode" id="cb146"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span> <span class="op">=</span></span>
<span>                 <span class="op">{</span></span>
<span>                   <span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>                   <span class="fl">2</span></span>
<span>                 <span class="op">}</span>,</span>
<span>               <span class="va">y</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">f1</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">y</span></span></code></pre></div>
<p><strong>A3.</strong> Let’s first look at what the function returns:</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span> <span class="op">=</span></span>
<span>                 <span class="op">{</span></span>
<span>                   <span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>                   <span class="fl">2</span></span>
<span>                 <span class="op">}</span>,</span>
<span>               <span class="va">y</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">f1</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2 1</span></span>
<span><span class="va">y</span></span>
<span><span class="co">#&gt; [1] 10</span></span></code></pre></div>
<p>This is because of name masking. In the function call <code>c(x, y)</code>, when <code>x</code> is accessed in the function environment, the following promise is evaluated in the function environment:</p>
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="op">{</span></span>
<span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="fl">2</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>And, thus <code>y</code> gets assigned to <code>1</code>, and <code>x</code> to <code>2</code>, since its the last value in that scope.</p>
<p>Therefore, neither the promise <code>y = 0</code> nor global assignment <code>y &lt;- 10</code> is ever consulted to find the value for <code>y</code>.</p>
<p><strong>Q4.</strong> In <code><a href="https://rdrr.io/r/graphics/hist.html">hist()</a></code>, the default value of <code>xlim</code> is <code>range(breaks)</code>, the default value for <code>breaks</code> is <code>"Sturges"</code>, and</p>
<div class="sourceCode" id="cb149"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="st">"Sturges"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Sturges" "Sturges"</span></span></code></pre></div>
<p>Explain how <code><a href="https://rdrr.io/r/graphics/hist.html">hist()</a></code> works to get a correct <code>xlim</code> value.</p>
<p><strong>A4.</strong> The <code>xlim</code> defines the range of the histogram’s <code>x</code>-axis.</p>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">wt</span>, xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="Functions_files/figure-html/Functions-36-1.png" width="100%"></div>
<p>The default <code>xlim = range(breaks)</code> and <code>breaks = "Sturges"</code> arguments reveal that the function uses Sturges’ algorithm to compute the number of breaks.</p>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/grDevices/nclass.html">nclass.Sturges</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">wt</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6</span></span></code></pre></div>
<p>To see the implementation, run <code>sloop::s3_get_method("hist.default")</code>.</p>
<p><code><a href="https://rdrr.io/r/graphics/hist.html">hist()</a></code> ensures that the chosen algorithm returns a numeric vector containing at least two unique elements before <code>xlim</code> is computed.</p>
<p><strong>Q5.</strong> Explain why this function works. Why is it confusing?</p>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">show_time</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span> <span class="op">=</span> <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"Error!"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">stop</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">show_time</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2022-10-18 10:42:27 CEST"</span></span></code></pre></div>
<p><strong>A5.</strong> Let’s take this step-by-step.</p>
<p>The function argument <code>x</code> is missing in the function call. This means that <code>stop("Error!")</code> is evaluated in the function environment, and not global environment.</p>
<p>But, due to lazy evaluation, the promise <code>stop("Error!")</code> is evaluated only when <code>x</code> is accessed. This happens only when <code>print(x)</code> is called.</p>
<p><code>print(x)</code> leads to <code>x</code> being evaluated, which evaluates <code>stop</code> in the function environment. But, in function environment, the <code><a href="https://rdrr.io/r/base/stop.html">base::stop()</a></code> is masked by a locally defined <code><a href="https://rdrr.io/r/base/stop.html">stop()</a></code> function, which returns <code><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time()</a></code> output.</p>
<p><strong>Q6.</strong> How many arguments are required when calling <code><a href="https://rdrr.io/r/base/library.html">library()</a></code>?</p>
<p><strong>A6.</strong> Going solely by its signature,</p>
<div class="sourceCode" id="cb153"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/formals.html">formals</a></span><span class="op">(</span><span class="va">library</span><span class="op">)</span></span>
<span><span class="co">#&gt; $package</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $help</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $pos</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $lib.loc</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $character.only</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $logical.return</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $warn.conflicts</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $quietly</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $verbose</span></span>
<span><span class="co">#&gt; getOption("verbose")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $mask.ok</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $exclude</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $include.only</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $attach.required</span></span>
<span><span class="co">#&gt; missing(include.only)</span></span></code></pre></div>
<p>it looks like the following arguments are required:</p>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/formals.html">formals</a></span><span class="op">(</span><span class="va">library</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/keep.html">discard</a></span><span class="op">(</span><span class="va">is.null</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_lgl</a></span><span class="op">(</span><span class="op">~</span> <span class="va">.x</span> <span class="op">==</span> <span class="st">""</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/keep.html">keep</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html">isTRUE</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "package"        "help"           "warn.conflicts"</span></span>
<span><span class="co">#&gt; [4] "mask.ok"        "exclude"        "include.only"</span></span></code></pre></div>
<p>But, in reality, only one argument is required: <code>package</code>. The function internally checks if the other arguments are missing and adjusts accordingly.</p>
<p>It would have been better if there arguments were <code>NULL</code> instead of missing; that would avoid this confusion.</p>
</div>
<div id="dot-dot-dot-exercises-6.6.1" class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> <code>...</code> (dot-dot-dot) (Exercises 6.6.1)<a class="anchor" aria-label="anchor" href="#dot-dot-dot-exercises-6.6.1"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Q1.</strong> Explain the following results:</p>
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, na.omit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 7</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, na.omit <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<p><strong>A1.</strong> Let’s look at arguments for these functions:</p>
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">sum</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (..., na.rm = FALSE)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">mean</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (x, ...)</span></span></code></pre></div>
<p>As can be seen, <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> function doesn’t have <code>na.omit</code> argument. So, the input <code>na.omit = TRUE</code> is treated as <code>1</code> (logical implicitly coerced to numeric), and thus the results. So, the expression evaluates to <code>sum(1, 2, 3, 1)</code>.</p>
<p>For <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> function, there is only one parameter (<code>x</code>) and it’s matched by the first argument (<code>1</code>). So, the expression evaluates to <code>mean(1)</code>.</p>
<p><strong>Q2.</strong> Explain how to find the documentation for the named arguments in the following function call:</p>
<div class="sourceCode" id="cb157"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, col <span class="op">=</span> <span class="st">"red"</span>, pch <span class="op">=</span> <span class="fl">20</span>, xlab <span class="op">=</span> <span class="st">"x"</span>, col.lab <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="Functions_files/figure-html/Functions-43-1.png" width="100%"></div>
<p><strong>A2.</strong> Typing <code><a href="https://rdrr.io/r/graphics/plot.default.html">?plot</a></code> in the console, we see its documentation, which also shows its signature:</p>
<pre><code>#&gt; function (x, y, ...)</code></pre>
<p>Since <code>...</code> are passed to <code><a href="https://rdrr.io/r/graphics/par.html">par()</a></code>, we can look at <code><a href="https://rdrr.io/r/graphics/par.html">?par</a></code> docs:</p>
<pre><code>#&gt; function (..., no.readonly = FALSE)</code></pre>
<p>And so on.</p>
<p>The docs for all parameters of interest <a href="https://rdrr.io/r/graphics/par.html">reside there</a>.</p>
<p><strong>Q3.</strong> Why does <code>plot(1:10, col = "red")</code> only colour the points, not the axes or labels? Read the source code of <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot.default()</a></code> to find out.</p>
<p><strong>A3.</strong> Source code can be found <a href="https://github.com/wch/r-source/blob/79e73dba5259b25ec30118d45fea64aeac0f41dc/src/library/graphics/R/plot.R#L51-L84">here</a>.</p>
<p><code><a href="https://rdrr.io/r/graphics/plot.default.html">plot.default()</a></code> passes <code>...</code> to <code>localTitle()</code>, which passes it to <code><a href="https://rdrr.io/r/graphics/title.html">title()</a></code>.</p>
<p><code><a href="https://rdrr.io/r/graphics/title.html">title()</a></code> has four parts: <code>main</code>, <code>sub</code>, <code>xlab</code>, <code>ylab</code>.</p>
<p>So having a single argument <code>col</code> would not work as it will be ambiguous as to which element to apply this argument to.</p>
<div class="sourceCode" id="cb160"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">localTitle</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span>, <span class="va">col</span>, <span class="va">bg</span>, <span class="va">pch</span>, <span class="va">cex</span>, <span class="va">lty</span>, <span class="va">lwd</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/graphics/title.html">title</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="va">title</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">main</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">sub</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">xlab</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">ylab</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                  <span class="va">line</span> <span class="op">=</span> <span class="cn">NA</span>, <span class="va">outer</span> <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">main</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/as.graphicsAnnot.html">as.graphicsAnnot</a></span><span class="op">(</span><span class="va">main</span><span class="op">)</span></span>
<span>  <span class="va">sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/as.graphicsAnnot.html">as.graphicsAnnot</a></span><span class="op">(</span><span class="va">sub</span><span class="op">)</span></span>
<span>  <span class="va">xlab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/as.graphicsAnnot.html">as.graphicsAnnot</a></span><span class="op">(</span><span class="va">xlab</span><span class="op">)</span></span>
<span>  <span class="va">ylab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/as.graphicsAnnot.html">as.graphicsAnnot</a></span><span class="op">(</span><span class="va">ylab</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Foreign-internal.html">.External.graphics</a></span><span class="op">(</span><span class="va">C_title</span>, <span class="va">main</span>, <span class="va">sub</span>, <span class="va">xlab</span>, <span class="va">ylab</span>, <span class="va">line</span>, <span class="va">outer</span>, <span class="va">...</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div id="exiting-a-function-exercises-6.7.5" class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> Exiting a function (Exercises 6.7.5)<a class="anchor" aria-label="anchor" href="#exiting-a-function-exercises-6.7.5"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Q1.</strong> What does <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> return? Why don’t you normally see these values?</p>
<p><strong>A1.</strong> The <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> function reloads datasets that were saved using the <code><a href="https://rdrr.io/r/base/save.html">save()</a></code> function:</p>
<div class="sourceCode" id="cb161"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">iris</span>, file <span class="op">=</span> <span class="st">"my_iris.rda"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"my_iris.rda"</span><span class="op">)</span></span></code></pre></div>
<p>We normally don’t see any value because the function loads the datasets invisibly.</p>
<p>We can change this by setting <code>verbose = TRUE</code>:</p>
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"my_iris.rda"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading objects:</span></span>
<span><span class="co">#&gt;   iris</span></span>
<span></span>
<span><span class="co"># cleanup</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span><span class="st">"my_iris.rda"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Q2.</strong> What does <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code> return? What would be more useful?</p>
<p><strong>A2.</strong> The <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code> writes a data frame to a file and returns a <code>NULL</code> invisibly.</p>
<div class="sourceCode" id="cb163"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op">(</span><span class="va">BOD</span>, file <span class="op">=</span> <span class="st">"BOD.csv"</span><span class="op">)</span></span></code></pre></div>
<p>It would have been more helpful if the function invisibly returned the actual object being written to the file, which could then be further used.</p>
<div class="sourceCode" id="cb164"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># cleanup</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span><span class="op">(</span><span class="st">"BOD.csv"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Q3.</strong> How does the <code>chdir</code> parameter of <code><a href="https://rdrr.io/r/base/source.html">source()</a></code> compare to <code>with_dir()</code>? Why might you prefer one to the other?</p>
<p><strong>A3.</strong> The <code>chdir</code> parameter of <code><a href="https://rdrr.io/r/base/source.html">source()</a></code> is described as:</p>
<blockquote>
<p>if <code>TRUE</code> and <code>file</code> is a pathname, the <code>R</code> working directory is temporarily changed to the directory containing file for evaluating</p>
</blockquote>
<p>That is, <code>chdir</code> allows changing working directory temporarily but <em>only</em> to the directory containing file being sourced:</p>
<p>While <code><a href="https://withr.r-lib.org/reference/with_dir.html">withr::with_dir()</a></code> temporarily changes the current working directory:</p>
<div class="sourceCode" id="cb165"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">withr</span><span class="fu">::</span><span class="va"><a href="https://withr.r-lib.org/reference/with_dir.html">with_dir</a></span></span>
<span><span class="co">#&gt; function (new, code) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     old &lt;- setwd(dir = new)</span></span>
<span><span class="co">#&gt;     on.exit(setwd(old))</span></span>
<span><span class="co">#&gt;     force(code)</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x116f1b0d0&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: namespace:withr&gt;</span></span></code></pre></div>
<p>More importantly, its parameters <code>dir</code> allows temporarily changing working directory to <em>any</em> directory.</p>
<p><strong>Q4.</strong> Write a function that opens a graphics device, runs the supplied code, and closes the graphics device (always, regardless of whether or not the plotting code works).</p>
<p><strong>A4.</strong> Here is a function that opens a graphics device, runs the supplied code, and closes the graphics device:</p>
<div class="sourceCode" id="cb166"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">with_png_device</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">filename</span>, <span class="va">code</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">grDevices</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grDevices/png.html">png</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="va">filename</span>, <span class="va">...</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/on.exit.html">on.exit</a></span><span class="op">(</span><span class="fu">grDevices</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/force.html">force</a></span><span class="op">(</span><span class="va">code</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Q5.</strong> We can use <code><a href="https://rdrr.io/r/base/on.exit.html">on.exit()</a></code> to implement a simple version of <code><a href="https://rdrr.io/r/utils/capture.output.html">capture.output()</a></code>.</p>
<div class="sourceCode" id="cb167"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">capture.output2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">code</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/on.exit.html">on.exit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.remove</a></span><span class="op">(</span><span class="va">temp</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, after <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sink.html">sink</a></span><span class="op">(</span><span class="va">temp</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/on.exit.html">on.exit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sink.html">sink</a></span><span class="op">(</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, after <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/force.html">force</a></span><span class="op">(</span><span class="va">code</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span><span class="op">(</span><span class="va">temp</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">capture.output2</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "a" "b" "c"</span></span></code></pre></div>
<p>Compare <code><a href="https://rdrr.io/r/utils/capture.output.html">capture.output()</a></code> to <code>capture.output2()</code>. How do the functions differ? What features have I removed to make the key ideas easier to see? How have I rewritten the key ideas so they’re easier to understand?</p>
<p><strong>A5.</strong> The <code><a href="https://rdrr.io/r/utils/capture.output.html">capture.output()</a></code> is significantly more complex, as can be seen by its definition:</p>
<div class="sourceCode" id="cb168"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">capture.output</span></span>
<span><span class="co">#&gt; function (..., file = NULL, append = FALSE, type = c("output", </span></span>
<span><span class="co">#&gt;     "message"), split = FALSE) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     type &lt;- match.arg(type)</span></span>
<span><span class="co">#&gt;     rval &lt;- NULL</span></span>
<span><span class="co">#&gt;     closeit &lt;- TRUE</span></span>
<span><span class="co">#&gt;     if (is.null(file)) </span></span>
<span><span class="co">#&gt;         file &lt;- textConnection("rval", "w", local = TRUE)</span></span>
<span><span class="co">#&gt;     else if (is.character(file)) </span></span>
<span><span class="co">#&gt;         file &lt;- file(file, if (append) </span></span>
<span><span class="co">#&gt;             "a"</span></span>
<span><span class="co">#&gt;         else "w")</span></span>
<span><span class="co">#&gt;     else if (inherits(file, "connection")) {</span></span>
<span><span class="co">#&gt;         if (!isOpen(file)) </span></span>
<span><span class="co">#&gt;             open(file, if (append) </span></span>
<span><span class="co">#&gt;                 "a"</span></span>
<span><span class="co">#&gt;             else "w")</span></span>
<span><span class="co">#&gt;         else closeit &lt;- FALSE</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;     else stop("'file' must be NULL, a character string or a connection")</span></span>
<span><span class="co">#&gt;     sink(file, type = type, split = split)</span></span>
<span><span class="co">#&gt;     on.exit({</span></span>
<span><span class="co">#&gt;         sink(type = type, split = split)</span></span>
<span><span class="co">#&gt;         if (closeit) close(file)</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt;     for (i in seq_len(...length())) {</span></span>
<span><span class="co">#&gt;         out &lt;- withVisible(...elt(i))</span></span>
<span><span class="co">#&gt;         if (out$visible) </span></span>
<span><span class="co">#&gt;             print(out$value)</span></span>
<span><span class="co">#&gt;     }</span></span>
<span><span class="co">#&gt;     on.exit()</span></span>
<span><span class="co">#&gt;     sink(type = type, split = split)</span></span>
<span><span class="co">#&gt;     if (closeit) </span></span>
<span><span class="co">#&gt;         close(file)</span></span>
<span><span class="co">#&gt;     if (is.null(rval)) </span></span>
<span><span class="co">#&gt;         invisible(NULL)</span></span>
<span><span class="co">#&gt;     else rval</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x117a27300&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: namespace:utils&gt;</span></span></code></pre></div>
<p>Here are few key differences:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/utils/capture.output.html">capture.output()</a></code> uses <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> function to print to console:</li>
</ul>
<div class="sourceCode" id="cb169"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html">capture.output</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "[1] 1"</span></span>
<span></span>
<span><span class="fu">capture.output2</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; character(0)</span></span></code></pre></div>
<ul>
<li>
<code><a href="https://rdrr.io/r/utils/capture.output.html">capture.output()</a></code> can capture messages as well:</li>
</ul>
<div class="sourceCode" id="cb170"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html">capture.output</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"Hi there!"</span><span class="op">)</span>, <span class="st">"a"</span>, type <span class="op">=</span> <span class="st">"message"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Hi there!</span></span>
<span><span class="co">#&gt; [1] "a"</span></span>
<span><span class="co">#&gt; character(0)</span></span></code></pre></div>
<ul>
<li>
<code><a href="https://rdrr.io/r/utils/capture.output.html">capture.output()</a></code> takes into account visibility of the expression:</li>
</ul>
<div class="sourceCode" id="cb171"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html">capture.output</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "[1] 1" "[1] 3"</span></span></code></pre></div>
</div>
<div id="function-forms-exercises-6.8.6" class="section level2" number="6.6">
<h2>
<span class="header-section-number">6.6</span> Function forms (Exercises 6.8.6)<a class="anchor" aria-label="anchor" href="#function-forms-exercises-6.8.6"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Q1.</strong> Rewrite the following code snippets into prefix form:</p>
<div class="sourceCode" id="cb172"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">+</span> <span class="fl">2</span> <span class="op">+</span> <span class="fl">3</span></span>
<span></span>
<span><span class="fl">1</span> <span class="op">+</span> <span class="op">(</span><span class="fl">2</span> <span class="op">+</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">5</span><span class="op">)</span> <span class="va">x</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span> <span class="kw">else</span> <span class="va">x</span><span class="op">[[</span><span class="va">n</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<p><strong>A1.</strong> Prefix forms for code snippets:</p>
<div class="sourceCode" id="cb173"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The binary `+`  operator has left to right associative property.</span></span>
<span><span class="fu">`+`</span><span class="op">(</span><span class="fu">`+`</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">`+`</span><span class="op">(</span><span class="fl">1</span>, <span class="fu">`(`</span><span class="op">(</span><span class="fu">`+`</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">`if`</span><span class="op">(</span>cond <span class="op">=</span> <span class="fu">`&lt;=`</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span>, cons.expr <span class="op">=</span> <span class="fu">`[[`</span><span class="op">(</span><span class="va">x</span>, <span class="fl">5</span><span class="op">)</span>, alt.expr <span class="op">=</span> <span class="fu">`[[`</span><span class="op">(</span><span class="va">x</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Q2.</strong> Clarify the following list of odd function calls:</p>
<div class="sourceCode" id="cb174"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span>replace <span class="op">=</span> <span class="cn">TRUE</span>, <span class="fl">20</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span>min <span class="op">=</span> <span class="fl">0</span>, max <span class="op">=</span> <span class="fl">1</span>, <span class="fl">20</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span>m <span class="op">=</span> <span class="st">"k"</span>, y <span class="op">=</span> <span class="va">y</span>, u <span class="op">=</span> <span class="st">"p"</span>, x <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span></code></pre></div>
<p><strong>A2.</strong> These functions don’t have dots (<code>...</code>) as parameters, so the argument matching takes place in the following steps:</p>
<ul>
<li>exact matching for named arguments</li>
<li>partial matching</li>
<li>position-based</li>
</ul>
<p><strong>Q3.</strong> Explain why the following code fails:</p>
<div class="sourceCode" id="cb175"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://purrr.tidyverse.org/reference/modify.html">modify</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="co">#&gt; Error: target of assignment expands to non-language object</span></span></code></pre></div>
<p><strong>A3.</strong> As provided in the book, the replacement function is defined as:</p>
<div class="sourceCode" id="cb176"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">`modify&lt;-`</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">position</span>, <span class="va">value</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">x</span><span class="op">[</span><span class="va">position</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span>  <span class="va">x</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Let’s re-write the provided code in prefix format to understand why it doesn’t work:</p>
<div class="sourceCode" id="cb177"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">`modify&lt;-`</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span>, position <span class="op">=</span> <span class="fl">1</span>, value <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>Although this works:</p>
<div class="sourceCode" id="cb178"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="fu">`modify&lt;-`</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span><span class="op">(</span><span class="st">"x"</span><span class="op">)</span>, position <span class="op">=</span> <span class="fl">1</span>, value <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 10</span></span></code></pre></div>
<p>The following doesn’t because the code above evaluates to:</p>
<div class="sourceCode" id="cb179"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">`get&lt;-`</span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `get&lt;-`("x", 10): could not find function "get&lt;-"</span></span></code></pre></div>
<p>And there is no <code>get&lt;-</code> function in R.</p>
<p><strong>Q4.</strong> Create a replacement function that modifies a random location in a vector.</p>
<p><strong>A4.</strong> A replacement function that modifies a random location in a vector:</p>
<div class="sourceCode" id="cb180"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">`random_modify&lt;-`</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">value</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">random_index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="va">x</span><span class="op">[</span><span class="va">random_index</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Let’s try it out:</p>
<div class="sourceCode" id="cb181"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu">random_modify</span><span class="op">(</span><span class="va">x1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"X"</span></span>
<span><span class="va">x1</span></span>
<span><span class="co">#&gt;  [1] "a" "a" "a" "a" "X" "a" "a" "a" "a" "a"</span></span>
<span></span>
<span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu">random_modify</span><span class="op">(</span><span class="va">x2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Y"</span></span>
<span><span class="va">x2</span></span>
<span><span class="co">#&gt;  [1] "a" "a" "a" "a" "a" "Y" "a" "a" "a" "a"</span></span>
<span></span>
<span><span class="va">x3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">15</span><span class="op">)</span></span>
<span><span class="fu">random_modify</span><span class="op">(</span><span class="va">x3</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">4</span></span>
<span><span class="va">x3</span></span>
<span><span class="co">#&gt;  [1]  0  0  0  0 -4  0  0  0  0  0  0  0  0  0  0</span></span>
<span></span>
<span><span class="va">x4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">15</span><span class="op">)</span></span>
<span><span class="fu">random_modify</span><span class="op">(</span><span class="va">x4</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">1</span></span>
<span><span class="va">x4</span></span>
<span><span class="co">#&gt;  [1]  0  0  0  0  0  0  0  0  0  0  0  0 -1  0  0</span></span></code></pre></div>
<p><strong>Q5.</strong> Write your own version of <code>+</code> that pastes its inputs together if they are character vectors but behaves as usual otherwise. In other words, make this code work:</p>
<div class="sourceCode" id="cb182"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">+</span> <span class="fl">2</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span></span>
<span><span class="st">"a"</span> <span class="op">+</span> <span class="st">"b"</span></span>
<span><span class="co">#&gt; [1] "ab"</span></span></code></pre></div>
<p><strong>A5.</strong> Infix operator to re-create the desired output:</p>
<div class="sourceCode" id="cb183"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">`+`</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">is.character</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">||</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">is.character</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu">base</span><span class="fu">::</span><span class="fu">`+`</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fl">1</span> <span class="op">+</span> <span class="fl">2</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span></span>
<span><span class="st">"a"</span> <span class="op">+</span> <span class="st">"b"</span></span>
<span><span class="co">#&gt; [1] "ab"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="st">"+"</span>, envir <span class="op">=</span> <span class="va">.GlobalEnv</span><span class="op">)</span></span></code></pre></div>
<p><strong>Q6.</strong> Create a list of all the replacement functions found in the base package. Which ones are primitive functions? (Hint: use <code><a href="https://rdrr.io/r/utils/apropos.html">apropos()</a></code>.)</p>
<p><strong>A6.</strong> Replacement functions always have <code>&lt;-</code> at the end of their names.</p>
<p>So, using <code><a href="https://rdrr.io/r/utils/apropos.html">apropos()</a></code>, we can find all replacement functions in search paths and the filter out the ones that don’t belong to <code>{base}</code> package:</p>
<div class="sourceCode" id="cb184"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ls_replacement</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/apropos.html">apropos</a></span><span class="op">(</span><span class="st">"&lt;-"</span>, where <span class="op">=</span> <span class="cn">TRUE</span>, mode <span class="op">=</span> <span class="st">"function"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">base_index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"base"</span>, <span class="fu"><a href="https://rdrr.io/r/base/search.html">searchpaths</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ls_replacement</span> <span class="op">&lt;-</span> <span class="va">ls_replacement</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">ls_replacement</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">base_index</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unname.html">unname</a></span><span class="op">(</span><span class="va">ls_replacement</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] ".rowNamesDF&lt;-"           "[[&lt;-"                   </span></span>
<span><span class="co">#&gt;  [3] "[[&lt;-.data.frame"         "[[&lt;-.factor"            </span></span>
<span><span class="co">#&gt;  [5] "[[&lt;-.numeric_version"    "[[&lt;-.POSIXlt"           </span></span>
<span><span class="co">#&gt;  [7] "[&lt;-"                     "[&lt;-.data.frame"         </span></span>
<span><span class="co">#&gt;  [9] "[&lt;-.Date"                "[&lt;-.difftime"           </span></span>
<span><span class="co">#&gt; [11] "[&lt;-.factor"              "[&lt;-.numeric_version"    </span></span>
<span><span class="co">#&gt; [13] "[&lt;-.POSIXct"             "[&lt;-.POSIXlt"            </span></span>
<span><span class="co">#&gt; [15] "@&lt;-"                     "&lt;-"                     </span></span>
<span><span class="co">#&gt; [17] "&lt;&lt;-"                     "$&lt;-"                    </span></span>
<span><span class="co">#&gt; [19] "$&lt;-.data.frame"          "attr&lt;-"                 </span></span>
<span><span class="co">#&gt; [21] "attributes&lt;-"            "body&lt;-"                 </span></span>
<span><span class="co">#&gt; [23] "class&lt;-"                 "colnames&lt;-"             </span></span>
<span><span class="co">#&gt; [25] "comment&lt;-"               "diag&lt;-"                 </span></span>
<span><span class="co">#&gt; [27] "dim&lt;-"                   "dimnames&lt;-"             </span></span>
<span><span class="co">#&gt; [29] "dimnames&lt;-.data.frame"   "Encoding&lt;-"             </span></span>
<span><span class="co">#&gt; [31] "environment&lt;-"           "formals&lt;-"              </span></span>
<span><span class="co">#&gt; [33] "is.na&lt;-"                 "is.na&lt;-.default"        </span></span>
<span><span class="co">#&gt; [35] "is.na&lt;-.factor"          "is.na&lt;-.numeric_version"</span></span>
<span><span class="co">#&gt; [37] "length&lt;-"                "length&lt;-.Date"          </span></span>
<span><span class="co">#&gt; [39] "length&lt;-.difftime"       "length&lt;-.factor"        </span></span>
<span><span class="co">#&gt; [41] "length&lt;-.POSIXct"        "length&lt;-.POSIXlt"       </span></span>
<span><span class="co">#&gt; [43] "levels&lt;-"                "levels&lt;-.factor"        </span></span>
<span><span class="co">#&gt; [45] "mode&lt;-"                  "mostattributes&lt;-"       </span></span>
<span><span class="co">#&gt; [47] "names&lt;-"                 "names&lt;-.POSIXlt"        </span></span>
<span><span class="co">#&gt; [49] "oldClass&lt;-"              "parent.env&lt;-"           </span></span>
<span><span class="co">#&gt; [51] "regmatches&lt;-"            "row.names&lt;-"            </span></span>
<span><span class="co">#&gt; [53] "row.names&lt;-.data.frame"  "row.names&lt;-.default"    </span></span>
<span><span class="co">#&gt; [55] "rownames&lt;-"              "split&lt;-"                </span></span>
<span><span class="co">#&gt; [57] "split&lt;-.data.frame"      "split&lt;-.default"        </span></span>
<span><span class="co">#&gt; [59] "storage.mode&lt;-"          "substr&lt;-"               </span></span>
<span><span class="co">#&gt; [61] "substring&lt;-"             "units&lt;-"                </span></span>
<span><span class="co">#&gt; [63] "units&lt;-.difftime"</span></span></code></pre></div>
<p>The primitive replacement functions can be listed using <code><a href="https://rdrr.io/r/base/is.function.html">is.primitive()</a></code>:</p>
<div class="sourceCode" id="cb185"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/get.html">mget</a></span><span class="op">(</span><span class="va">ls_replacement</span>, envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html">baseenv</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/keep.html">keep</a></span><span class="op">(</span><span class="va">is.primitive</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "[[&lt;-"           "[&lt;-"            "@&lt;-"           </span></span>
<span><span class="co">#&gt;  [4] "&lt;-"             "&lt;&lt;-"            "$&lt;-"           </span></span>
<span><span class="co">#&gt;  [7] "attr&lt;-"         "attributes&lt;-"   "class&lt;-"       </span></span>
<span><span class="co">#&gt; [10] "dim&lt;-"          "dimnames&lt;-"     "environment&lt;-" </span></span>
<span><span class="co">#&gt; [13] "length&lt;-"       "levels&lt;-"       "names&lt;-"       </span></span>
<span><span class="co">#&gt; [16] "oldClass&lt;-"     "storage.mode&lt;-"</span></span></code></pre></div>
<p><strong>Q7.</strong> What are valid names for user-created infix functions?</p>
<p><strong>A7.</strong> As mentioned in the respective <a href="https://adv-r.hadley.nz/functions.html#infix-functions">section</a> of the book:</p>
<blockquote>
<p>The names of infix functions are more flexible than regular R functions: they can contain any sequence of characters except for <code>%</code>.</p>
</blockquote>
<p><strong>Q8.</strong> Create an infix <code><a href="https://rdrr.io/r/base/Logic.html">xor()</a></code> operator.</p>
<p><strong>A8.</strong> Exclusive OR is a logical operation that is <code>TRUE</code> if and only if its arguments differ (one is <code>TRUE</code>, the other is <code>FALSE</code>).</p>
<div class="sourceCode" id="cb186"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lv1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">lv2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Logic.html">xor</a></span><span class="op">(</span><span class="va">lv1</span>, <span class="va">lv2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE  TRUE  TRUE FALSE</span></span></code></pre></div>
<p>We can create infix operator for exclusive OR like so:</p>
<div class="sourceCode" id="cb187"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">`%xor%`</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="op">!</span><span class="op">(</span><span class="op">(</span><span class="va">x</span> <span class="op">&amp;</span> <span class="va">y</span><span class="op">)</span> <span class="op">|</span> <span class="op">!</span><span class="op">(</span><span class="va">x</span> <span class="op">|</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">lv1</span> <span class="op">%xor%</span> <span class="va">lv2</span></span>
<span><span class="co">#&gt; [1] FALSE  TRUE  TRUE FALSE</span></span>
<span></span>
<span><span class="cn">TRUE</span> <span class="op">%xor%</span> <span class="cn">TRUE</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>The function is vectorized over its inputs because the underlying logical operators themselves are vectorized.</p>
<p><strong>Q9.</strong> Create infix versions of the set functions <code><a href="https://generics.r-lib.org/reference/setops.html">intersect()</a></code>, <code><a href="https://generics.r-lib.org/reference/setops.html">union()</a></code>, and <code><a href="https://generics.r-lib.org/reference/setops.html">setdiff()</a></code>. You might call them <code>%n%</code>, <code>%u%</code>, and <code>%/%</code> to match conventions from mathematics.</p>
<p><strong>A9.</strong> The required infix operators can be created as following:</p>
<div class="sourceCode" id="cb188"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">`%n%`</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">intersect</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">`%u%`</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">union</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">`%/%`</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">setdiff</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We can check that the outputs agree with the underlying functions:</p>
<div class="sourceCode" id="cb189"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1]  4  7  8  9 11 13 15 16 20 NA</span></span>
<span><span class="op">(</span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">23</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  9 10 13 15 17 19 20 NA</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">intersect</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span>, <span class="va">x</span> <span class="op">%n%</span> <span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">union</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span>, <span class="va">x</span> <span class="op">%u%</span> <span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="fu"><a href="https://generics.r-lib.org/reference/setops.html">setdiff</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span>, <span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%/%</a></span> <span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div id="session-information-4" class="section level2" number="6.7">
<h2>
<span class="header-section-number">6.7</span> Session information<a class="anchor" aria-label="anchor" href="#session-information-4"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb190"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sessioninfo</span><span class="fu">::</span><span class="fu"><a href="https://r-lib.github.io/sessioninfo/reference/session_info.html">session_info</a></span><span class="op">(</span>include_base <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; ─ Session info ───────────────────────────────────────────</span></span>
<span><span class="co">#&gt;  setting  value</span></span>
<span><span class="co">#&gt;  version  R version 4.2.1 (2022-06-23)</span></span>
<span><span class="co">#&gt;  os       macOS Monterey 12.6</span></span>
<span><span class="co">#&gt;  system   aarch64, darwin20</span></span>
<span><span class="co">#&gt;  ui       X11</span></span>
<span><span class="co">#&gt;  language (EN)</span></span>
<span><span class="co">#&gt;  collate  en_US.UTF-8</span></span>
<span><span class="co">#&gt;  ctype    en_US.UTF-8</span></span>
<span><span class="co">#&gt;  tz       Europe/Berlin</span></span>
<span><span class="co">#&gt;  date     2022-10-18</span></span>
<span><span class="co">#&gt;  pandoc   2.19.2 @ /usr/local/bin/ (via rmarkdown)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ─ Packages ───────────────────────────────────────────────</span></span>
<span><span class="co">#&gt;  ! package       * version    date (UTC) lib source</span></span>
<span><span class="co">#&gt;    assertthat      0.2.1      2019-03-21 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    backports       1.4.1      2021-12-13 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    base          * 4.2.1      2022-06-24 [?] local</span></span>
<span><span class="co">#&gt;    bookdown        0.29       2022-09-12 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    broom           1.0.1      2022-08-29 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    bslib           0.4.0.9000 2022-08-20 [1] Github (rstudio/bslib@fa2e03c)</span></span>
<span><span class="co">#&gt;    cachem          1.0.6      2021-08-19 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    cellranger      1.1.0      2016-07-27 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    cli             3.4.1      2022-09-23 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    colorspace      2.0-3      2022-02-21 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;  P compiler        4.2.1      2022-06-24 [1] local</span></span>
<span><span class="co">#&gt;    crayon          1.5.2      2022-09-29 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;  P datasets      * 4.2.1      2022-06-24 [1] local</span></span>
<span><span class="co">#&gt;    DBI             1.1.3.9002 2022-10-17 [1] Github (r-dbi/DBI@2aec388)</span></span>
<span><span class="co">#&gt;    dbplyr          2.2.1      2022-06-27 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    digest          0.6.29     2021-12-01 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    downlit         0.4.2      2022-07-05 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    dplyr         * 1.0.10     2022-09-01 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    ellipsis        0.3.2      2021-04-29 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    evaluate        0.17       2022-10-07 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    fansi           1.0.3      2022-03-24 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    fastmap         1.1.0      2021-01-25 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    forcats       * 0.5.2      2022-08-19 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    fs              1.5.2      2021-12-08 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    gargle          1.2.1      2022-09-08 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    generics        0.1.3      2022-07-05 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    ggplot2       * 3.3.6      2022-05-03 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    glue            1.6.2      2022-02-24 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    googledrive     2.0.0      2021-07-08 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    googlesheets4   1.0.1      2022-08-13 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;  P graphics      * 4.2.1      2022-06-24 [1] local</span></span>
<span><span class="co">#&gt;  P grDevices     * 4.2.1      2022-06-24 [1] local</span></span>
<span><span class="co">#&gt;  P grid            4.2.1      2022-06-24 [1] local</span></span>
<span><span class="co">#&gt;    gtable          0.3.1      2022-09-01 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    haven           2.5.1      2022-08-22 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    highr           0.9        2021-04-16 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    hms             1.1.2      2022-08-19 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    htmltools       0.5.3      2022-07-18 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    httr            1.4.4      2022-08-17 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    jquerylib       0.1.4      2021-04-26 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    jsonlite        1.8.2      2022-10-02 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    knitr           1.40       2022-08-24 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    lifecycle       1.0.3      2022-10-07 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    lobstr          1.1.2      2022-06-22 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    lubridate       1.8.0      2021-10-07 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    magrittr      * 2.0.3      2022-03-30 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    memoise         2.0.1      2021-11-26 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;  P methods       * 4.2.1      2022-06-24 [1] local</span></span>
<span><span class="co">#&gt;    modelr          0.1.9      2022-08-19 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    munsell         0.5.0      2018-06-12 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    pillar          1.8.1      2022-08-19 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    pkgconfig       2.0.3      2019-09-22 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    purrr         * 0.3.5      2022-10-06 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    R6              2.5.1.9000 2022-08-06 [1] Github (r-lib/R6@87d5e45)</span></span>
<span><span class="co">#&gt;    readr         * 2.1.3      2022-10-01 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    readxl          1.4.1      2022-08-17 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    reprex          2.0.2      2022-08-17 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    rlang           1.0.6      2022-09-24 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    rmarkdown       2.17       2022-10-07 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    rstudioapi      0.14       2022-08-22 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    rvest           1.0.3      2022-08-19 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    sass            0.4.2      2022-07-16 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    scales          1.2.1      2022-08-20 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    sessioninfo     1.2.2      2021-12-06 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;  P stats         * 4.2.1      2022-06-24 [1] local</span></span>
<span><span class="co">#&gt;    stringi         1.7.8      2022-07-11 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    stringr       * 1.4.1      2022-08-20 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    tibble        * 3.1.8.9002 2022-10-16 [1] local</span></span>
<span><span class="co">#&gt;    tidyr         * 1.2.1      2022-09-08 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    tidyselect      1.2.0      2022-10-10 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    tidyverse     * 1.3.2      2022-07-18 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;  P tools           4.2.1      2022-06-24 [1] local</span></span>
<span><span class="co">#&gt;    tzdb            0.3.0      2022-03-28 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    utf8            1.2.2      2021-07-24 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;  P utils         * 4.2.1      2022-06-24 [1] local</span></span>
<span><span class="co">#&gt;    vctrs           0.4.2.9000 2022-10-17 [1] Github (r-lib/vctrs@e04fef0)</span></span>
<span><span class="co">#&gt;    withr           2.5.0      2022-03-03 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt;    xfun            0.33       2022-09-12 [1] CRAN (R 4.2.1)</span></span>
<span><span class="co">#&gt;    xml2            1.3.3.9000 2022-10-10 [1] local</span></span>
<span><span class="co">#&gt;    yaml            2.3.5      2022-02-21 [1] CRAN (R 4.2.0)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  [1] /Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  P ── Loaded and on-disk path mismatch.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ──────────────────────────────────────────────────────────</span></span></code></pre></div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="control-flow.html"><span class="header-section-number">5</span> Control flow</a></div>
<div class="next"><a href="environments.html"><span class="header-section-number">7</span> Environments</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#functions"><span class="header-section-number">6</span> Functions</a></li>
<li><a class="nav-link" href="#function-fundamentals-exercises-6.2.5"><span class="header-section-number">6.1</span> Function fundamentals (Exercises 6.2.5)</a></li>
<li><a class="nav-link" href="#lexical-scoping-exercises-6.4.5"><span class="header-section-number">6.2</span> Lexical scoping (Exercises 6.4.5)</a></li>
<li><a class="nav-link" href="#lazy-evaluation-exercises-6.5.4"><span class="header-section-number">6.3</span> Lazy evaluation (Exercises 6.5.4)</a></li>
<li><a class="nav-link" href="#dot-dot-dot-exercises-6.6.1"><span class="header-section-number">6.4</span> ... (dot-dot-dot) (Exercises 6.6.1)</a></li>
<li><a class="nav-link" href="#exiting-a-function-exercises-6.7.5"><span class="header-section-number">6.5</span> Exiting a function (Exercises 6.7.5)</a></li>
<li><a class="nav-link" href="#function-forms-exercises-6.8.6"><span class="header-section-number">6.6</span> Function forms (Exercises 6.8.6)</a></li>
<li><a class="nav-link" href="#session-information-4"><span class="header-section-number">6.7</span> Session information</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/IndrajeetPatil/Advanced-R-exercises/blob/master/Functions.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/IndrajeetPatil/Advanced-R-exercises/edit/master/Functions.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Advanced R Exercises</strong>" was written by <a class="text-light" href="https://sites.google.com/site/indrajeetspatilmorality/">Indrajeet Patil</a>. It was last built on 2022-10-18.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
