# S3

## Exercise 13.2.1 

Q1. Differences between `t.test` and `t.data.frame`


```r
library(sloop)

# function type
ftype(t.test)
#> [1] "S3"      "generic"
ftype(t.data.frame)
#> [1] "S3"     "method"
```

- `t.test()` is a **generic** function to perform t-test.

- `t.data.frame` is a **method** for generic `t()` (a matrix transform function) and will be dispatched for `data.frame` objects that need to be transformed.

Q2. base-R function with `.`

- `all.equal()`
- Most of `as.*` functions like `as.data.frame()`
- `install.packages()`
etc.

For example,


```r
ftype(as.data.frame)
#> [1] "S3"      "generic"
```

Q3. What does `as.data.frame.data.frame()` do?
 
It's a **method** for generic `as.data.frame()`.

Less confusing: `asDataFrame.DataFrame()`.

Q4. Difference in behavior

Before unclassing, the S3 dispatches `.Date` method, while after `.numeric` method.

Before


```r
some_days <- as.Date("2017-01-31") + sample(10, 5)

some_days
#> [1] "2017-02-08" "2017-02-03" "2017-02-09" "2017-02-01"
#> [5] "2017-02-07"

s3_dispatch(mean(some_days))
#> => mean.Date
#>  * mean.default

mean(some_days)
#> [1] "2017-02-05"
```

After


```r
unclass(some_days)
#> [1] 17205 17200 17206 17198 17204

mean(unclass(some_days))
#> [1] 17202.6

s3_dispatch(mean(unclass(some_days)))
#>    mean.double
#>    mean.numeric
#> => mean.default
```

Q5. Object properties


```r
x <- ecdf(rpois(100, 10))
x
#> Empirical CDF 
#> Call: ecdf(rpois(100, 10))
#>  x[1:15] =      4,      5,      6,  ...,     17,     21

otype(x)
#> [1] "S3"

attributes(x)
#> $class
#> [1] "ecdf"     "stepfun"  "function"
#> 
#> $call
#> ecdf(rpois(100, 10))

s3_class(x)
#> [1] "ecdf"     "stepfun"  "function"
```

Q6. Object properties


```r
x <- table(rpois(100, 5))
x
#> 
#>  1  2  3  4  5  6  7  8 11 12 
#>  4  7 15 21 19 15 11  4  2  2

otype(x)
#> [1] "S3"

attributes(x)
#> $dim
#> [1] 10
#> 
#> $dimnames
#> $dimnames[[1]]
#>  [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "11" "12"
#> 
#> 
#> $class
#> [1] "table"

s3_class(x)
#> [1] "table"
```
