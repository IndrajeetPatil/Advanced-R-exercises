<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Chapter 18 Expressions | Advanced R Exercises</title>

    <meta name="author" content="Indrajeet Patil" />
  
   <meta name="description" content="Solutions to exercises in Hadley Wickham’s Advanced R (2nd edition) book." />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="Chapter 18 Expressions | Advanced R Exercises" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/cover.png" />
  <meta property="og:description" content="Solutions to exercises in Hadley Wickham’s Advanced R (2nd edition) book." />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 18 Expressions | Advanced R Exercises" />
  
  <meta name="twitter:description" content="Solutions to exercises in Hadley Wickham’s Advanced R (2nd edition) book." />
  <meta name="twitter:image" content="/cover.png" />
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.4.0/transition.js"></script>
    <script src="libs/bs3compat-0.4.0/tabs.js"></script>
    <script src="libs/bs3compat-0.4.0/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
    <script src="libs/d3-3.5.6/d3.min.js"></script>
    <link href="libs/profvis-0.3.6.9000/profvis.css" rel="stylesheet" />
    <script src="libs/profvis-0.3.6.9000/profvis.js"></script>
    <script src="libs/profvis-0.3.6.9000/scroll.js"></script>
    <link href="libs/highlight-6.2.0/textmate.css" rel="stylesheet" />
    <script src="libs/highlight-6.2.0/highlight.js"></script>
    <script src="libs/profvis-binding-0.3.7/profvis.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
      <link rel="stylesheet" href="bs4_style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Advanced R Exercises</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="expressions" class="section level1" number="18">
<h1><span class="header-section-number">Chapter 18</span> Expressions</h1>
<p>Attaching the needed libraries:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="expressions.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rlang, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb130-2"><a href="expressions.html#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lobstr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div id="exercises-18.2.4" class="section level2" number="18.1">
<h2><span class="header-section-number">18.1</span> Exercises 18.2.4</h2>
<p><strong>Q1.</strong> Reconstruct the code represented by the trees below:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="expressions.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ¦-f</span></span>
<span id="cb131-2"><a href="expressions.html#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-¦-g</span></span>
<span id="cb131-3"><a href="expressions.html#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   +-¦-h</span></span>
<span id="cb131-4"><a href="expressions.html#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ¦-`+`</span></span>
<span id="cb131-5"><a href="expressions.html#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-¦-`+`</span></span>
<span id="cb131-6"><a href="expressions.html#cb131-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ¦ +-1</span></span>
<span id="cb131-7"><a href="expressions.html#cb131-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ¦ +-2</span></span>
<span id="cb131-8"><a href="expressions.html#cb131-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-3</span></span>
<span id="cb131-9"><a href="expressions.html#cb131-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ¦-`*`</span></span>
<span id="cb131-10"><a href="expressions.html#cb131-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-¦-`(`</span></span>
<span id="cb131-11"><a href="expressions.html#cb131-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ¦ +-¦-`+`</span></span>
<span id="cb131-12"><a href="expressions.html#cb131-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ¦   +-x</span></span>
<span id="cb131-13"><a href="expressions.html#cb131-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ¦   +-y</span></span>
<span id="cb131-14"><a href="expressions.html#cb131-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-z</span></span></code></pre></div>
<p><strong>A1.</strong> Below is the reconstructed code.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="expressions.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="fu">g</span>(<span class="fu">h</span>()))</span>
<span id="cb132-2"><a href="expressions.html#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span></span>
<span id="cb132-3"><a href="expressions.html#cb132-3" aria-hidden="true" tabindex="-1"></a>(x <span class="sc">+</span> y) <span class="sc">*</span> z</span></code></pre></div>
<p>We can confirm it by drawing ASTs for them:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="expressions.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="fu">f</span>(<span class="fu">g</span>(<span class="fu">h</span>())))</span>
<span id="cb133-2"><a href="expressions.html#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-f </span></span>
<span id="cb133-3"><a href="expressions.html#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-o-g </span></span>
<span id="cb133-4"><a href="expressions.html#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   \-o-h</span></span>
<span id="cb133-5"><a href="expressions.html#cb133-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-6"><a href="expressions.html#cb133-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="dv">1</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span>)</span>
<span id="cb133-7"><a href="expressions.html#cb133-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`+` </span></span>
<span id="cb133-8"><a href="expressions.html#cb133-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-o-`+` </span></span>
<span id="cb133-9"><a href="expressions.html#cb133-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; | +-1 </span></span>
<span id="cb133-10"><a href="expressions.html#cb133-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; | \-2 </span></span>
<span id="cb133-11"><a href="expressions.html#cb133-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-3</span></span>
<span id="cb133-12"><a href="expressions.html#cb133-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-13"><a href="expressions.html#cb133-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>((x <span class="sc">+</span> y) <span class="sc">*</span> z)</span>
<span id="cb133-14"><a href="expressions.html#cb133-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`*` </span></span>
<span id="cb133-15"><a href="expressions.html#cb133-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-o-`(` </span></span>
<span id="cb133-16"><a href="expressions.html#cb133-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; | \-o-`+` </span></span>
<span id="cb133-17"><a href="expressions.html#cb133-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; |   +-x </span></span>
<span id="cb133-18"><a href="expressions.html#cb133-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; |   \-y </span></span>
<span id="cb133-19"><a href="expressions.html#cb133-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-z</span></span></code></pre></div>
<p><strong>Q2.</strong> Draw the following trees by hand and then check your answers with <code>ast()</code>.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="expressions.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="fu">g</span>(<span class="fu">h</span>(<span class="fu">i</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))))</span>
<span id="cb134-2"><a href="expressions.html#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="dv">1</span>, <span class="fu">g</span>(<span class="dv">2</span>, <span class="fu">h</span>(<span class="dv">3</span>, <span class="fu">i</span>())))</span>
<span id="cb134-3"><a href="expressions.html#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="fu">g</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="fu">h</span>(<span class="dv">3</span>, <span class="fu">i</span>(<span class="dv">4</span>, <span class="dv">5</span>)))</span></code></pre></div>
<p><strong>A2.</strong> Successfully drawn by hand. Checking using <code>ast()</code>:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="expressions.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="fu">f</span>(<span class="fu">g</span>(<span class="fu">h</span>(<span class="fu">i</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)))))</span>
<span id="cb135-2"><a href="expressions.html#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-f </span></span>
<span id="cb135-3"><a href="expressions.html#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-o-g </span></span>
<span id="cb135-4"><a href="expressions.html#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   \-o-h </span></span>
<span id="cb135-5"><a href="expressions.html#cb135-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     \-o-i </span></span>
<span id="cb135-6"><a href="expressions.html#cb135-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       +-1 </span></span>
<span id="cb135-7"><a href="expressions.html#cb135-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       +-2 </span></span>
<span id="cb135-8"><a href="expressions.html#cb135-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       \-3</span></span>
<span id="cb135-9"><a href="expressions.html#cb135-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-10"><a href="expressions.html#cb135-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="fu">f</span>(<span class="dv">1</span>, <span class="fu">g</span>(<span class="dv">2</span>, <span class="fu">h</span>(<span class="dv">3</span>, <span class="fu">i</span>()))))</span>
<span id="cb135-11"><a href="expressions.html#cb135-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-f </span></span>
<span id="cb135-12"><a href="expressions.html#cb135-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-1 </span></span>
<span id="cb135-13"><a href="expressions.html#cb135-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-o-g </span></span>
<span id="cb135-14"><a href="expressions.html#cb135-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   +-2 </span></span>
<span id="cb135-15"><a href="expressions.html#cb135-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   \-o-h </span></span>
<span id="cb135-16"><a href="expressions.html#cb135-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     +-3 </span></span>
<span id="cb135-17"><a href="expressions.html#cb135-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     \-o-i</span></span>
<span id="cb135-18"><a href="expressions.html#cb135-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-19"><a href="expressions.html#cb135-19" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="fu">f</span>(<span class="fu">g</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="fu">h</span>(<span class="dv">3</span>, <span class="fu">i</span>(<span class="dv">4</span>, <span class="dv">5</span>))))</span>
<span id="cb135-20"><a href="expressions.html#cb135-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-f </span></span>
<span id="cb135-21"><a href="expressions.html#cb135-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-o-g </span></span>
<span id="cb135-22"><a href="expressions.html#cb135-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; | +-1 </span></span>
<span id="cb135-23"><a href="expressions.html#cb135-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; | \-2 </span></span>
<span id="cb135-24"><a href="expressions.html#cb135-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-o-h </span></span>
<span id="cb135-25"><a href="expressions.html#cb135-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   +-3 </span></span>
<span id="cb135-26"><a href="expressions.html#cb135-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   \-o-i </span></span>
<span id="cb135-27"><a href="expressions.html#cb135-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     +-4 </span></span>
<span id="cb135-28"><a href="expressions.html#cb135-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     \-5</span></span></code></pre></div>
<p><strong>Q3.</strong> What’s happening with the ASTs below? (Hint: carefully read <code>?"^"</code>.)</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="expressions.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="st">`</span><span class="at">x</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">y</span><span class="st">`</span>)</span>
<span id="cb136-2"><a href="expressions.html#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`+` </span></span>
<span id="cb136-3"><a href="expressions.html#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-x </span></span>
<span id="cb136-4"><a href="expressions.html#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-y</span></span>
<span id="cb136-5"><a href="expressions.html#cb136-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(x<span class="sc">**</span>y)</span>
<span id="cb136-6"><a href="expressions.html#cb136-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`^` </span></span>
<span id="cb136-7"><a href="expressions.html#cb136-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-x </span></span>
<span id="cb136-8"><a href="expressions.html#cb136-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-y</span></span>
<span id="cb136-9"><a href="expressions.html#cb136-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="dv">1</span> <span class="ot">-&gt;</span> x)</span>
<span id="cb136-10"><a href="expressions.html#cb136-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`&lt;-` </span></span>
<span id="cb136-11"><a href="expressions.html#cb136-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-x </span></span>
<span id="cb136-12"><a href="expressions.html#cb136-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-1</span></span></code></pre></div>
<p><strong>A3.</strong> The <code>str2expression()</code> helps make sense of these ASTs.</p>
<p>The non-syntactic names are parsed to names. Thus, backticks have been removed in the AST.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="expressions.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str2expression</span>(<span class="st">&quot;`x` + `y`&quot;</span>)</span>
<span id="cb137-2"><a href="expressions.html#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; expression(x + y)</span></span></code></pre></div>
<p>As mentioned in the docs for <code>^</code>:</p>
<blockquote>
<p>** is translated in the parser to ^</p>
</blockquote>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="expressions.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str2expression</span>(<span class="st">&quot;x**y&quot;</span>)</span>
<span id="cb138-2"><a href="expressions.html#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; expression(x^y)</span></span></code></pre></div>
<p>The rightward assignment is parsed to leftward assignment:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="expressions.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str2expression</span>(<span class="st">&quot;1 -&gt; x&quot;</span>)</span>
<span id="cb139-2"><a href="expressions.html#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; expression(x &lt;- 1)</span></span></code></pre></div>
<p><strong>Q4.</strong> What is special about the AST below?</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="expressions.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="cf">function</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">2</span>) {})</span>
<span id="cb140-2"><a href="expressions.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`function` </span></span>
<span id="cb140-3"><a href="expressions.html#cb140-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-o-x = 1 </span></span>
<span id="cb140-4"><a href="expressions.html#cb140-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; | \-y = 2 </span></span>
<span id="cb140-5"><a href="expressions.html#cb140-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-o-`{` </span></span>
<span id="cb140-6"><a href="expressions.html#cb140-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-&lt;inline srcref&gt;</span></span></code></pre></div>
<p><strong>A4.</strong> As mentioned in <a href="https://adv-r.hadley.nz/functions.html#fun-components">this</a> section:</p>
<blockquote>
<p>Like all objects in R, functions can also possess any number of additional <code>attributes()</code>. One attribute used by base R is <code>srcref</code>, short for source reference. It points to the source code used to create the function. The <code>srcref</code> is used for printing because, unlike <code>body()</code>, it contains code comments and other formatting.</p>
</blockquote>
<p>Therefore, the last leaf in this AST, although not specified in the function call, represents source reference attribute.</p>
<p><strong>Q5.</strong> What does the call tree of an <code>if</code> statement with multiple <code>else if</code> conditions look like? Why?</p>
<p><strong>A5.</strong> There is nothing special about this tree. It just shows the nested loop structure inherent to code with <code>if</code> and multiple <code>else if</code> statements.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="expressions.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="cf">if</span> (<span class="cn">FALSE</span>) <span class="dv">1</span> <span class="cf">else</span> <span class="cf">if</span> (<span class="cn">FALSE</span>) <span class="dv">2</span> <span class="cf">else</span> <span class="cf">if</span> (<span class="cn">FALSE</span>) <span class="dv">3</span> <span class="cf">else</span> <span class="dv">4</span>)</span>
<span id="cb141-2"><a href="expressions.html#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`if` </span></span>
<span id="cb141-3"><a href="expressions.html#cb141-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-FALSE </span></span>
<span id="cb141-4"><a href="expressions.html#cb141-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-1 </span></span>
<span id="cb141-5"><a href="expressions.html#cb141-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-o-`if` </span></span>
<span id="cb141-6"><a href="expressions.html#cb141-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   +-FALSE </span></span>
<span id="cb141-7"><a href="expressions.html#cb141-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   +-2 </span></span>
<span id="cb141-8"><a href="expressions.html#cb141-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   \-o-`if` </span></span>
<span id="cb141-9"><a href="expressions.html#cb141-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     +-FALSE </span></span>
<span id="cb141-10"><a href="expressions.html#cb141-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     +-3 </span></span>
<span id="cb141-11"><a href="expressions.html#cb141-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     \-4</span></span></code></pre></div>
</div>
<div id="exercises-18.3.5" class="section level2" number="18.2">
<h2><span class="header-section-number">18.2</span> Exercises 18.3.5</h2>
<p><strong>Q1.</strong> Which two of the six types of atomic vector can’t appear in an expression? Why? Similarly, why can’t you create an expression that contains an atomic vector of length greater than one?</p>
<p><strong>A1.</strong> Out of the six types of atomic vectors, the two that can’t appear in an expression are: complex and raw.</p>
<p>Complex numbers are created via a <strong>function call</strong> (using <code>+</code>), as can be seen by its AST:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="expressions.html#cb142-1" aria-hidden="true" tabindex="-1"></a>x_complex <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">expr</span>(<span class="dv">1</span> <span class="sc">+</span> 1i)</span>
<span id="cb142-2"><a href="expressions.html#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x_complex)</span>
<span id="cb142-3"><a href="expressions.html#cb142-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;language&quot;</span></span>
<span id="cb142-4"><a href="expressions.html#cb142-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-5"><a href="expressions.html#cb142-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="dv">1</span> <span class="sc">+</span> 1i)</span>
<span id="cb142-6"><a href="expressions.html#cb142-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`+` </span></span>
<span id="cb142-7"><a href="expressions.html#cb142-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-1 </span></span>
<span id="cb142-8"><a href="expressions.html#cb142-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-1i</span></span></code></pre></div>
<p>Similarly, for raw vectors (using <code>raw()</code>):</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="expressions.html#cb143-1" aria-hidden="true" tabindex="-1"></a>x_raw <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">expr</span>(<span class="fu">raw</span>(<span class="dv">2</span>))</span>
<span id="cb143-2"><a href="expressions.html#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x_raw)</span>
<span id="cb143-3"><a href="expressions.html#cb143-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;language&quot;</span></span>
<span id="cb143-4"><a href="expressions.html#cb143-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-5"><a href="expressions.html#cb143-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="fu">raw</span>(<span class="dv">2</span>))</span>
<span id="cb143-6"><a href="expressions.html#cb143-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-raw </span></span>
<span id="cb143-7"><a href="expressions.html#cb143-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-2</span></span></code></pre></div>
<p>Contrast this with other atomic vectors:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="expressions.html#cb144-1" aria-hidden="true" tabindex="-1"></a>x_int <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">expr</span>(2L)</span>
<span id="cb144-2"><a href="expressions.html#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x_int)</span>
<span id="cb144-3"><a href="expressions.html#cb144-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;integer&quot;</span></span>
<span id="cb144-4"><a href="expressions.html#cb144-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-5"><a href="expressions.html#cb144-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(2L)</span>
<span id="cb144-6"><a href="expressions.html#cb144-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2L</span></span></code></pre></div>
<p>For the same reason, you can’t you create an expression that contains an atomic vector of length greater than one since that itself is a function call that uses <code>c()</code> function:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="expressions.html#cb145-1" aria-hidden="true" tabindex="-1"></a>x_vec <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">expr</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb145-2"><a href="expressions.html#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x_vec)</span>
<span id="cb145-3"><a href="expressions.html#cb145-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;language&quot;</span></span>
<span id="cb145-4"><a href="expressions.html#cb145-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-5"><a href="expressions.html#cb145-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb145-6"><a href="expressions.html#cb145-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-c </span></span>
<span id="cb145-7"><a href="expressions.html#cb145-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-1 </span></span>
<span id="cb145-8"><a href="expressions.html#cb145-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-2</span></span></code></pre></div>
<p><strong>Q2.</strong> What happens when you subset a call object to remove the first element? e.g. <code>expr(read.csv("foo.csv", header = TRUE))[-1]</code>. Why?</p>
<p><strong>A2.</strong> A captured function call like the following creates a call object:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="expressions.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">expr</span>(<span class="fu">read.csv</span>(<span class="st">&quot;foo.csv&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>))</span>
<span id="cb146-2"><a href="expressions.html#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; read.csv(&quot;foo.csv&quot;, header = TRUE)</span></span>
<span id="cb146-3"><a href="expressions.html#cb146-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-4"><a href="expressions.html#cb146-4" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">expr</span>(<span class="fu">read.csv</span>(<span class="st">&quot;foo.csv&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb146-5"><a href="expressions.html#cb146-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;language&quot;</span></span></code></pre></div>
<p>As mentioned in the <a href="https://adv-r.hadley.nz/expressions.html#function-position">respective section</a>:</p>
<blockquote>
<p>The first element of the call object is the function position.</p>
</blockquote>
<p>Therefore, when the first element in the call object is removed, the next one moves in the function position, and we get the observed output:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="expressions.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">expr</span>(<span class="fu">read.csv</span>(<span class="st">&quot;foo.csv&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>))[<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb147-2"><a href="expressions.html#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &quot;foo.csv&quot;(header = TRUE)</span></span></code></pre></div>
<p><strong>Q3.</strong> Describe the differences between the following call objects.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="expressions.html#cb148-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb148-2"><a href="expressions.html#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="fu">call2</span>(median, x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb148-3"><a href="expressions.html#cb148-3" aria-hidden="true" tabindex="-1"></a><span class="fu">call2</span>(<span class="fu">expr</span>(median), x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb148-4"><a href="expressions.html#cb148-4" aria-hidden="true" tabindex="-1"></a><span class="fu">call2</span>(median, <span class="fu">expr</span>(x), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb148-5"><a href="expressions.html#cb148-5" aria-hidden="true" tabindex="-1"></a><span class="fu">call2</span>(<span class="fu">expr</span>(median), <span class="fu">expr</span>(x), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><strong>A4.</strong> The differences in the constructed call objects are due to the different <em>type</em> of arguments supplied to first two parameters in the <code>call2()</code> function.</p>
<p>In terms of provided <code>.fn</code>:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="expressions.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(median)</span>
<span id="cb149-2"><a href="expressions.html#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;closure&quot;</span></span>
<span id="cb149-3"><a href="expressions.html#cb149-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">expr</span>(median))</span>
<span id="cb149-4"><a href="expressions.html#cb149-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;symbol&quot;</span></span></code></pre></div>
<p>And, in terms of arguments provided to dynamic dots:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="expressions.html#cb150-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb150-2"><a href="expressions.html#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span>
<span id="cb150-3"><a href="expressions.html#cb150-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;integer&quot;</span></span>
<span id="cb150-4"><a href="expressions.html#cb150-4" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">expr</span>(x))</span>
<span id="cb150-5"><a href="expressions.html#cb150-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;symbol&quot;</span></span></code></pre></div>
<p>When <code>.fn</code> argument is a <code>closure</code>, that function is inlined in the constructed function call, while when <code>x</code> is not a symbol, its value is passed to the function call:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="expressions.html#cb151-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb151-2"><a href="expressions.html#cb151-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-3"><a href="expressions.html#cb151-3" aria-hidden="true" tabindex="-1"></a><span class="fu">call2</span>(median, x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb151-4"><a href="expressions.html#cb151-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (function (x, na.rm = FALSE, ...) </span></span>
<span id="cb151-5"><a href="expressions.html#cb151-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; UseMethod(&quot;median&quot;))(1:10, na.rm = TRUE)</span></span>
<span id="cb151-6"><a href="expressions.html#cb151-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-7"><a href="expressions.html#cb151-7" aria-hidden="true" tabindex="-1"></a><span class="fu">call2</span>(<span class="fu">expr</span>(median), x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb151-8"><a href="expressions.html#cb151-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; median(1:10, na.rm = TRUE)</span></span>
<span id="cb151-9"><a href="expressions.html#cb151-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-10"><a href="expressions.html#cb151-10" aria-hidden="true" tabindex="-1"></a><span class="fu">call2</span>(median, <span class="fu">expr</span>(x), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb151-11"><a href="expressions.html#cb151-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (function (x, na.rm = FALSE, ...) </span></span>
<span id="cb151-12"><a href="expressions.html#cb151-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; UseMethod(&quot;median&quot;))(x, na.rm = TRUE)</span></span>
<span id="cb151-13"><a href="expressions.html#cb151-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-14"><a href="expressions.html#cb151-14" aria-hidden="true" tabindex="-1"></a><span class="fu">call2</span>(<span class="fu">expr</span>(median), <span class="fu">expr</span>(x), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb151-15"><a href="expressions.html#cb151-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; median(x, na.rm = TRUE)</span></span></code></pre></div>
<p>Importantly, all of the constructed call objects evaluate to give the same result:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="expressions.html#cb152-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb152-2"><a href="expressions.html#cb152-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-3"><a href="expressions.html#cb152-3" aria-hidden="true" tabindex="-1"></a><span class="fu">eval</span>(<span class="fu">call2</span>(median, x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb152-4"><a href="expressions.html#cb152-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5.5</span></span>
<span id="cb152-5"><a href="expressions.html#cb152-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-6"><a href="expressions.html#cb152-6" aria-hidden="true" tabindex="-1"></a><span class="fu">eval</span>(<span class="fu">call2</span>(<span class="fu">expr</span>(median), x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb152-7"><a href="expressions.html#cb152-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5.5</span></span>
<span id="cb152-8"><a href="expressions.html#cb152-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-9"><a href="expressions.html#cb152-9" aria-hidden="true" tabindex="-1"></a><span class="fu">eval</span>(<span class="fu">call2</span>(median, <span class="fu">expr</span>(x), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb152-10"><a href="expressions.html#cb152-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5.5</span></span>
<span id="cb152-11"><a href="expressions.html#cb152-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-12"><a href="expressions.html#cb152-12" aria-hidden="true" tabindex="-1"></a><span class="fu">eval</span>(<span class="fu">call2</span>(<span class="fu">expr</span>(median), <span class="fu">expr</span>(x), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb152-13"><a href="expressions.html#cb152-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5.5</span></span></code></pre></div>
<p><strong>Q4.</strong> <code>rlang::call_standardise()</code> doesn’t work so well for the following calls. Why? What makes <code>mean()</code> special?</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="expressions.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">call_standardise</span>(<span class="fu">quote</span>(<span class="fu">mean</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb153-2"><a href="expressions.html#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mean(x = 1:10, na.rm = TRUE)</span></span>
<span id="cb153-3"><a href="expressions.html#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="fu">call_standardise</span>(<span class="fu">quote</span>(<span class="fu">mean</span>(<span class="at">n =</span> T, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)))</span>
<span id="cb153-4"><a href="expressions.html#cb153-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mean(x = 1:10, n = T)</span></span>
<span id="cb153-5"><a href="expressions.html#cb153-5" aria-hidden="true" tabindex="-1"></a><span class="fu">call_standardise</span>(<span class="fu">quote</span>(<span class="fu">mean</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, , <span class="cn">TRUE</span>)))</span>
<span id="cb153-6"><a href="expressions.html#cb153-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mean(x = 1:10, , TRUE)</span></span></code></pre></div>
<p><strong>A4.</strong> This is because of the ellipsis in <code>mean()</code> function signature:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="expressions.html#cb154-1" aria-hidden="true" tabindex="-1"></a>mean</span>
<span id="cb154-2"><a href="expressions.html#cb154-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; function (x, ...) </span></span>
<span id="cb154-3"><a href="expressions.html#cb154-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; UseMethod(&quot;mean&quot;)</span></span>
<span id="cb154-4"><a href="expressions.html#cb154-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;bytecode: 0x0000000017ff22a0&gt;</span></span>
<span id="cb154-5"><a href="expressions.html#cb154-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: namespace:base&gt;</span></span></code></pre></div>
<p>As mentioned in the respective <a href="If%20the%20function%20uses%20...%20it’s%20not%20possible%20to%20standardise%20all%20arguments.">section</a>:</p>
<blockquote>
<p>If the function uses <code>...</code> it’s not possible to standardise all arguments.</p>
</blockquote>
<p><code>mean()</code> is an S3 generic and the dots are passed to underlying S3 methods.</p>
<p>So, the output can be improved using a specific method. For example:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="expressions.html#cb155-1" aria-hidden="true" tabindex="-1"></a>rlang<span class="sc">::</span><span class="fu">call_standardise</span>(<span class="fu">quote</span>(<span class="fu">mean.default</span>(<span class="at">n =</span> T, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)))</span>
<span id="cb155-2"><a href="expressions.html#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mean.default(x = 1:10, na.rm = T)</span></span></code></pre></div>
<p><strong>Q5.</strong> Why does this code not make sense?</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="expressions.html#cb156-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">expr</span>(<span class="fu">foo</span>(<span class="at">x =</span> <span class="dv">1</span>))</span>
<span id="cb156-2"><a href="expressions.html#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(x) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>)</span></code></pre></div>
<p><strong>A5.</strong> This doesn’t make sense because the first position in a call object is reserved for function (function position), and so assigning names to this element will just be ignored by R:</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="expressions.html#cb157-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">expr</span>(<span class="fu">foo</span>(<span class="at">x =</span> <span class="dv">1</span>))</span>
<span id="cb157-2"><a href="expressions.html#cb157-2" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb157-3"><a href="expressions.html#cb157-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; foo(x = 1)</span></span>
<span id="cb157-4"><a href="expressions.html#cb157-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-5"><a href="expressions.html#cb157-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(x) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>)</span>
<span id="cb157-6"><a href="expressions.html#cb157-6" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb157-7"><a href="expressions.html#cb157-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; foo(y = 1)</span></span></code></pre></div>
<p><strong>Q6.</strong> Construct the expression <code>if(x &gt; 1) "a" else "b"</code> using multiple calls to <code>call2()</code>. How does the code structure reflect the structure of the AST?</p>
<p><strong>A6.</strong> Using multiple calls to construct the required expression:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="expressions.html#cb158-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb158-2"><a href="expressions.html#cb158-2" aria-hidden="true" tabindex="-1"></a>call_obj1 <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">call2</span>(<span class="st">&quot;&gt;&quot;</span>, <span class="fu">expr</span>(x), <span class="dv">1</span>)</span>
<span id="cb158-3"><a href="expressions.html#cb158-3" aria-hidden="true" tabindex="-1"></a>call_obj1</span>
<span id="cb158-4"><a href="expressions.html#cb158-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; x &gt; 1</span></span>
<span id="cb158-5"><a href="expressions.html#cb158-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-6"><a href="expressions.html#cb158-6" aria-hidden="true" tabindex="-1"></a>call_obj2 <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">call2</span>(<span class="st">&quot;if&quot;</span>, <span class="at">cond =</span> call_obj1, <span class="at">cons.expr =</span> <span class="st">&quot;a&quot;</span>, <span class="at">alt.expr =</span> <span class="st">&quot;b&quot;</span>)</span>
<span id="cb158-7"><a href="expressions.html#cb158-7" aria-hidden="true" tabindex="-1"></a>call_obj2</span>
<span id="cb158-8"><a href="expressions.html#cb158-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; if (x &gt; 1) &quot;a&quot; else &quot;b&quot;</span></span></code></pre></div>
<p>This construction follows from the prefix form of this expression, revealed by its AST:</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="expressions.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="st">&quot;a&quot;</span> <span class="cf">else</span> <span class="st">&quot;b&quot;</span>)</span>
<span id="cb159-2"><a href="expressions.html#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`if` </span></span>
<span id="cb159-3"><a href="expressions.html#cb159-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-o-`&gt;` </span></span>
<span id="cb159-4"><a href="expressions.html#cb159-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; | +-x </span></span>
<span id="cb159-5"><a href="expressions.html#cb159-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; | \-1 </span></span>
<span id="cb159-6"><a href="expressions.html#cb159-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-&quot;a&quot; </span></span>
<span id="cb159-7"><a href="expressions.html#cb159-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-&quot;b&quot;</span></span></code></pre></div>
</div>
<div id="exercises-18.4.4" class="section level2" number="18.3">
<h2><span class="header-section-number">18.3</span> Exercises 18.4.4</h2>
<p><strong>Q1.</strong> R uses parentheses in two slightly different ways as illustrated by these two calls:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="expressions.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>((<span class="dv">1</span>))</span>
<span id="cb160-2"><a href="expressions.html#cb160-2" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">(</span><span class="st">`</span>(<span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span>)</span></code></pre></div>
<p>Compare and contrast the two uses by referencing the AST.</p>
<p><strong>A1.</strong> Let’s first have a look at the AST:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="expressions.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="fu">f</span>((<span class="dv">1</span>)))</span>
<span id="cb161-2"><a href="expressions.html#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-f </span></span>
<span id="cb161-3"><a href="expressions.html#cb161-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-o-`(` </span></span>
<span id="cb161-4"><a href="expressions.html#cb161-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   \-1</span></span>
<span id="cb161-5"><a href="expressions.html#cb161-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="st">`</span><span class="at">(</span><span class="st">`</span>(<span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb161-6"><a href="expressions.html#cb161-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`(` </span></span>
<span id="cb161-7"><a href="expressions.html#cb161-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-o-`+` </span></span>
<span id="cb161-8"><a href="expressions.html#cb161-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   +-1 </span></span>
<span id="cb161-9"><a href="expressions.html#cb161-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   \-1</span></span></code></pre></div>
<p>As, you can see <code>(</code> is being used in two separate ways:</p>
<ul>
<li>As a function in its own right <code>"`(`"</code></li>
<li>As part of the prefix syntax (<code>f()</code>)</li>
</ul>
<p>This is why, in the AST for <code>f((1))</code>, we see only one <code>"`(`"</code> (the first use case), and not for <code>f()</code>, which is part of the function syntax (the second use case).</p>
<p><strong>Q2.</strong> <code>=</code> can also be used in two ways. Construct a simple example that shows both uses.</p>
<p><strong>A2.</strong> Here is a simple example illustrating how <code>=</code> can also be used in two ways:</p>
<ul>
<li>for assignment</li>
<li>for named arguments in function calls</li>
</ul>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="expressions.html#cb162-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="at">x =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>We can also have a look at its AST:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="expressions.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>({</span>
<span id="cb163-2"><a href="expressions.html#cb163-2" aria-hidden="true" tabindex="-1"></a>  m <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="at">x =</span> <span class="dv">1</span>)</span>
<span id="cb163-3"><a href="expressions.html#cb163-3" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb163-4"><a href="expressions.html#cb163-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`{` </span></span>
<span id="cb163-5"><a href="expressions.html#cb163-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-o-`&lt;-` </span></span>
<span id="cb163-6"><a href="expressions.html#cb163-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   +-m </span></span>
<span id="cb163-7"><a href="expressions.html#cb163-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   \-o-mean </span></span>
<span id="cb163-8"><a href="expressions.html#cb163-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     \-x = 1</span></span></code></pre></div>
<p><strong>Q3.</strong> Does <code>-2^2</code> yield 4 or -4? Why?</p>
<p><strong>A3.</strong> The expression <code>-2^2</code> evaluates to -4 because the operator <code>^</code> has higher precedence than the unary <code>-</code> operator:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="expressions.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="dv">2</span><span class="sc">^</span><span class="dv">2</span></span>
<span id="cb164-2"><a href="expressions.html#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -4</span></span></code></pre></div>
<p>The same can also be seen by its AST:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="expressions.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="sc">-</span><span class="dv">2</span><span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb165-2"><a href="expressions.html#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`-` </span></span>
<span id="cb165-3"><a href="expressions.html#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-o-`^` </span></span>
<span id="cb165-4"><a href="expressions.html#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   +-2 </span></span>
<span id="cb165-5"><a href="expressions.html#cb165-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   \-2</span></span></code></pre></div>
<p>A less confusing way to write this would be:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="expressions.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span>(<span class="dv">2</span><span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb166-2"><a href="expressions.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -4</span></span></code></pre></div>
<p><strong>Q4.</strong> What does <code>!1 + !1</code> return? Why?</p>
<p><strong>A3.</strong> The expression <code>!1 + !1</code> evaluates to FALSE.</p>
<p>This is because the <code>!</code> operator has higher precedence than the unary <code>+</code> operator. Thus, <code>!1</code> evaluates to <code>FALSE</code>, which is added to <code>1 + FALSE</code>, which evaluates to <code>1</code>, and then logically negated to <code>!1</code>, or <code>FALSE</code>.</p>
<p>This can be easily seen by its AST:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="expressions.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(<span class="sc">!</span><span class="dv">1</span> <span class="sc">+</span> <span class="sc">!</span><span class="dv">1</span>)</span>
<span id="cb167-2"><a href="expressions.html#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`!` </span></span>
<span id="cb167-3"><a href="expressions.html#cb167-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-o-`+` </span></span>
<span id="cb167-4"><a href="expressions.html#cb167-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   +-1 </span></span>
<span id="cb167-5"><a href="expressions.html#cb167-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   \-o-`!` </span></span>
<span id="cb167-6"><a href="expressions.html#cb167-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     \-1</span></span></code></pre></div>
<p><strong>Q5.</strong> Why does <code>x1 &lt;- x2 &lt;- x3 &lt;- 0</code> work? Describe the two reasons.</p>
<p><strong>A5.</strong> There are two reasons why the following works as expected:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="expressions.html#cb168-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> x2 <span class="ot">&lt;-</span> x3 <span class="ot">&lt;-</span> <span class="dv">0</span></span></code></pre></div>
<ul>
<li>The <code>&lt;-</code> operator is right associative.</li>
</ul>
<p>Therefore, the order of assignment here is:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="expressions.html#cb169-1" aria-hidden="true" tabindex="-1"></a>(x3 <span class="ot">&lt;-</span> <span class="dv">0</span>)</span>
<span id="cb169-2"><a href="expressions.html#cb169-2" aria-hidden="true" tabindex="-1"></a>(x2 <span class="ot">&lt;-</span> x3)</span>
<span id="cb169-3"><a href="expressions.html#cb169-3" aria-hidden="true" tabindex="-1"></a>(x1 <span class="ot">&lt;-</span> x2)</span></code></pre></div>
<ul>
<li>The <code>&lt;-</code> operator invisibly returns the assigned value.</li>
</ul>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="expressions.html#cb170-1" aria-hidden="true" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="dv">1</span>)</span>
<span id="cb170-2"><a href="expressions.html#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<p>This is easy to surmise from its AST:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="expressions.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(x1 <span class="ot">&lt;-</span> x2 <span class="ot">&lt;-</span> x3 <span class="ot">&lt;-</span> <span class="dv">0</span>)</span>
<span id="cb171-2"><a href="expressions.html#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`&lt;-` </span></span>
<span id="cb171-3"><a href="expressions.html#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-x1 </span></span>
<span id="cb171-4"><a href="expressions.html#cb171-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-o-`&lt;-` </span></span>
<span id="cb171-5"><a href="expressions.html#cb171-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   +-x2 </span></span>
<span id="cb171-6"><a href="expressions.html#cb171-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   \-o-`&lt;-` </span></span>
<span id="cb171-7"><a href="expressions.html#cb171-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     +-x3 </span></span>
<span id="cb171-8"><a href="expressions.html#cb171-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     \-0</span></span></code></pre></div>
<p><strong>Q6.</strong> Compare the ASTs of <code>x + y %+% z</code> and <code>x ^ y %+% z</code>. What have you learned about the precedence of custom infix functions?</p>
<p><strong>A6.</strong> Looking at the ASTs for these expressions,</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="expressions.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(x <span class="sc">+</span> y <span class="sc">%+%</span> z)</span>
<span id="cb172-2"><a href="expressions.html#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`+` </span></span>
<span id="cb172-3"><a href="expressions.html#cb172-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-x </span></span>
<span id="cb172-4"><a href="expressions.html#cb172-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-o-`%+%` </span></span>
<span id="cb172-5"><a href="expressions.html#cb172-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   +-y </span></span>
<span id="cb172-6"><a href="expressions.html#cb172-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   \-z</span></span>
<span id="cb172-7"><a href="expressions.html#cb172-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-8"><a href="expressions.html#cb172-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ast</span>(x<span class="sc">^</span>y <span class="sc">%+%</span> z)</span>
<span id="cb172-9"><a href="expressions.html#cb172-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; o-`%+%` </span></span>
<span id="cb172-10"><a href="expressions.html#cb172-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; +-o-`^` </span></span>
<span id="cb172-11"><a href="expressions.html#cb172-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; | +-x </span></span>
<span id="cb172-12"><a href="expressions.html#cb172-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; | \-y </span></span>
<span id="cb172-13"><a href="expressions.html#cb172-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; \-z</span></span></code></pre></div>
<p>we can say that the custom infix operator <code>%+%</code> has:</p>
<ul>
<li>higher precedence than the <code>+</code> operator</li>
<li>lower precedence than the <code>^</code> operator</li>
</ul>
<p><strong>Q7.</strong> What happens if you call <code>parse_expr()</code> with a string that generates multiple expressions? e.g. <code>parse_expr("x + 1; y + 1")</code></p>
<p><strong>A7.</strong> It produced an error:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="expressions.html#cb173-1" aria-hidden="true" tabindex="-1"></a>rlang<span class="sc">::</span><span class="fu">parse_expr</span>(<span class="st">&quot;x + 1; y + 1&quot;</span>)</span>
<span id="cb173-2"><a href="expressions.html#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in `rlang::parse_expr()`:</span></span>
<span id="cb173-3"><a href="expressions.html#cb173-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ! `x` must contain exactly 1 expression, not 2.</span></span></code></pre></div>
<p>This is expected based on the docs:</p>
<blockquote>
<p>parse_expr() returns one expression. If the text contains more than one expression (separated by semicolons or new lines), an error is issued.</p>
</blockquote>
<p>We instead need to use <code>rlang::parse_exprs()</code>:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="expressions.html#cb174-1" aria-hidden="true" tabindex="-1"></a>rlang<span class="sc">::</span><span class="fu">parse_exprs</span>(<span class="st">&quot;x + 1; y + 1&quot;</span>)</span>
<span id="cb174-2"><a href="expressions.html#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb174-3"><a href="expressions.html#cb174-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; x + 1</span></span>
<span id="cb174-4"><a href="expressions.html#cb174-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb174-5"><a href="expressions.html#cb174-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb174-6"><a href="expressions.html#cb174-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; y + 1</span></span></code></pre></div>
<p><strong>Q8.</strong> What happens if you attempt to parse an invalid expression? e.g. <code>"a +"</code> or <code>"f())"</code>.</p>
<p><strong>A8.</strong> An invalid expression produces an error:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="expressions.html#cb175-1" aria-hidden="true" tabindex="-1"></a>rlang<span class="sc">::</span><span class="fu">parse_expr</span>(<span class="st">&quot;a +&quot;</span>)</span>
<span id="cb175-2"><a href="expressions.html#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in parse(text = elt): &lt;text&gt;:2:0: unexpected end of input</span></span>
<span id="cb175-3"><a href="expressions.html#cb175-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: a +</span></span>
<span id="cb175-4"><a href="expressions.html#cb175-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ^</span></span>
<span id="cb175-5"><a href="expressions.html#cb175-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-6"><a href="expressions.html#cb175-6" aria-hidden="true" tabindex="-1"></a>rlang<span class="sc">::</span><span class="fu">parse_expr</span>(<span class="st">&quot;f())&quot;</span>)</span>
<span id="cb175-7"><a href="expressions.html#cb175-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in parse(text = elt): &lt;text&gt;:1:4: unexpected &#39;)&#39;</span></span>
<span id="cb175-8"><a href="expressions.html#cb175-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: f())</span></span>
<span id="cb175-9"><a href="expressions.html#cb175-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        ^</span></span></code></pre></div>
<p>Since the underlying <code>parse()</code> function produces an error:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="expressions.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parse</span>(<span class="at">text =</span> <span class="st">&quot;a +&quot;</span>)</span>
<span id="cb176-2"><a href="expressions.html#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in parse(text = &quot;a +&quot;): &lt;text&gt;:2:0: unexpected end of input</span></span>
<span id="cb176-3"><a href="expressions.html#cb176-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: a +</span></span>
<span id="cb176-4"><a href="expressions.html#cb176-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ^</span></span>
<span id="cb176-5"><a href="expressions.html#cb176-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-6"><a href="expressions.html#cb176-6" aria-hidden="true" tabindex="-1"></a><span class="fu">parse</span>(<span class="at">text =</span> <span class="st">&quot;f())&quot;</span>)</span>
<span id="cb176-7"><a href="expressions.html#cb176-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in parse(text = &quot;f())&quot;): &lt;text&gt;:1:4: unexpected &#39;)&#39;</span></span>
<span id="cb176-8"><a href="expressions.html#cb176-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: f())</span></span>
<span id="cb176-9"><a href="expressions.html#cb176-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        ^</span></span></code></pre></div>
<p><strong>Q9.</strong> <code>deparse()</code> produces vectors when the input is long. For example, the following call produces a vector of length two:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="expressions.html#cb177-1" aria-hidden="true" tabindex="-1"></a>expr <span class="ot">&lt;-</span> <span class="fu">expr</span>(<span class="fu">g</span>(a <span class="sc">+</span> b <span class="sc">+</span> c <span class="sc">+</span> d <span class="sc">+</span> e <span class="sc">+</span> f <span class="sc">+</span> g <span class="sc">+</span> h <span class="sc">+</span> i <span class="sc">+</span> j <span class="sc">+</span> k <span class="sc">+</span> l <span class="sc">+</span></span>
<span id="cb177-2"><a href="expressions.html#cb177-2" aria-hidden="true" tabindex="-1"></a>  m <span class="sc">+</span> n <span class="sc">+</span> o <span class="sc">+</span> p <span class="sc">+</span> q <span class="sc">+</span> r <span class="sc">+</span> s <span class="sc">+</span> t <span class="sc">+</span> u <span class="sc">+</span> v <span class="sc">+</span> w <span class="sc">+</span> x <span class="sc">+</span> y <span class="sc">+</span> z))</span>
<span id="cb177-3"><a href="expressions.html#cb177-3" aria-hidden="true" tabindex="-1"></a><span class="fu">deparse</span>(expr)</span></code></pre></div>
<p>What does <code>expr_text()</code> do instead?</p>
<p><strong>A9.</strong> The only difference between <code>deparse()</code> and <code>expr_text()</code> is that the latter turns the (possibly multi-line) expression into a single string.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="expressions.html#cb178-1" aria-hidden="true" tabindex="-1"></a>expr <span class="ot">&lt;-</span> rlang<span class="sc">::</span><span class="fu">expr</span>(<span class="fu">g</span>(a <span class="sc">+</span> b <span class="sc">+</span> c <span class="sc">+</span> d <span class="sc">+</span> e <span class="sc">+</span> f <span class="sc">+</span> g <span class="sc">+</span> h <span class="sc">+</span> i <span class="sc">+</span> j <span class="sc">+</span> k <span class="sc">+</span> l <span class="sc">+</span></span>
<span id="cb178-2"><a href="expressions.html#cb178-2" aria-hidden="true" tabindex="-1"></a>  m <span class="sc">+</span> n <span class="sc">+</span> o <span class="sc">+</span> p <span class="sc">+</span> q <span class="sc">+</span> r <span class="sc">+</span> s <span class="sc">+</span> t <span class="sc">+</span> u <span class="sc">+</span> v <span class="sc">+</span> w <span class="sc">+</span> x <span class="sc">+</span> y <span class="sc">+</span> z))</span>
<span id="cb178-3"><a href="expressions.html#cb178-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-4"><a href="expressions.html#cb178-4" aria-hidden="true" tabindex="-1"></a><span class="fu">deparse</span>(expr)</span>
<span id="cb178-5"><a href="expressions.html#cb178-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;g(a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + &quot;</span></span>
<span id="cb178-6"><a href="expressions.html#cb178-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2] &quot;    p + q + r + s + t + u + v + w + x + y + z)&quot;</span></span>
<span id="cb178-7"><a href="expressions.html#cb178-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-8"><a href="expressions.html#cb178-8" aria-hidden="true" tabindex="-1"></a>rlang<span class="sc">::</span><span class="fu">expr_text</span>(expr)</span>
<span id="cb178-9"><a href="expressions.html#cb178-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;g(a + b + c + d + e + f + g + h + i + j + k + l + m + n + o + \n    p + q + r + s + t + u + v + w + x + y + z)&quot;</span></span></code></pre></div>
<p><strong>Q10.</strong> <code>pairwise.t.test()</code> assumes that <code>deparse()</code> always returns a length one character vector. Can you construct an input that violates this expectation? What happens?</p>
<p><strong>A10</strong> Since R 4.0, it is not possible to violate this expectation since the new implementation produces a single string no matter the input:</p>
<blockquote>
<p>New function <code>deparse1()</code> produces one string, wrapping <code>deparse()</code>, to be used typically in <code>deparse1(substitute(*))</code></p>
</blockquote>
</div>
<div id="exercises-18.5.3" class="section level2" number="18.4">
<h2><span class="header-section-number">18.4</span> Exercises 18.5.3</h2>
<p><strong>Q1.</strong> <code>logical_abbr()</code> returns <code>TRUE</code> for <code>T(1, 2, 3)</code>. How could you modify <code>logical_abbr_rec()</code> so that it ignores function calls that use <code>T</code> or <code>F</code>?</p>
<p><strong>A1.</strong> To avoid function calls that use <code>T</code> or <code>F</code>, we just need to ignore the function position in call objects:</p>
<p>Let’s try it out:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="expressions.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">logical_abbr_rec</span>(<span class="fu">expr</span>(<span class="fu">T</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)))</span>
<span id="cb179-2"><a href="expressions.html#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb179-3"><a href="expressions.html#cb179-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-4"><a href="expressions.html#cb179-4" aria-hidden="true" tabindex="-1"></a><span class="fu">logical_abbr_rec</span>(<span class="fu">expr</span>(<span class="fu">F</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)))</span>
<span id="cb179-5"><a href="expressions.html#cb179-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb179-6"><a href="expressions.html#cb179-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-7"><a href="expressions.html#cb179-7" aria-hidden="true" tabindex="-1"></a><span class="fu">logical_abbr_rec</span>(<span class="fu">expr</span>(T))</span>
<span id="cb179-8"><a href="expressions.html#cb179-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb179-9"><a href="expressions.html#cb179-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-10"><a href="expressions.html#cb179-10" aria-hidden="true" tabindex="-1"></a><span class="fu">logical_abbr_rec</span>(<span class="fu">expr</span>(F))</span>
<span id="cb179-11"><a href="expressions.html#cb179-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p><strong>Q2.</strong> <code>logical_abbr()</code> works with expressions. It currently fails when you give it a function. Why? How could you modify <code>logical_abbr()</code> to make it work? What components of a function will you need to recurse over?</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="expressions.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">logical_abbr</span>(<span class="cf">function</span>(<span class="at">x =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb180-2"><a href="expressions.html#cb180-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">g</span>(x <span class="sc">+</span> T)</span>
<span id="cb180-3"><a href="expressions.html#cb180-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p><strong>A2.</strong> Surprisingly, <code>logical_abbr()</code> currently doesn’t fail with closures:</p>
<p>To see why, let’s see what type of object is produced when we capture user provided closure:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="expressions.html#cb181-1" aria-hidden="true" tabindex="-1"></a>print_enexpr <span class="ot">&lt;-</span> <span class="cf">function</span>(.f) {</span>
<span id="cb181-2"><a href="expressions.html#cb181-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">typeof</span>(rlang<span class="sc">::</span><span class="fu">enexpr</span>(.f)))</span>
<span id="cb181-3"><a href="expressions.html#cb181-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">is.call</span>(rlang<span class="sc">::</span><span class="fu">enexpr</span>(.f)))</span>
<span id="cb181-4"><a href="expressions.html#cb181-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb181-5"><a href="expressions.html#cb181-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-6"><a href="expressions.html#cb181-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print_enexpr</span>(<span class="cf">function</span>(<span class="at">x =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb181-7"><a href="expressions.html#cb181-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">g</span>(x <span class="sc">+</span> T)</span>
<span id="cb181-8"><a href="expressions.html#cb181-8" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb181-9"><a href="expressions.html#cb181-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;language&quot;</span></span>
<span id="cb181-10"><a href="expressions.html#cb181-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>Given that closures are converted to <code>call</code> objects, it is not a surprise that the function works:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="expressions.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">logical_abbr</span>(<span class="cf">function</span>(<span class="at">x =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb182-2"><a href="expressions.html#cb182-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">g</span>(x <span class="sc">+</span> T)</span>
<span id="cb182-3"><a href="expressions.html#cb182-3" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb182-4"><a href="expressions.html#cb182-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>The function only fails if it can’t find any negative case. For example, instead of returning <code>FALSE</code>, this produces an error for reasons that remain (as of yet) elusive to me:</p>
<!-- TODO -->
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="expressions.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">logical_abbr</span>(<span class="cf">function</span>(<span class="at">x =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb183-2"><a href="expressions.html#cb183-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">g</span>(x <span class="sc">+</span> <span class="cn">TRUE</span>)</span>
<span id="cb183-3"><a href="expressions.html#cb183-3" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb183-4"><a href="expressions.html#cb183-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: Don&#39;t know how to handle type integer</span></span></code></pre></div>
<p><strong>Q3.</strong> Modify <code>find_assign</code> to also detect assignment using replacement functions, i.e. <code>names(x) &lt;- y</code>.</p>
<p><strong>A3.</strong> Although both simple assignment (<code>x &lt;- y</code>) and assignment using replacement functions (<code>names(x) &lt;- y</code>) have <code>&lt;-</code> operator in their call, in the latter case, <code>names(x)</code> will be a call object and not a symbol:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="expressions.html#cb184-1" aria-hidden="true" tabindex="-1"></a>expr1 <span class="ot">&lt;-</span> <span class="fu">expr</span>(<span class="fu">names</span>(x) <span class="ot">&lt;-</span> y)</span>
<span id="cb184-2"><a href="expressions.html#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.list</span>(expr1)</span>
<span id="cb184-3"><a href="expressions.html#cb184-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb184-4"><a href="expressions.html#cb184-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; `&lt;-`</span></span>
<span id="cb184-5"><a href="expressions.html#cb184-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb184-6"><a href="expressions.html#cb184-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb184-7"><a href="expressions.html#cb184-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; names(x)</span></span>
<span id="cb184-8"><a href="expressions.html#cb184-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb184-9"><a href="expressions.html#cb184-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb184-10"><a href="expressions.html#cb184-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; y</span></span>
<span id="cb184-11"><a href="expressions.html#cb184-11" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(expr1[[<span class="dv">2</span>]])</span>
<span id="cb184-12"><a href="expressions.html#cb184-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;language&quot;</span></span>
<span id="cb184-13"><a href="expressions.html#cb184-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-14"><a href="expressions.html#cb184-14" aria-hidden="true" tabindex="-1"></a>expr2 <span class="ot">&lt;-</span> <span class="fu">expr</span>(x <span class="ot">&lt;-</span> y)</span>
<span id="cb184-15"><a href="expressions.html#cb184-15" aria-hidden="true" tabindex="-1"></a><span class="fu">as.list</span>(expr2)</span>
<span id="cb184-16"><a href="expressions.html#cb184-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb184-17"><a href="expressions.html#cb184-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; `&lt;-`</span></span>
<span id="cb184-18"><a href="expressions.html#cb184-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb184-19"><a href="expressions.html#cb184-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb184-20"><a href="expressions.html#cb184-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; x</span></span>
<span id="cb184-21"><a href="expressions.html#cb184-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb184-22"><a href="expressions.html#cb184-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb184-23"><a href="expressions.html#cb184-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; y</span></span>
<span id="cb184-24"><a href="expressions.html#cb184-24" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(expr2[[<span class="dv">2</span>]])</span>
<span id="cb184-25"><a href="expressions.html#cb184-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;symbol&quot;</span></span></code></pre></div>
<p>That’s how we can detect this kind of assignment by checking if the second element of the expression is a <code>symbol</code> or <code>language</code> type object.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="expressions.html#cb185-1" aria-hidden="true" tabindex="-1"></a>expr_type <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb185-2"><a href="expressions.html#cb185-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (rlang<span class="sc">::</span><span class="fu">is_syntactic_literal</span>(x)) {</span>
<span id="cb185-3"><a href="expressions.html#cb185-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;constant&quot;</span></span>
<span id="cb185-4"><a href="expressions.html#cb185-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">is.symbol</span>(x)) {</span>
<span id="cb185-5"><a href="expressions.html#cb185-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;symbol&quot;</span></span>
<span id="cb185-6"><a href="expressions.html#cb185-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">is.call</span>(x)) {</span>
<span id="cb185-7"><a href="expressions.html#cb185-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;call&quot;</span></span>
<span id="cb185-8"><a href="expressions.html#cb185-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">is.pairlist</span>(x)) {</span>
<span id="cb185-9"><a href="expressions.html#cb185-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;pairlist&quot;</span></span>
<span id="cb185-10"><a href="expressions.html#cb185-10" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb185-11"><a href="expressions.html#cb185-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">typeof</span>(x)</span>
<span id="cb185-12"><a href="expressions.html#cb185-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb185-13"><a href="expressions.html#cb185-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb185-14"><a href="expressions.html#cb185-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-15"><a href="expressions.html#cb185-15" aria-hidden="true" tabindex="-1"></a>switch_expr <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb185-16"><a href="expressions.html#cb185-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span>(<span class="fu">expr_type</span>(x),</span>
<span id="cb185-17"><a href="expressions.html#cb185-17" aria-hidden="true" tabindex="-1"></a>    ...,</span>
<span id="cb185-18"><a href="expressions.html#cb185-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;Don&#39;t know how to handle type &quot;</span>, <span class="fu">typeof</span>(x), <span class="at">call. =</span> <span class="cn">FALSE</span>)</span>
<span id="cb185-19"><a href="expressions.html#cb185-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb185-20"><a href="expressions.html#cb185-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb185-21"><a href="expressions.html#cb185-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-22"><a href="expressions.html#cb185-22" aria-hidden="true" tabindex="-1"></a>flat_map_chr <span class="ot">&lt;-</span> <span class="cf">function</span>(.x, .f, ...) {</span>
<span id="cb185-23"><a href="expressions.html#cb185-23" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">flatten_chr</span>(purrr<span class="sc">::</span><span class="fu">map</span>(.x, .f, ...))</span>
<span id="cb185-24"><a href="expressions.html#cb185-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb185-25"><a href="expressions.html#cb185-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-26"><a href="expressions.html#cb185-26" aria-hidden="true" tabindex="-1"></a>extract_symbol <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb185-27"><a href="expressions.html#cb185-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is_symbol</span>(x[[<span class="dv">2</span>]])) {</span>
<span id="cb185-28"><a href="expressions.html#cb185-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as_string</span>(x[[<span class="dv">2</span>]])</span>
<span id="cb185-29"><a href="expressions.html#cb185-29" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb185-30"><a href="expressions.html#cb185-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">extract_symbol</span>(<span class="fu">as.list</span>(x[[<span class="dv">2</span>]]))</span>
<span id="cb185-31"><a href="expressions.html#cb185-31" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb185-32"><a href="expressions.html#cb185-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb185-33"><a href="expressions.html#cb185-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-34"><a href="expressions.html#cb185-34" aria-hidden="true" tabindex="-1"></a>find_assign_call <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb185-35"><a href="expressions.html#cb185-35" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is_call</span>(x, <span class="st">&quot;&lt;-&quot;</span>) <span class="sc">&amp;&amp;</span> <span class="fu">is_symbol</span>(x[[<span class="dv">2</span>]])) {</span>
<span id="cb185-36"><a href="expressions.html#cb185-36" aria-hidden="true" tabindex="-1"></a>    lhs <span class="ot">&lt;-</span> <span class="fu">as_string</span>(x[[<span class="dv">2</span>]])</span>
<span id="cb185-37"><a href="expressions.html#cb185-37" aria-hidden="true" tabindex="-1"></a>    children <span class="ot">&lt;-</span> <span class="fu">as.list</span>(x)[<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb185-38"><a href="expressions.html#cb185-38" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">is_call</span>(x, <span class="st">&quot;&lt;-&quot;</span>) <span class="sc">&amp;&amp;</span> <span class="fu">is_call</span>(x[[<span class="dv">2</span>]])) {</span>
<span id="cb185-39"><a href="expressions.html#cb185-39" aria-hidden="true" tabindex="-1"></a>    lhs <span class="ot">&lt;-</span> <span class="fu">extract_symbol</span>(<span class="fu">as.list</span>(x[[<span class="dv">2</span>]]))</span>
<span id="cb185-40"><a href="expressions.html#cb185-40" aria-hidden="true" tabindex="-1"></a>    children <span class="ot">&lt;-</span> <span class="fu">as.list</span>(x)[<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb185-41"><a href="expressions.html#cb185-41" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb185-42"><a href="expressions.html#cb185-42" aria-hidden="true" tabindex="-1"></a>    lhs <span class="ot">&lt;-</span> <span class="fu">character</span>()</span>
<span id="cb185-43"><a href="expressions.html#cb185-43" aria-hidden="true" tabindex="-1"></a>    children <span class="ot">&lt;-</span> <span class="fu">as.list</span>(x)</span>
<span id="cb185-44"><a href="expressions.html#cb185-44" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb185-45"><a href="expressions.html#cb185-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-46"><a href="expressions.html#cb185-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(lhs, <span class="fu">flat_map_chr</span>(children, find_assign_rec))</span>
<span id="cb185-47"><a href="expressions.html#cb185-47" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb185-48"><a href="expressions.html#cb185-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-49"><a href="expressions.html#cb185-49" aria-hidden="true" tabindex="-1"></a>find_assign_rec <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb185-50"><a href="expressions.html#cb185-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">switch_expr</span>(x,</span>
<span id="cb185-51"><a href="expressions.html#cb185-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Base cases</span></span>
<span id="cb185-52"><a href="expressions.html#cb185-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">constant =</span> ,</span>
<span id="cb185-53"><a href="expressions.html#cb185-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">symbol =</span> <span class="fu">character</span>(),</span>
<span id="cb185-54"><a href="expressions.html#cb185-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-55"><a href="expressions.html#cb185-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Recursive cases</span></span>
<span id="cb185-56"><a href="expressions.html#cb185-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">pairlist =</span> <span class="fu">flat_map_chr</span>(x, find_assign_rec),</span>
<span id="cb185-57"><a href="expressions.html#cb185-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">call =</span> <span class="fu">find_assign_call</span>(x)</span>
<span id="cb185-58"><a href="expressions.html#cb185-58" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb185-59"><a href="expressions.html#cb185-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb185-60"><a href="expressions.html#cb185-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-61"><a href="expressions.html#cb185-61" aria-hidden="true" tabindex="-1"></a>find_assign <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">find_assign_rec</span>(<span class="fu">enexpr</span>(x))</span></code></pre></div>
<p>Let’s try it out:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="expressions.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">find_assign</span>(<span class="fu">names</span>(x))</span>
<span id="cb186-2"><a href="expressions.html#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; character(0)</span></span>
<span id="cb186-3"><a href="expressions.html#cb186-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-4"><a href="expressions.html#cb186-4" aria-hidden="true" tabindex="-1"></a><span class="fu">find_assign</span>(<span class="fu">names</span>(x) <span class="ot">&lt;-</span> y)</span>
<span id="cb186-5"><a href="expressions.html#cb186-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;x&quot;</span></span>
<span id="cb186-6"><a href="expressions.html#cb186-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-7"><a href="expressions.html#cb186-7" aria-hidden="true" tabindex="-1"></a><span class="fu">find_assign</span>(<span class="fu">names</span>(<span class="fu">f</span>(x)) <span class="ot">&lt;-</span> y)</span>
<span id="cb186-8"><a href="expressions.html#cb186-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;x&quot;</span></span>
<span id="cb186-9"><a href="expressions.html#cb186-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-10"><a href="expressions.html#cb186-10" aria-hidden="true" tabindex="-1"></a><span class="fu">find_assign</span>(<span class="fu">names</span>(x) <span class="ot">&lt;-</span> y <span class="ot">&lt;-</span> z <span class="ot">&lt;-</span> <span class="cn">NULL</span>)</span>
<span id="cb186-11"><a href="expressions.html#cb186-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;x&quot; &quot;y&quot; &quot;z&quot;</span></span>
<span id="cb186-12"><a href="expressions.html#cb186-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-13"><a href="expressions.html#cb186-13" aria-hidden="true" tabindex="-1"></a><span class="fu">find_assign</span>(a <span class="ot">&lt;-</span> b <span class="ot">&lt;-</span> c <span class="ot">&lt;-</span> <span class="dv">1</span>)</span>
<span id="cb186-14"><a href="expressions.html#cb186-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></span>
<span id="cb186-15"><a href="expressions.html#cb186-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-16"><a href="expressions.html#cb186-16" aria-hidden="true" tabindex="-1"></a><span class="fu">find_assign</span>(<span class="fu">system.time</span>(x <span class="ot">&lt;-</span> <span class="fu">print</span>(y <span class="ot">&lt;-</span> <span class="dv">5</span>)))</span>
<span id="cb186-17"><a href="expressions.html#cb186-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;x&quot; &quot;y&quot;</span></span></code></pre></div>
<p><strong>Q4.</strong> Write a function that extracts all calls to a specified function.</p>
<p><strong>A4.</strong> Here is a function that extracts all calls to a specified function:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="expressions.html#cb187-1" aria-hidden="true" tabindex="-1"></a>find_function_call <span class="ot">&lt;-</span> <span class="cf">function</span>(x, .f) {</span>
<span id="cb187-2"><a href="expressions.html#cb187-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is_call</span>(x)) {</span>
<span id="cb187-3"><a href="expressions.html#cb187-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">is_call</span>(x, .f)) {</span>
<span id="cb187-4"><a href="expressions.html#cb187-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(x)</span>
<span id="cb187-5"><a href="expressions.html#cb187-5" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb187-6"><a href="expressions.html#cb187-6" aria-hidden="true" tabindex="-1"></a>      purrr<span class="sc">::</span><span class="fu">map</span>(<span class="fu">as.list</span>(x), <span class="sc">~</span> <span class="fu">find_function_call</span>(.x, .f)) <span class="sc">%&gt;%</span></span>
<span id="cb187-7"><a href="expressions.html#cb187-7" aria-hidden="true" tabindex="-1"></a>        purrr<span class="sc">::</span><span class="fu">compact</span>() <span class="sc">%&gt;%</span></span>
<span id="cb187-8"><a href="expressions.html#cb187-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">unlist</span>(<span class="at">use.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb187-9"><a href="expressions.html#cb187-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb187-10"><a href="expressions.html#cb187-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb187-11"><a href="expressions.html#cb187-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb187-12"><a href="expressions.html#cb187-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-13"><a href="expressions.html#cb187-13" aria-hidden="true" tabindex="-1"></a><span class="co"># example-1: with infix operator `:`</span></span>
<span id="cb187-14"><a href="expressions.html#cb187-14" aria-hidden="true" tabindex="-1"></a><span class="fu">find_function_call</span>(<span class="fu">expr</span>(<span class="fu">mean</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)), <span class="st">&quot;:&quot;</span>)</span>
<span id="cb187-15"><a href="expressions.html#cb187-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb187-16"><a href="expressions.html#cb187-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:2</span></span>
<span id="cb187-17"><a href="expressions.html#cb187-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-18"><a href="expressions.html#cb187-18" aria-hidden="true" tabindex="-1"></a><span class="fu">find_function_call</span>(<span class="fu">expr</span>(<span class="fu">sum</span>(<span class="fu">mean</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>))), <span class="st">&quot;:&quot;</span>)</span>
<span id="cb187-19"><a href="expressions.html#cb187-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb187-20"><a href="expressions.html#cb187-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:2</span></span>
<span id="cb187-21"><a href="expressions.html#cb187-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-22"><a href="expressions.html#cb187-22" aria-hidden="true" tabindex="-1"></a><span class="fu">find_function_call</span>(<span class="fu">expr</span>(<span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">9</span>)), <span class="st">&quot;:&quot;</span>)</span>
<span id="cb187-23"><a href="expressions.html#cb187-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb187-24"><a href="expressions.html#cb187-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:5</span></span>
<span id="cb187-25"><a href="expressions.html#cb187-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb187-26"><a href="expressions.html#cb187-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb187-27"><a href="expressions.html#cb187-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:6</span></span>
<span id="cb187-28"><a href="expressions.html#cb187-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb187-29"><a href="expressions.html#cb187-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb187-30"><a href="expressions.html#cb187-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:9</span></span>
<span id="cb187-31"><a href="expressions.html#cb187-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-32"><a href="expressions.html#cb187-32" aria-hidden="true" tabindex="-1"></a><span class="fu">find_function_call</span>(<span class="fu">expr</span>(<span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">sum</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>), <span class="fu">mean</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">9</span>))), <span class="st">&quot;:&quot;</span>)</span>
<span id="cb187-33"><a href="expressions.html#cb187-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb187-34"><a href="expressions.html#cb187-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1:5</span></span>
<span id="cb187-35"><a href="expressions.html#cb187-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb187-36"><a href="expressions.html#cb187-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb187-37"><a href="expressions.html#cb187-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4:6</span></span>
<span id="cb187-38"><a href="expressions.html#cb187-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb187-39"><a href="expressions.html#cb187-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb187-40"><a href="expressions.html#cb187-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3:9</span></span>
<span id="cb187-41"><a href="expressions.html#cb187-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-42"><a href="expressions.html#cb187-42" aria-hidden="true" tabindex="-1"></a><span class="co"># example-2: with assignment operator `&lt;-`</span></span>
<span id="cb187-43"><a href="expressions.html#cb187-43" aria-hidden="true" tabindex="-1"></a><span class="fu">find_function_call</span>(<span class="fu">expr</span>(<span class="fu">names</span>(x)), <span class="st">&quot;&lt;-&quot;</span>)</span>
<span id="cb187-44"><a href="expressions.html#cb187-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb187-45"><a href="expressions.html#cb187-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-46"><a href="expressions.html#cb187-46" aria-hidden="true" tabindex="-1"></a><span class="fu">find_function_call</span>(<span class="fu">expr</span>(<span class="fu">names</span>(x) <span class="ot">&lt;-</span> y), <span class="st">&quot;&lt;-&quot;</span>)</span>
<span id="cb187-47"><a href="expressions.html#cb187-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb187-48"><a href="expressions.html#cb187-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; names(x) &lt;- y</span></span>
<span id="cb187-49"><a href="expressions.html#cb187-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-50"><a href="expressions.html#cb187-50" aria-hidden="true" tabindex="-1"></a><span class="fu">find_function_call</span>(<span class="fu">expr</span>(<span class="fu">names</span>(<span class="fu">f</span>(x)) <span class="ot">&lt;-</span> y), <span class="st">&quot;&lt;-&quot;</span>)</span>
<span id="cb187-51"><a href="expressions.html#cb187-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb187-52"><a href="expressions.html#cb187-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; names(f(x)) &lt;- y</span></span>
<span id="cb187-53"><a href="expressions.html#cb187-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-54"><a href="expressions.html#cb187-54" aria-hidden="true" tabindex="-1"></a><span class="fu">find_function_call</span>(<span class="fu">expr</span>(<span class="fu">names</span>(x) <span class="ot">&lt;-</span> y <span class="ot">&lt;-</span> z <span class="ot">&lt;-</span> <span class="cn">NULL</span>), <span class="st">&quot;&lt;-&quot;</span>)</span>
<span id="cb187-55"><a href="expressions.html#cb187-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb187-56"><a href="expressions.html#cb187-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; names(x) &lt;- y &lt;- z &lt;- NULL</span></span>
<span id="cb187-57"><a href="expressions.html#cb187-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-58"><a href="expressions.html#cb187-58" aria-hidden="true" tabindex="-1"></a><span class="fu">find_function_call</span>(<span class="fu">expr</span>(a <span class="ot">&lt;-</span> b <span class="ot">&lt;-</span> c <span class="ot">&lt;-</span> <span class="dv">1</span>), <span class="st">&quot;&lt;-&quot;</span>)</span>
<span id="cb187-59"><a href="expressions.html#cb187-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb187-60"><a href="expressions.html#cb187-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; a &lt;- b &lt;- c &lt;- 1</span></span>
<span id="cb187-61"><a href="expressions.html#cb187-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-62"><a href="expressions.html#cb187-62" aria-hidden="true" tabindex="-1"></a><span class="fu">find_function_call</span>(<span class="fu">expr</span>(<span class="fu">system.time</span>(x <span class="ot">&lt;-</span> <span class="fu">print</span>(y <span class="ot">&lt;-</span> <span class="dv">5</span>))), <span class="st">&quot;&lt;-&quot;</span>)</span>
<span id="cb187-63"><a href="expressions.html#cb187-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb187-64"><a href="expressions.html#cb187-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; x &lt;- print(y &lt;- 5)</span></span></code></pre></div>
</div>
<div id="session-information-13" class="section level2" number="18.5">
<h2><span class="header-section-number">18.5</span> Session information</h2>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="expressions.html#cb188-1" aria-hidden="true" tabindex="-1"></a>sessioninfo<span class="sc">::</span><span class="fu">session_info</span>(<span class="at">include_base =</span> <span class="cn">TRUE</span>)</span>
<span id="cb188-2"><a href="expressions.html#cb188-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - Session info -------------------------------------------</span></span>
<span id="cb188-3"><a href="expressions.html#cb188-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  setting  value</span></span>
<span id="cb188-4"><a href="expressions.html#cb188-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  version  R version 4.1.3 (2022-03-10)</span></span>
<span id="cb188-5"><a href="expressions.html#cb188-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  os       Windows 10 x64 (build 22000)</span></span>
<span id="cb188-6"><a href="expressions.html#cb188-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  system   x86_64, mingw32</span></span>
<span id="cb188-7"><a href="expressions.html#cb188-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  ui       RTerm</span></span>
<span id="cb188-8"><a href="expressions.html#cb188-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  language (EN)</span></span>
<span id="cb188-9"><a href="expressions.html#cb188-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  collate  English_United Kingdom.1252</span></span>
<span id="cb188-10"><a href="expressions.html#cb188-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  ctype    English_United Kingdom.1252</span></span>
<span id="cb188-11"><a href="expressions.html#cb188-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  tz       Europe/Berlin</span></span>
<span id="cb188-12"><a href="expressions.html#cb188-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  date     2022-08-21</span></span>
<span id="cb188-13"><a href="expressions.html#cb188-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  pandoc   2.19 @ C:/PROGRA~1/Pandoc/ (via rmarkdown)</span></span>
<span id="cb188-14"><a href="expressions.html#cb188-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb188-15"><a href="expressions.html#cb188-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - Packages -----------------------------------------------</span></span>
<span id="cb188-16"><a href="expressions.html#cb188-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  ! package     * version    date (UTC) lib source</span></span>
<span id="cb188-17"><a href="expressions.html#cb188-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    base        * 4.1.3      2022-03-10 [?] local</span></span>
<span id="cb188-18"><a href="expressions.html#cb188-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    bookdown      0.28       2022-08-09 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-19"><a href="expressions.html#cb188-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    bslib         0.4.0      2022-07-16 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-20"><a href="expressions.html#cb188-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    cachem        1.0.6      2021-08-19 [1] CRAN (R 4.1.1)</span></span>
<span id="cb188-21"><a href="expressions.html#cb188-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    cli           3.3.0      2022-04-25 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-22"><a href="expressions.html#cb188-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P compiler      4.1.3      2022-03-10 [2] local</span></span>
<span id="cb188-23"><a href="expressions.html#cb188-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    crayon        1.5.1      2022-03-26 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-24"><a href="expressions.html#cb188-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P datasets    * 4.1.3      2022-03-10 [2] local</span></span>
<span id="cb188-25"><a href="expressions.html#cb188-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    digest        0.6.29     2021-12-01 [1] CRAN (R 4.1.2)</span></span>
<span id="cb188-26"><a href="expressions.html#cb188-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    downlit       0.4.2      2022-07-05 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-27"><a href="expressions.html#cb188-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    evaluate      0.16       2022-08-09 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-28"><a href="expressions.html#cb188-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fansi         1.0.3      2022-03-24 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-29"><a href="expressions.html#cb188-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fastmap       1.1.0      2021-01-25 [1] CRAN (R 4.1.1)</span></span>
<span id="cb188-30"><a href="expressions.html#cb188-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    fs            1.5.2      2021-12-08 [1] CRAN (R 4.1.2)</span></span>
<span id="cb188-31"><a href="expressions.html#cb188-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    glue          1.6.2      2022-02-24 [1] CRAN (R 4.1.2)</span></span>
<span id="cb188-32"><a href="expressions.html#cb188-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P graphics    * 4.1.3      2022-03-10 [2] local</span></span>
<span id="cb188-33"><a href="expressions.html#cb188-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P grDevices   * 4.1.3      2022-03-10 [2] local</span></span>
<span id="cb188-34"><a href="expressions.html#cb188-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    htmltools     0.5.3      2022-07-18 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-35"><a href="expressions.html#cb188-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    jquerylib     0.1.4      2021-04-26 [1] CRAN (R 4.1.1)</span></span>
<span id="cb188-36"><a href="expressions.html#cb188-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    jsonlite      1.8.0      2022-02-22 [1] CRAN (R 4.1.2)</span></span>
<span id="cb188-37"><a href="expressions.html#cb188-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    knitr         1.39.9     2022-08-18 [1] Github (yihui/knitr@9e36e9c)</span></span>
<span id="cb188-38"><a href="expressions.html#cb188-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    lifecycle     1.0.1      2021-09-24 [1] CRAN (R 4.1.1)</span></span>
<span id="cb188-39"><a href="expressions.html#cb188-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    lobstr      * 1.1.2      2022-06-22 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-40"><a href="expressions.html#cb188-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    magrittr    * 2.0.3      2022-03-30 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-41"><a href="expressions.html#cb188-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    memoise       2.0.1      2021-11-26 [1] CRAN (R 4.1.2)</span></span>
<span id="cb188-42"><a href="expressions.html#cb188-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P methods     * 4.1.3      2022-03-10 [2] local</span></span>
<span id="cb188-43"><a href="expressions.html#cb188-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    pillar        1.8.1      2022-08-19 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-44"><a href="expressions.html#cb188-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    purrr         0.3.4      2020-04-17 [1] CRAN (R 4.1.1)</span></span>
<span id="cb188-45"><a href="expressions.html#cb188-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    R6            2.5.1.9000 2022-08-04 [1] Github (r-lib/R6@87d5e45)</span></span>
<span id="cb188-46"><a href="expressions.html#cb188-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    rlang       * 1.0.4      2022-07-12 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-47"><a href="expressions.html#cb188-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    rmarkdown     2.15.1     2022-08-18 [1] Github (rstudio/rmarkdown@b86f18b)</span></span>
<span id="cb188-48"><a href="expressions.html#cb188-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    rstudioapi    0.13       2020-11-12 [1] CRAN (R 4.1.1)</span></span>
<span id="cb188-49"><a href="expressions.html#cb188-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    sass          0.4.2      2022-07-16 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-50"><a href="expressions.html#cb188-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    sessioninfo   1.2.2      2021-12-06 [1] CRAN (R 4.1.2)</span></span>
<span id="cb188-51"><a href="expressions.html#cb188-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P stats       * 4.1.3      2022-03-10 [2] local</span></span>
<span id="cb188-52"><a href="expressions.html#cb188-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    stringi       1.7.8      2022-07-11 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-53"><a href="expressions.html#cb188-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    stringr       1.4.1      2022-08-20 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-54"><a href="expressions.html#cb188-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P tools         4.1.3      2022-03-10 [2] local</span></span>
<span id="cb188-55"><a href="expressions.html#cb188-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    utf8          1.2.2      2021-07-24 [1] CRAN (R 4.1.1)</span></span>
<span id="cb188-56"><a href="expressions.html#cb188-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P utils       * 4.1.3      2022-03-10 [2] local</span></span>
<span id="cb188-57"><a href="expressions.html#cb188-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    vctrs         0.4.1      2022-04-13 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-58"><a href="expressions.html#cb188-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    winch         0.0.8      2022-03-17 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-59"><a href="expressions.html#cb188-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    withr         2.5.0      2022-03-03 [1] CRAN (R 4.1.2)</span></span>
<span id="cb188-60"><a href="expressions.html#cb188-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    xfun          0.32       2022-08-10 [1] CRAN (R 4.1.3)</span></span>
<span id="cb188-61"><a href="expressions.html#cb188-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    xml2          1.3.3      2021-11-30 [1] CRAN (R 4.1.2)</span></span>
<span id="cb188-62"><a href="expressions.html#cb188-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    yaml          2.3.5      2022-02-21 [1] CRAN (R 4.1.2)</span></span>
<span id="cb188-63"><a href="expressions.html#cb188-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb188-64"><a href="expressions.html#cb188-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] C:/Users/IndrajeetPatil/Documents/R/win-library/4.1</span></span>
<span id="cb188-65"><a href="expressions.html#cb188-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2] C:/Program Files/R/R-4.1.3/library</span></span>
<span id="cb188-66"><a href="expressions.html#cb188-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb188-67"><a href="expressions.html#cb188-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  P -- Loaded and on-disk path mismatch.</span></span>
<span id="cb188-68"><a href="expressions.html#cb188-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb188-69"><a href="expressions.html#cb188-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ----------------------------------------------------------</span></span></code></pre></div>

</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Advanced R Exercises</strong>" was written by <a class="text-light" href="https://sites.google.com/site/indrajeetspatilmorality/">Indrajeet Patil</a>. It was last built on 2022-08-20.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


</body>

</html>
