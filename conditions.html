<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 8 Conditions | Advanced R Exercises</title>
<meta name="author" content="Indrajeet Patil">
<meta name="description" content="Attaching the needed libraries: library(rlang, warn.conflicts = FALSE) library(testthat, warn.conflicts = FALSE)  8.1 Signalling conditions (Exercises 8.2.4) Q1. Write a wrapper around...">
<meta name="generator" content="bookdown 0.36 with bs4_book()">
<meta property="og:title" content="Chapter 8 Conditions | Advanced R Exercises">
<meta property="og:type" content="book">
<meta property="og:url" content="https://bookdown.org/IndrajeetPatil/Advanced-R-exercises/conditions.html">
<meta property="og:image" content="https://bookdown.org/IndrajeetPatil/Advanced-R-exercises/cover.png">
<meta property="og:description" content="Attaching the needed libraries: library(rlang, warn.conflicts = FALSE) library(testthat, warn.conflicts = FALSE)  8.1 Signalling conditions (Exercises 8.2.4) Q1. Write a wrapper around...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 8 Conditions | Advanced R Exercises">
<meta name="twitter:description" content="Attaching the needed libraries: library(rlang, warn.conflicts = FALSE) library(testthat, warn.conflicts = FALSE)  8.1 Signalling conditions (Exercises 8.2.4) Q1. Write a wrapper around...">
<meta name="twitter:image" content="https://bookdown.org/IndrajeetPatil/Advanced-R-exercises/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Roboto-0.4.7/font.css" rel="stylesheet">
<link href="libs/JetBrains_Mono-0.4.7/font.css" rel="stylesheet">
<link href="libs/Roboto_Slab-0.4.7/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Advanced R Exercises</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">About</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="names-and-values.html"><span class="header-section-number">2</span> Names and values</a></li>
<li><a class="" href="vectors.html"><span class="header-section-number">3</span> Vectors</a></li>
<li><a class="" href="subsetting.html"><span class="header-section-number">4</span> Subsetting</a></li>
<li><a class="" href="control-flow.html"><span class="header-section-number">5</span> Control flow</a></li>
<li><a class="" href="functions.html"><span class="header-section-number">6</span> Functions</a></li>
<li><a class="" href="environments.html"><span class="header-section-number">7</span> Environments</a></li>
<li><a class="active" href="conditions.html"><span class="header-section-number">8</span> Conditions</a></li>
<li><a class="" href="functionals.html"><span class="header-section-number">9</span> Functionals</a></li>
<li><a class="" href="function-factories.html"><span class="header-section-number">10</span> Function factories</a></li>
<li><a class="" href="function-operators.html"><span class="header-section-number">11</span> Function operators</a></li>
<li><a class="" href="base-types.html"><span class="header-section-number">12</span> Base Types</a></li>
<li><a class="" href="s3.html"><span class="header-section-number">13</span> S3</a></li>
<li><a class="" href="r6.html"><span class="header-section-number">14</span> R6</a></li>
<li><a class="" href="s4.html"><span class="header-section-number">15</span> S4</a></li>
<li><a class="" href="trade-offs.html"><span class="header-section-number">16</span> Trade-offs</a></li>
<li><a class="" href="big-picture.html"><span class="header-section-number">17</span> Big Picture</a></li>
<li><a class="" href="expressions.html"><span class="header-section-number">18</span> Expressions</a></li>
<li><a class="" href="quasiquotation.html"><span class="header-section-number">19</span> Quasiquotation</a></li>
<li><a class="" href="evaluation.html"><span class="header-section-number">20</span> Evaluation</a></li>
<li><a class="" href="translation.html"><span class="header-section-number">21</span> Translation</a></li>
<li><a class="" href="debugging.html"><span class="header-section-number">22</span> Debugging</a></li>
<li><a class="" href="measuring-performance.html"><span class="header-section-number">23</span> Measuring performance</a></li>
<li><a class="" href="improving-performance.html"><span class="header-section-number">24</span> Improving performance</a></li>
<li><a class="" href="rewriting-r-code-in-c.html"><span class="header-section-number">25</span> Rewriting R code in C++</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/IndrajeetPatil/Advanced-R-exercises">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="conditions" class="section level1" number="8">
<h1>
<span class="header-section-number">8</span> Conditions<a class="anchor" aria-label="anchor" href="#conditions"><i class="fas fa-link"></i></a>
</h1>
<p>Attaching the needed libraries:</p>
<div class="sourceCode" id="cb218"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org">rlang</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://testthat.r-lib.org">testthat</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div id="signalling-conditions-exercises-8.2.4" class="section level2" number="8.1">
<h2>
<span class="header-section-number">8.1</span> Signalling conditions (Exercises 8.2.4)<a class="anchor" aria-label="anchor" href="#signalling-conditions-exercises-8.2.4"><i class="fas fa-link"></i></a>
</h2>
<hr>
<p><strong>Q1.</strong> Write a wrapper around <code><a href="https://rdrr.io/r/base/files.html">file.remove()</a></code> that throws an error if the file to be deleted does not exist.</p>
<p><strong>A1.</strong> Letâ€™s first create a wrapper function around <code><a href="https://rdrr.io/r/base/files.html">file.remove()</a></code> that throws an error if the file to be deleted does not exist.</p>
<div class="sourceCode" id="cb219"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fileRemove</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">existing_files</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/file_access.html">file_exists</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="va">existing_files</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span></span>
<span>        <span class="st">"The following files to be deleted don't exist:"</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">existing_files</span><span class="op">[</span><span class="op">!</span><span class="va">existing_files</span><span class="op">]</span><span class="op">)</span>,</span>
<span>        sep <span class="op">=</span> <span class="st">"\n"</span></span>
<span>      <span class="op">)</span>,</span>
<span>      call. <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/files.html">file.remove</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Letâ€™s first create a file that we can delete immediately.</p>
<div class="sourceCode" id="cb220"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html">file_create</a></span><span class="op">(</span><span class="st">"random.R"</span><span class="op">)</span></span></code></pre></div>
<p>The function should fail if there are any other files provided that donâ€™t exist:</p>
<div class="sourceCode" id="cb221"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fileRemove</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"random.R"</span>, <span class="st">"XYZ.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; The following files to be deleted don't exist:</span></span>
<span><span class="co">#&gt; XYZ.csv</span></span>
<span><span class="co">#&gt; Error:</span></span></code></pre></div>
<p>But it does work as expected when the file exists:</p>
<div class="sourceCode" id="cb222"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">fileRemove</span><span class="op">(</span><span class="st">"random.R"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<hr>
<p><strong>Q2.</strong> What does the <code>appendLF</code> argument to <code><a href="https://rdrr.io/r/base/message.html">message()</a></code> do? How is it related to <code><a href="https://rdrr.io/r/base/cat.html">cat()</a></code>?</p>
<p><strong>A2.</strong> As mentioned in the docs for <code><a href="https://rdrr.io/r/base/message.html">message()</a></code>, <code>appendLF</code> argument decides:</p>
<blockquote>
<p>should messages given as a character string have a newline appended?</p>
</blockquote>
<ul>
<li>If <code>TRUE</code> (default value), a final newline is regarded as part of the message:</li>
</ul>
<div class="sourceCode" id="cb223"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">appendLF</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"Beetle"</span>, appendLF <span class="op">=</span> <span class="va">appendLF</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"Juice"</span>, appendLF <span class="op">=</span> <span class="va">appendLF</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">foo</span><span class="op">(</span>appendLF <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Beetle</span></span>
<span><span class="co">#&gt; Juice</span></span></code></pre></div>
<ul>
<li>If <code>FALSE</code>, messages will be concatenated:</li>
</ul>
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">appendLF</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"Beetle"</span>, appendLF <span class="op">=</span> <span class="va">appendLF</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"Juice"</span>, appendLF <span class="op">=</span> <span class="va">appendLF</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">foo</span><span class="op">(</span>appendLF <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; BeetleJuice</span></span></code></pre></div>
<p>On the other hand, <code><a href="https://rdrr.io/r/base/cat.html">cat()</a></code> converts its arguments to character vectors and concatenates them to a single character vector by default:</p>
<div class="sourceCode" id="cb225"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Beetle"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Juice"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">foo</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; BeetleJuice</span></span></code></pre></div>
<p>In order to get <code><a href="https://rdrr.io/r/base/message.html">message()</a></code>-like default behavior for outputs, we can set <code>sep = "\n"</code>:</p>
<div class="sourceCode" id="cb226"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Beetle"</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Juice"</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">foo</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Beetle</span></span>
<span><span class="co">#&gt; Juice</span></span></code></pre></div>
<hr>
</div>
<div id="handling-conditions-exercises-8.4.5" class="section level2" number="8.2">
<h2>
<span class="header-section-number">8.2</span> Handling conditions (Exercises 8.4.5)<a class="anchor" aria-label="anchor" href="#handling-conditions-exercises-8.4.5"><i class="fas fa-link"></i></a>
</h2>
<hr>
<p><strong>Q1.</strong> What extra information does the condition generated by <code><a href="https://rlang.r-lib.org/reference/abort.html">abort()</a></code> contain compared to the condition generated by <code><a href="https://rdrr.io/r/base/stop.html">stop()</a></code> i.e.Â whatâ€™s the difference between these two objects? Read the help for <code><a href="https://rlang.r-lib.org/reference/abort.html">?abort</a></code> to learn more.</p>
<div class="sourceCode" id="cb227"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rlang.r-lib.org/reference/catch_cnd.html">catch_cnd</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"An error"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rlang.r-lib.org/reference/catch_cnd.html">catch_cnd</a></span><span class="op">(</span><span class="fu"><a href="https://rlang.r-lib.org/reference/abort.html">abort</a></span><span class="op">(</span><span class="st">"An error"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>A1.</strong> Compared to <code><a href="https://rdrr.io/r/base/stop.html">base::stop()</a></code>, <code><a href="https://rlang.r-lib.org/reference/abort.html">rlang::abort()</a></code> contains two additional pieces of information:</p>
<ul>
<li>
<code>trace</code>: A traceback capturing the sequence of calls that lead to the current function</li>
<li>
<code>parent</code>: Information about another condition used as a parent to create a chained condition.</li>
</ul>
<div class="sourceCode" id="cb228"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org">rlang</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">stopInfo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/catch_cnd.html">catch_cnd</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"An error"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">abortInfo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/catch_cnd.html">catch_cnd</a></span><span class="op">(</span><span class="fu"><a href="https://rlang.r-lib.org/reference/abort.html">abort</a></span><span class="op">(</span><span class="st">"An error"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">stopInfo</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 2</span></span>
<span><span class="co">#&gt;  $ message: chr "An error"</span></span>
<span><span class="co">#&gt;  $ call   : language force(expr)</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:3] "simpleError" "error" "condition"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">abortInfo</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 5</span></span>
<span><span class="co">#&gt;  $ message: chr "An error"</span></span>
<span><span class="co">#&gt;  $ trace  :Classes 'rlang_trace', 'rlib_trace', 'tbl' and 'data.frame':  8 obs. of  6 variables:</span></span>
<span><span class="co">#&gt;   ..$ call       :List of 8</span></span>
<span><span class="co">#&gt;   .. ..$ : language catch_cnd(abort("An error"))</span></span>
<span><span class="co">#&gt;   .. ..$ : language eval_bare(rlang::expr(tryCatch(!!!handlers, {     force(expr) ...</span></span>
<span><span class="co">#&gt;   .. ..$ : language tryCatch(condition = `&lt;fn&gt;`, {     force(expr) ...</span></span>
<span><span class="co">#&gt;   .. ..$ : language tryCatchList(expr, classes, parentenv, handlers)</span></span>
<span><span class="co">#&gt;   .. ..$ : language tryCatchOne(expr, names, parentenv, handlers[[1L]])</span></span>
<span><span class="co">#&gt;   .. ..$ : language doTryCatch(return(expr), name, parentenv, handler)</span></span>
<span><span class="co">#&gt;   .. ..$ : language force(expr)</span></span>
<span><span class="co">#&gt;   .. ..$ : language abort("An error")</span></span>
<span><span class="co">#&gt;   ..$ parent     : int [1:8] 0 1 1 3 4 5 1 0</span></span>
<span><span class="co">#&gt;   ..$ visible    : logi [1:8] FALSE FALSE FALSE FALSE FALSE FALSE ...</span></span>
<span><span class="co">#&gt;   ..$ namespace  : chr [1:8] "rlang" "rlang" "base" "base" ...</span></span>
<span><span class="co">#&gt;   ..$ scope      : chr [1:8] "::" "::" "::" "local" ...</span></span>
<span><span class="co">#&gt;   ..$ error_frame: logi [1:8] FALSE FALSE FALSE FALSE FALSE FALSE ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "version")= int 2</span></span>
<span><span class="co">#&gt;  $ parent : NULL</span></span>
<span><span class="co">#&gt;  $ rlang  :List of 1</span></span>
<span><span class="co">#&gt;   ..$ inherit: logi TRUE</span></span>
<span><span class="co">#&gt;  $ call   : NULL</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:3] "rlang_error" "error" "condition"</span></span></code></pre></div>
<hr>
<p><strong>Q2.</strong> Predict the results of evaluating the following code</p>
<div class="sourceCode" id="cb229"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">show_condition</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">code</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span><span class="op">(</span></span>
<span>    error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="st">"error"</span>,</span>
<span>    warning <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="st">"warning"</span>,</span>
<span>    message <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="st">"message"</span>,</span>
<span>    <span class="op">{</span></span>
<span>      <span class="va">code</span></span>
<span>      <span class="cn">NULL</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">show_condition</span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"!"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">show_condition</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu">show_condition</span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/warning.html">warning</a></span><span class="op">(</span><span class="st">"?!"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">show_condition</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fl">10</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"?"</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/warning.html">warning</a></span><span class="op">(</span><span class="st">"?!"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p><strong>A2.</strong> Correctly predicted ðŸ˜‰</p>
<p>The first three pieces of code are straightforward:</p>
<div class="sourceCode" id="cb230"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">show_condition</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">code</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span><span class="op">(</span></span>
<span>    error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="st">"error"</span>,</span>
<span>    warning <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="st">"warning"</span>,</span>
<span>    message <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="st">"message"</span>,</span>
<span>    <span class="op">{</span></span>
<span>      <span class="va">code</span></span>
<span>      <span class="cn">NULL</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">show_condition</span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"!"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "error"</span></span>
<span><span class="fu">show_condition</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="fu">show_condition</span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/warning.html">warning</a></span><span class="op">(</span><span class="st">"?!"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "warning"</span></span></code></pre></div>
<p>The last piece of code is the challenging one and it illustrates how <code><a href="https://rdrr.io/r/base/conditions.html">tryCatch()</a></code> works. From its docs:</p>
<blockquote>
<p>When several handlers are supplied in a single tryCatch then the first one is considered more recent than the second.</p>
</blockquote>
<div class="sourceCode" id="cb231"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show_condition</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fl">10</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"?"</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/warning.html">warning</a></span><span class="op">(</span><span class="st">"?!"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "message"</span></span></code></pre></div>
<hr>
<p><strong>Q3.</strong> Explain the results of running this code:</p>
<div class="sourceCode" id="cb232"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/conditions.html">withCallingHandlers</a></span><span class="op">(</span></span>
<span>  message <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"b"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/conditions.html">withCallingHandlers</a></span><span class="op">(</span></span>
<span>    message <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"a"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"c"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; b</span></span>
<span><span class="co">#&gt; a</span></span>
<span><span class="co">#&gt; b</span></span>
<span><span class="co">#&gt; c</span></span></code></pre></div>
<p><strong>A3.</strong> The surprising part of this output is the <code>b</code> before the last <code>c</code>.</p>
<p>This happens because the inner calling handler doesnâ€™t handle the message, so it bubbles up to the outer calling handler.</p>
<hr>
<p><strong>Q4.</strong> Read the source code for <code><a href="https://rlang.r-lib.org/reference/catch_cnd.html">catch_cnd()</a></code> and explain how it works.</p>
<p><strong>A4.</strong> Letâ€™s look at the source code for <code><a href="https://rlang.r-lib.org/reference/catch_cnd.html">catch_cnd()</a></code>:</p>
<div class="sourceCode" id="cb233"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rlang</span><span class="fu">::</span><span class="va"><a href="https://rlang.r-lib.org/reference/catch_cnd.html">catch_cnd</a></span></span>
<span><span class="co">#&gt; function (expr, classes = "condition") </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     stopifnot(is_character(classes))</span></span>
<span><span class="co">#&gt;     handlers &lt;- rep_named(classes, list(identity))</span></span>
<span><span class="co">#&gt;     eval_bare(rlang::expr(tryCatch(!!!handlers, {</span></span>
<span><span class="co">#&gt;         force(expr)</span></span>
<span><span class="co">#&gt;         return(NULL)</span></span>
<span><span class="co">#&gt;     })))</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x556b8d4647f8&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: namespace:rlang&gt;</span></span></code></pre></div>
<p>As mentioned in the function docs:</p>
<blockquote>
<p>This is a small wrapper around <code><a href="https://rdrr.io/r/base/conditions.html">tryCatch()</a></code> that captures any condition signalled while evaluating its argument.</p>
</blockquote>
<p>The <code>classes</code> argument allows a character vector of condition classes to catch, and the complex tidy evaluation generates the necessary condition (if there is any; otherwise <code>NULL</code>).</p>
<div class="sourceCode" id="cb234"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rlang.r-lib.org/reference/catch_cnd.html">catch_cnd</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span></span>
<span><span class="fu"><a href="https://rlang.r-lib.org/reference/catch_cnd.html">catch_cnd</a></span><span class="op">(</span><span class="fu"><a href="https://rlang.r-lib.org/reference/abort.html">abort</a></span><span class="op">(</span>message <span class="op">=</span> <span class="st">"an error"</span>, class <span class="op">=</span> <span class="st">"class1"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;error/class1&gt;</span></span>
<span><span class="co">#&gt; Error:</span></span>
<span><span class="co">#&gt; ! an error</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Backtrace:</span></span>
<span><span class="co">#&gt; â–†</span></span></code></pre></div>
<hr>
<p><strong>Q5.</strong> How could you rewrite <code>show_condition()</code> to use a single handler?</p>
<p><strong>A5.</strong> The source code for <code>rlang::catch_cond()</code> gives us a clue as to how we can do this.</p>
<p>Conditions also have a <code>class</code> attribute, and we can use it to determine which handler will match the condition.</p>
<div class="sourceCode" id="cb235"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">show_condition2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">code</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span><span class="op">(</span></span>
<span>    condition <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html">inherits</a></span><span class="op">(</span><span class="va">cnd</span>, <span class="st">"error"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="st">"error"</span><span class="op">)</span></span>
<span>      <span class="op">}</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html">inherits</a></span><span class="op">(</span><span class="va">cnd</span>, <span class="st">"warning"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="st">"warning"</span><span class="op">)</span></span>
<span>      <span class="op">}</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html">inherits</a></span><span class="op">(</span><span class="va">cnd</span>, <span class="st">"message"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="st">"message"</span><span class="op">)</span></span>
<span>      <span class="op">}</span></span>
<span>    <span class="op">}</span>,</span>
<span>    <span class="op">{</span></span>
<span>      <span class="va">code</span></span>
<span>      <span class="cn">NULL</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Letâ€™s try this new version with the examples used for the original version:</p>
<div class="sourceCode" id="cb236"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show_condition2</span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"!"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "error"</span></span>
<span><span class="fu">show_condition2</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; NULL</span></span>
<span><span class="fu">show_condition2</span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/warning.html">warning</a></span><span class="op">(</span><span class="st">"?!"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "warning"</span></span>
<span><span class="fu">show_condition2</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fl">10</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"?"</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/warning.html">warning</a></span><span class="op">(</span><span class="st">"?!"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "message"</span></span></code></pre></div>
<hr>
</div>
<div id="custom-conditions-exercises-8.5.4" class="section level2" number="8.3">
<h2>
<span class="header-section-number">8.3</span> Custom conditions (Exercises 8.5.4)<a class="anchor" aria-label="anchor" href="#custom-conditions-exercises-8.5.4"><i class="fas fa-link"></i></a>
</h2>
<hr>
<p><strong>Q1.</strong> Inside a package, itâ€™s occasionally useful to check that a package is installed before using it. Write a function that checks if a package is installed (with <code>requireNamespace("pkg", quietly = FALSE))</code> and if not, throws a custom condition that includes the package name in the metadata.</p>
<p><strong>A1.</strong> Here is the desired function:</p>
<div class="sourceCode" id="cb237"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">abort_missing_package</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">msg</span> <span class="op">&lt;-</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"Problem loading `{pkg}` package, which is missing and must be installed."</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rlang.r-lib.org/reference/abort.html">abort</a></span><span class="op">(</span><span class="st">"error_missing_package"</span>,</span>
<span>    message <span class="op">=</span> <span class="va">msg</span>,</span>
<span>    pkg <span class="op">=</span> <span class="va">pkg</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">check_if_pkg_installed</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace</a></span><span class="op">(</span><span class="va">pkg</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">abort_missing_package</span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="cn">TRUE</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">check_if_pkg_installed</span><span class="op">(</span><span class="st">"xyz123"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `abort_missing_package()`:</span></span>
<span><span class="co">#&gt; ! Problem loading `xyz123` package, which is missing and must be installed.</span></span>
<span><span class="fu">check_if_pkg_installed</span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>For a reference, also see the source code for following functions:</p>
<ul>
<li><code><a href="https://rlang.r-lib.org/reference/is_installed.html">rlang::is_installed()</a></code></li>
<li><code>insight::check_if_installed()</code></li>
</ul>
<hr>
<p><strong>Q2.</strong> Inside a package you often need to stop with an error when something is not right. Other packages that depend on your package might be tempted to check these errors in their unit tests. How could you help these packages to avoid relying on the error message which is part of the user interface rather than the API and might change without notice?</p>
<p><strong>A2.</strong> As an example, letâ€™s say that another package developer wanted to use the <code>check_if_pkg_installed()</code> function that we just wrote.</p>
<p>So the developer using it in their own package can write a unit test like this:</p>
<div class="sourceCode" id="cb238"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://testthat.r-lib.org/reference/expect_error.html">expect_error</a></span><span class="op">(</span></span>
<span>  <span class="fu">check_if_pkg_installed</span><span class="op">(</span><span class="st">"xyz123"</span><span class="op">)</span>,</span>
<span>  <span class="st">"Problem loading `xyz123` package, which is missing and must be installed."</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>To dissuade developers from having to rely on error messages to check for errors, we can instead provide a custom condition, which can be used for unit testing instead:</p>
<div class="sourceCode" id="cb239"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/catch_cnd.html">catch_cnd</a></span><span class="op">(</span><span class="fu">check_if_pkg_installed</span><span class="op">(</span><span class="st">"xyz123"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">inherits</a></span><span class="op">(</span><span class="va">e</span>, <span class="st">"error_missing_package"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>So that the unit test could be:</p>
<div class="sourceCode" id="cb240"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://testthat.r-lib.org/reference/inheritance-expectations.html">expect_s3_class</a></span><span class="op">(</span><span class="va">e</span>, <span class="st">"error_missing_package"</span><span class="op">)</span></span></code></pre></div>
<p>This test wouldnâ€™t fail even if we decided to change the exact message.</p>
<hr>
</div>
<div id="applications-exercises-8.6.6" class="section level2" number="8.4">
<h2>
<span class="header-section-number">8.4</span> Applications (Exercises 8.6.6)<a class="anchor" aria-label="anchor" href="#applications-exercises-8.6.6"><i class="fas fa-link"></i></a>
</h2>
<hr>
<p><strong>Q1.</strong> Create <code>suppressConditions()</code> that works like <code><a href="https://rdrr.io/r/base/message.html">suppressMessages()</a></code> and <code><a href="https://rdrr.io/r/base/warning.html">suppressWarnings()</a></code> but suppresses everything. Think carefully about how you should handle errors.</p>
<p><strong>A1.</strong> To create the desired <code>suppressConditions()</code>, we just need to create an equivalent of <code><a href="https://rdrr.io/r/base/warning.html">suppressWarnings()</a></code> and <code><a href="https://rdrr.io/r/base/message.html">suppressMessages()</a></code> for errors. To suppress the error message, we can handle errors within a <code><a href="https://rdrr.io/r/base/conditions.html">tryCatch()</a></code> and return the error object invisibly:</p>
<div class="sourceCode" id="cb241"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">suppressErrors</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">expr</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span><span class="op">(</span></span>
<span>    error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span>,</span>
<span>    <span class="va">expr</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">suppressConditions</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">expr</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">suppressErrors</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressMessages</a></span><span class="op">(</span><span class="va">expr</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Letâ€™s try out and see if this works as expected:</p>
<div class="sourceCode" id="cb242"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">suppressConditions</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span></span>
<span><span class="fu">suppressConditions</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"I'm messaging you"</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/warning.html">warning</a></span><span class="op">(</span><span class="st">"I'm warning you"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">suppressConditions</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"I'm stopping this"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>All condition messages are now suppressed, but note that if we assign error object to a variable, we can still extract useful information for debugging:</p>
<div class="sourceCode" id="cb243"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu">suppressConditions</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"I'm stopping this"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="va">e</span></span>
<span><span class="co">#&gt; &lt;simpleError in withCallingHandlers(expr, message = function(c) if (inherits(c,     classes)) tryInvokeRestart("muffleMessage")): I'm stopping this&gt;</span></span></code></pre></div>
<hr>
<p><strong>Q2.</strong> Compare the following two implementations of <code>message2error()</code>. What is the main advantage of <code><a href="https://rdrr.io/r/base/conditions.html">withCallingHandlers()</a></code> in this scenario? (Hint: look carefully at the traceback.)</p>
<div class="sourceCode" id="cb244"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">message2error</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">code</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/conditions.html">withCallingHandlers</a></span><span class="op">(</span><span class="va">code</span>, message <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">message2error</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">code</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span><span class="op">(</span><span class="va">code</span>, message <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="va">e</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>A2.</strong> With <code><a href="https://rdrr.io/r/base/conditions.html">withCallingHandlers()</a></code>, the condition handler is called from the signaling function itself, and, therefore, provides a more detailed call stack.</p>
<div class="sourceCode" id="cb245"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">message2error1</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">code</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/conditions.html">withCallingHandlers</a></span><span class="op">(</span><span class="va">code</span>, message <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"error"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">message2error1</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fl">1</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span><span class="st">"hidden error"</span><span class="op">)</span></span>
<span>  <span class="cn">NULL</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in (function (e) : error</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/traceback.html">traceback</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; 9: stop("error") at #2</span></span>
<span><span class="co">#&gt; 8: (function (e)</span></span>
<span><span class="co">#&gt;    stop("error"))(list(message = "hidden error\n",</span></span>
<span><span class="co">#&gt;      call = message("hidden error")))</span></span>
<span><span class="co">#&gt; 7: signalCondition(cond)</span></span>
<span><span class="co">#&gt; 6: doWithOneRestart(return(expr), restart)</span></span>
<span><span class="co">#&gt; 5: withOneRestart(expr, restarts[[1L]])</span></span>
<span><span class="co">#&gt; 4: withRestarts({</span></span>
<span><span class="co">#&gt;        signalCondition(cond)</span></span>
<span><span class="co">#&gt;        defaultHandler(cond)</span></span>
<span><span class="co">#&gt;    }, muffleMessage = function() NULL)</span></span>
<span><span class="co">#&gt; 3: message("hidden error") at #1</span></span>
<span><span class="co">#&gt; 2: withCallingHandlers(code,</span></span>
<span><span class="co">#&gt;      message = function(e) stop("error")) at #2</span></span>
<span><span class="co">#&gt; 1: message2error1({</span></span>
<span><span class="co">#&gt;        1</span></span>
<span><span class="co">#&gt;        message("hidden error")</span></span>
<span><span class="co">#&gt;        NULL</span></span>
<span><span class="co">#&gt;    })</span></span></code></pre></div>
<p>With <code><a href="https://rdrr.io/r/base/conditions.html">tryCatch()</a></code>, the signalling function terminates when a condition is raised, and so it doesnâ€™t provide as detailed call stack.</p>
<div class="sourceCode" id="cb246"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">message2error2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">code</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span><span class="op">(</span><span class="va">code</span>, message <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"error"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">message2error2</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fl">1</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span><span class="op">(</span><span class="st">"hidden error"</span><span class="op">)</span></span>
<span>  <span class="cn">NULL</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in value[[3L]](cond) : error</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/traceback.html">traceback</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; 6: stop("error") at #2</span></span>
<span><span class="co">#&gt; 5: value[[3L]](cond)</span></span>
<span><span class="co">#&gt; 4: tryCatchOne(expr, names, parentenv, handlers[[1L]])</span></span>
<span><span class="co">#&gt; 3: tryCatchList(expr, classes, parentenv, handlers)</span></span>
<span><span class="co">#&gt; 2: tryCatch(code, message = function(e) (stop("error"))) at #2</span></span>
<span><span class="co">#&gt; 1: message2error2({</span></span>
<span><span class="co">#&gt;        1</span></span>
<span><span class="co">#&gt;        message("hidden error")</span></span>
<span><span class="co">#&gt;        NULL</span></span>
<span><span class="co">#&gt;    })</span></span></code></pre></div>
<hr>
<p><strong>Q3.</strong> How would you modify the <code>catch_cnds()</code> definition if you wanted to recreate the original intermingling of warnings and messages?</p>
<p><strong>A3.</strong> Actually, you wonâ€™t have to modify anything about the function defined in the chapter, since it supports this out of the box.</p>
<p>So nothing additional to do here<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;The best kind of exercise there is!&lt;/p&gt;"><sup>5</sup></a>! ðŸ˜…</p>
<div class="sourceCode" id="cb247"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">catch_cnds</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">expr</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">conds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">add_cond</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">conds</span> <span class="op">&lt;&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html">append</a></span><span class="op">(</span><span class="va">conds</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rlang.r-lib.org/reference/cnd_muffle.html">cnd_muffle</a></span><span class="op">(</span><span class="va">cnd</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/conditions.html">withCallingHandlers</a></span><span class="op">(</span></span>
<span>    message <span class="op">=</span> <span class="va">add_cond</span>,</span>
<span>    warning <span class="op">=</span> <span class="va">add_cond</span>,</span>
<span>    <span class="va">expr</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="va">conds</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">catch_cnds</span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rlang.r-lib.org/reference/abort.html">inform</a></span><span class="op">(</span><span class="st">"a"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rlang.r-lib.org/reference/abort.html">warn</a></span><span class="op">(</span><span class="st">"b"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rlang.r-lib.org/reference/abort.html">inform</a></span><span class="op">(</span><span class="st">"c"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; &lt;message/rlang_message&gt;</span></span>
<span><span class="co">#&gt; Message:</span></span>
<span><span class="co">#&gt; a</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; &lt;warning/rlang_warning&gt;</span></span>
<span><span class="co">#&gt; Warning:</span></span>
<span><span class="co">#&gt; b</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; &lt;message/rlang_message&gt;</span></span>
<span><span class="co">#&gt; Message:</span></span>
<span><span class="co">#&gt; c</span></span></code></pre></div>
<hr>
<p><strong>Q4.</strong> Why is catching interrupts dangerous? Run this code to find out.</p>
<div class="sourceCode" id="cb248"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bottles_of_beer</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">i</span> <span class="op">=</span> <span class="fl">99</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span></span>
<span>    <span class="st">"There are "</span>, <span class="va">i</span>, <span class="st">" bottles of beer on the wall, "</span>,</span>
<span>    <span class="va">i</span>, <span class="st">" bottles of beer."</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="kw">while</span> <span class="op">(</span><span class="va">i</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>      interrupt <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">err</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">i</span> <span class="op">&lt;&lt;-</span> <span class="va">i</span> <span class="op">-</span> <span class="fl">1</span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span></span>
<span>            <span class="st">"Take one down, pass it around, "</span>, <span class="va">i</span>,</span>
<span>            <span class="st">" bottle"</span>, <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="st">"s"</span>, <span class="st">" of beer on the wall."</span></span>
<span>          <span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span>      <span class="op">}</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span><span class="op">(</span></span>
<span>    <span class="st">"No more bottles of beer on the wall, "</span>,</span>
<span>    <span class="st">"no more bottles of beer."</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>A4.</strong> Because this function catches the <code>interrupt</code> and there is no way to stop <code>bottles_of_beer()</code>, because the way you would usually stop it by using <code>interrupt</code>!</p>
<div class="sourceCode" id="cb249"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">bottles_of_beer</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; There are 99 bottles of beer on the wall, 99 bottles of beer.</span></span>
<span><span class="co">#&gt; Take one down, pass it around, 98 bottles of beer on the wall.</span></span>
<span><span class="co">#&gt; Take one down, pass it around, 97 bottles of beer on the wall.</span></span>
<span><span class="co">#&gt; Take one down, pass it around, 96 bottles of beer on the wall.</span></span>
<span><span class="co">#&gt; Take one down, pass it around, 95 bottles of beer on the wall.</span></span>
<span><span class="co">#&gt; Take one down, pass it around, 94 bottles of beer on the wall.</span></span>
<span><span class="co">#&gt; Take one down, pass it around, 93 bottles of beer on the wall.</span></span>
<span><span class="co">#&gt; Take one down, pass it around, 92 bottles of beer on the wall.</span></span>
<span><span class="co">#&gt; Take one down, pass it around, 91 bottles of beer on the wall.</span></span>
<span><span class="co">#&gt; ...</span></span></code></pre></div>
<p>In RStudio IDE, you can snap out of this loop by terminating the R session.</p>
<p>This shows why catching <code>interrupt</code> is dangerous and can result in poor user experience.</p>
<hr>
</div>
<div id="session-information-6" class="section level2" number="8.5">
<h2>
<span class="header-section-number">8.5</span> Session information<a class="anchor" aria-label="anchor" href="#session-information-6"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb250"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sessioninfo</span><span class="fu">::</span><span class="fu"><a href="https://r-lib.github.io/sessioninfo/reference/session_info.html">session_info</a></span><span class="op">(</span>include_base <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; â”€ Session info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span><span class="co">#&gt;  setting  value</span></span>
<span><span class="co">#&gt;  version  R version 4.3.2 (2023-10-31)</span></span>
<span><span class="co">#&gt;  os       Ubuntu 22.04.3 LTS</span></span>
<span><span class="co">#&gt;  system   x86_64, linux-gnu</span></span>
<span><span class="co">#&gt;  ui       X11</span></span>
<span><span class="co">#&gt;  language (EN)</span></span>
<span><span class="co">#&gt;  collate  C.UTF-8</span></span>
<span><span class="co">#&gt;  ctype    C.UTF-8</span></span>
<span><span class="co">#&gt;  tz       UTC</span></span>
<span><span class="co">#&gt;  date     2023-11-05</span></span>
<span><span class="co">#&gt;  pandoc   3.1.8 @ /usr/bin/ (via rmarkdown)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; â”€ Packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span><span class="co">#&gt;  package     * version date (UTC) lib source</span></span>
<span><span class="co">#&gt;  base        * 4.3.2   2023-11-01 [3] local</span></span>
<span><span class="co">#&gt;  bookdown      0.36    2023-10-16 [1] RSPM</span></span>
<span><span class="co">#&gt;  brio          1.1.3   2021-11-30 [1] RSPM</span></span>
<span><span class="co">#&gt;  bslib         0.5.1   2023-08-11 [1] RSPM</span></span>
<span><span class="co">#&gt;  cachem        1.0.8   2023-05-01 [1] RSPM</span></span>
<span><span class="co">#&gt;  cli           3.6.1   2023-03-23 [1] RSPM</span></span>
<span><span class="co">#&gt;  compiler      4.3.2   2023-11-01 [3] local</span></span>
<span><span class="co">#&gt;  datasets    * 4.3.2   2023-11-01 [3] local</span></span>
<span><span class="co">#&gt;  desc          1.4.2   2022-09-08 [1] RSPM</span></span>
<span><span class="co">#&gt;  digest        0.6.33  2023-07-07 [1] RSPM</span></span>
<span><span class="co">#&gt;  downlit       0.4.3   2023-06-29 [1] RSPM</span></span>
<span><span class="co">#&gt;  dplyr         1.1.3   2023-09-03 [1] RSPM</span></span>
<span><span class="co">#&gt;  evaluate      0.23    2023-11-01 [1] RSPM</span></span>
<span><span class="co">#&gt;  fansi         1.0.5   2023-10-08 [1] RSPM</span></span>
<span><span class="co">#&gt;  fastmap       1.1.1   2023-02-24 [1] RSPM</span></span>
<span><span class="co">#&gt;  fs            1.6.3   2023-07-20 [1] RSPM</span></span>
<span><span class="co">#&gt;  generics      0.1.3   2022-07-05 [1] RSPM</span></span>
<span><span class="co">#&gt;  glue          1.6.2   2022-02-24 [1] RSPM</span></span>
<span><span class="co">#&gt;  graphics    * 4.3.2   2023-11-01 [3] local</span></span>
<span><span class="co">#&gt;  grDevices   * 4.3.2   2023-11-01 [3] local</span></span>
<span><span class="co">#&gt;  htmltools     0.5.6.1 2023-10-06 [1] RSPM</span></span>
<span><span class="co">#&gt;  jquerylib     0.1.4   2021-04-26 [1] RSPM</span></span>
<span><span class="co">#&gt;  jsonlite      1.8.7   2023-06-29 [1] RSPM</span></span>
<span><span class="co">#&gt;  knitr         1.45    2023-10-30 [1] RSPM</span></span>
<span><span class="co">#&gt;  lifecycle     1.0.3   2022-10-07 [1] RSPM</span></span>
<span><span class="co">#&gt;  magrittr    * 2.0.3   2022-03-30 [1] RSPM</span></span>
<span><span class="co">#&gt;  memoise       2.0.1   2021-11-26 [1] RSPM</span></span>
<span><span class="co">#&gt;  methods     * 4.3.2   2023-11-01 [3] local</span></span>
<span><span class="co">#&gt;  pillar        1.9.0   2023-03-22 [1] RSPM</span></span>
<span><span class="co">#&gt;  pkgconfig     2.0.3   2019-09-22 [1] RSPM</span></span>
<span><span class="co">#&gt;  pkgload       1.3.3   2023-09-22 [1] RSPM</span></span>
<span><span class="co">#&gt;  R6            2.5.1   2021-08-19 [1] RSPM</span></span>
<span><span class="co">#&gt;  rlang       * 1.1.1   2023-04-28 [1] RSPM</span></span>
<span><span class="co">#&gt;  rmarkdown     2.25    2023-09-18 [1] RSPM</span></span>
<span><span class="co">#&gt;  rprojroot     2.0.3   2022-04-02 [1] RSPM</span></span>
<span><span class="co">#&gt;  sass          0.4.7   2023-07-15 [1] RSPM</span></span>
<span><span class="co">#&gt;  sessioninfo   1.2.2   2021-12-06 [1] RSPM</span></span>
<span><span class="co">#&gt;  stats       * 4.3.2   2023-11-01 [3] local</span></span>
<span><span class="co">#&gt;  testthat    * 3.2.0   2023-10-06 [1] RSPM</span></span>
<span><span class="co">#&gt;  tibble        3.2.1   2023-03-20 [1] RSPM</span></span>
<span><span class="co">#&gt;  tidyselect    1.2.0   2022-10-10 [1] RSPM</span></span>
<span><span class="co">#&gt;  tools         4.3.2   2023-11-01 [3] local</span></span>
<span><span class="co">#&gt;  utf8          1.2.4   2023-10-22 [1] RSPM</span></span>
<span><span class="co">#&gt;  utils       * 4.3.2   2023-11-01 [3] local</span></span>
<span><span class="co">#&gt;  vctrs         0.6.4   2023-10-12 [1] RSPM</span></span>
<span><span class="co">#&gt;  withr         2.5.2   2023-10-30 [1] RSPM</span></span>
<span><span class="co">#&gt;  xfun          0.41    2023-11-01 [1] RSPM</span></span>
<span><span class="co">#&gt;  xml2          1.3.5   2023-07-06 [1] RSPM</span></span>
<span><span class="co">#&gt;  yaml          2.3.7   2023-01-23 [1] RSPM</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  [1] /home/runner/work/_temp/Library</span></span>
<span><span class="co">#&gt;  [2] /opt/R/4.3.2/lib/R/site-library</span></span>
<span><span class="co">#&gt;  [3] /opt/R/4.3.2/lib/R/library</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span></code></pre></div>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="environments.html"><span class="header-section-number">7</span> Environments</a></div>
<div class="next"><a href="functionals.html"><span class="header-section-number">9</span> Functionals</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#conditions"><span class="header-section-number">8</span> Conditions</a></li>
<li><a class="nav-link" href="#signalling-conditions-exercises-8.2.4"><span class="header-section-number">8.1</span> Signalling conditions (Exercises 8.2.4)</a></li>
<li><a class="nav-link" href="#handling-conditions-exercises-8.4.5"><span class="header-section-number">8.2</span> Handling conditions (Exercises 8.4.5)</a></li>
<li><a class="nav-link" href="#custom-conditions-exercises-8.5.4"><span class="header-section-number">8.3</span> Custom conditions (Exercises 8.5.4)</a></li>
<li><a class="nav-link" href="#applications-exercises-8.6.6"><span class="header-section-number">8.4</span> Applications (Exercises 8.6.6)</a></li>
<li><a class="nav-link" href="#session-information-6"><span class="header-section-number">8.5</span> Session information</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/IndrajeetPatil/Advanced-R-exercises/blob/master/Conditions.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/IndrajeetPatil/Advanced-R-exercises/edit/master/Conditions.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Advanced R Exercises</strong>" was written by <a class="text-light" href="https://sites.google.com/site/indrajeetspatilmorality/">Indrajeet Patil</a>. It was last built on 2023-11-05.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
